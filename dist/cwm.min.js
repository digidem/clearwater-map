d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function r(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function o(){}function i(){}function a(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function u(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,r=po.length;r>n;++n){var o=po[n]+e;if(o in t)return o}}function s(){}function l(){}function c(t){function e(){for(var e,r=n,o=-1,i=r.length;i>++o;)(e=r[o].on)&&e.apply(this,arguments);return t}var n=[],r=new o;return e.on=function(e,o){var i,a=r.get(e);return 2>arguments.length?a&&a.on:(a&&(a.on=null,n=n.slice(0,i=n.indexOf(a)).concat(n.slice(i+1)),r.remove(e)),o&&n.push(r.set(e,{on:o})),t)},e}function f(){no.event.preventDefault()}function h(){for(var t,e=no.event;t=e.sourceEvent;)e=t;return e}function p(t){for(var e=new l,n=0,r=arguments.length;r>++n;)e[arguments[n]]=c(e);return e.of=function(n,r){return function(o){try{var i=o.sourceEvent=no.event;o.target=t,no.event=o,e[o.type].apply(n,r)}finally{no.event=i}}},e}function d(t){return go(t,xo),t}function m(t){return"function"==typeof t?t:function(){return vo(t,this)}}function g(t){return"function"==typeof t?t:function(){return yo(t,this)}}function v(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function o(){this.setAttribute(t,e)}function i(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=no.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?u:a:t.local?i:o}function y(t){return t.trim().replace(/\s+/g," ")}function w(t){return RegExp("(?:^|\\s+)"+no.requote(t)+"(?:\\s+|$)","g")}function b(t,e){function n(){for(var n=-1;o>++n;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);o>++n;)t[n](this,r)}t=t.trim().split(/\s+/).map(x);var o=t.length;return"function"==typeof e?r:n}function x(t){var e=w(t);return function(n,r){if(o=n.classList)return r?o.add(t):o.remove(t);var o=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(o)||n.setAttribute("class",y(o+" "+t))):n.setAttribute("class",y(o.replace(e," ")))}}function M(t,e,n){function r(){this.style.removeProperty(t)}function o(){this.style.setProperty(t,e,n)}function i(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?i:o}function _(t,e){function n(){delete this[t]}function r(){this[t]=e}function o(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?o:r}function T(t){return"function"==typeof t?t:(t=no.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function E(t){return{__data__:t}}function C(t){return function(){return bo(this,t)}}function z(t){return arguments.length||(t=no.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function S(t,e){for(var n=0,r=t.length;r>n;n++)for(var o,i=t[n],a=0,u=i.length;u>a;a++)(o=i[a])&&e(o,a,n);return t}function k(t){return go(t,_o),t}function L(t){var e,n;return function(r,o,i){var a,u=t[i].update,s=u.length;for(i!=n&&(n=i,e=0),o>=e&&(e=o+1);!(a=u[e])&&s>++e;);return a}}function A(){var t=this.__transition__;t&&++t.active}function P(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function o(){var o=l(e,so(arguments));r.call(this),this.addEventListener(t,this[a]=o,o.$=n),o._=e}function i(){var e,n=RegExp("^__on([^.]+)"+no.requote(t)+"$");for(var r in this)if(e=r.match(n)){var o=this[r];this.removeEventListener(e[1],o,o.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),l=N;u>0&&(t=t.substring(0,u));var c=Eo.get(t);return c&&(t=c,l=q),u?e?o:r:e?s:i}function N(t,e){return function(n){var r=no.event;no.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{no.event=r}}}function q(t,e){var n=N(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function j(){var t=".dragsuppress-"+ ++zo,e="click"+t,n=no.select(fo).on("touchmove"+t,f).on("dragstart"+t,f).on("selectstart"+t,f);if(Co){var r=co.style,o=r[Co];r[Co]="none"}return function(i){function a(){n.on(e,null)}n.on(t,null),Co&&(r[Co]=o),i&&(n.on(e,function(){f(),a()},!0),setTimeout(a,0))}}function I(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>So&&(fo.scrollX||fo.scrollY)){n=no.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();So=!(o.f||o.e),n.remove()}return So?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function H(t){return"function"==typeof t?t:function(){return t}}function O(){var t=D(),e=R()-t;e>24?(isFinite(e)&&(clearTimeout(Po),Po=setTimeout(O,e)),Ao=0):(Ao=1,qo(O))}function D(){var t=Date.now();for(No=ko;No;)t>=No.t&&(No.f=No.c(t-No.t)),No=No.n;return t}function R(){for(var t,e=ko,n=1/0;e;)e.f?e=t?t.n=e.n:ko=e.n:(n>e.t&&(n=e.t),e=(t=e).n);return Lo=t,n}function F(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function B(t,e,n){function r(e){var n=t(e),r=i(n,1);return r-e>e-n?n:r}function o(n){return e(n=t(new Io(n-1)),1),n}function i(t,n){return e(t=new Io(+t),n),t}function a(t,r,i){var a=o(t),u=[];if(i>1)for(;r>a;)n(a)%i||u.push(new Date(+a)),e(a,1);else for(;r>a;)u.push(new Date(+a)),e(a,1);return u}function u(t,e,n){try{Io=F;var r=new F;return r._=t,a(r,e,n)}finally{Io=Date}}t.floor=t,t.round=r,t.ceil=o,t.offset=i,t.range=a;var s=t.utc=Y(t);return s.floor=s,s.round=Y(r),s.ceil=Y(o),s.offset=Y(i),s.range=u,t}function Y(t){return function(e,n){try{Io=F;var r=new F;return r._=e,t(r,n)._}finally{Io=Date}}}function U(t){function e(e){for(var r,o,i,a=[],u=-1,s=0;n>++u;)37===t.charCodeAt(u)&&(a.push(t.substring(s,u)),null!=(o=ei[r=t.charAt(++u)])&&(r=t.charAt(++u)),(i=ni[r])&&(r=i(e,null==o?"e"===r?" ":"0":o)),a.push(r),s=u+1);return a.push(t.substring(s,u)),a.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=X(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var o=null!=n.Z&&Io!==F,i=new(o?F:Io);return"j"in n?i.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+Math.floor(n.Z/100),n.M+n.Z%100,n.S,n.L),o?i._:i},e.toString=function(){return t},e}function X(t,e,n,r){for(var o,i,a,u=0,s=e.length,l=n.length;s>u;){if(r>=l)return-1;if(o=e.charCodeAt(u++),37===o){if(a=e.charAt(u++),i=ri[a in ei?e.charAt(u++):a],!i||0>(r=i(t,n,r)))return-1}else if(o!=n.charCodeAt(r++))return-1}return r}function $(t){return RegExp("^(?:"+t.map(no.requote).join("|")+")","i")}function Z(t){for(var e=new o,n=-1,r=t.length;r>++n;)e.set(t[n].toLowerCase(),n);return e}function W(t,e,n){var r=0>t?"-":"",o=(r?-t:t)+"",i=o.length;return r+(n>i?Array(n-i+1).join(e)+o:o)}function K(t,e,n){Wo.lastIndex=0;var r=Wo.exec(e.substring(n));return r?(t.w=Ko.get(r[0].toLowerCase()),n+r[0].length):-1}function Q(t,e,n){$o.lastIndex=0;var r=$o.exec(e.substring(n));return r?(t.w=Zo.get(r[0].toLowerCase()),n+r[0].length):-1}function G(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function V(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n));return r?(t.U=+r[0],n+r[0].length):-1}function J(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n));return r?(t.W=+r[0],n+r[0].length):-1}function te(t,e,n){Vo.lastIndex=0;var r=Vo.exec(e.substring(n));return r?(t.m=Jo.get(r[0].toLowerCase()),n+r[0].length):-1}function ee(t,e,n){Qo.lastIndex=0;var r=Qo.exec(e.substring(n));return r?(t.m=Go.get(r[0].toLowerCase()),n+r[0].length):-1}function ne(t,e,n){return X(t,""+ni.c,e,n)}function re(t,e,n){return X(t,""+ni.x,e,n)}function oe(t,e,n){return X(t,""+ni.X,e,n)}function ie(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ae(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.y=se(+r[0]),n+r[0].length):-1}function ue(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=+e,n+5):-1}function se(t){return t+(t>68?1900:2e3)}function le(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ce(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fe(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function he(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pe(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function de(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function me(t,e,n){oi.lastIndex=0;var r=oi.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ge(t,e,n){var r=ii.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}function ve(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(oo(e)/60),o=oo(e)%60;return n+W(r,"0",2)+W(o,"0",2)}function ye(t,e,n){ti.lastIndex=0;var r=ti.exec(e.substring(n,n+1));return r?n+r[0].length:-1}function we(t){function e(t){try{Io=F;var e=new Io;return e._=t,n(e)}finally{Io=Date}}var n=U(t);return e.parse=function(t){try{Io=F;var e=n.parse(t);return e&&e._}finally{Io=Date}},e.toString=n.toString,e}function be(t){return t.toISOString()}function xe(){return!0}function Me(){}function _e(t,e,n){return new Te(t,e,n)}function Te(t,e,n){this.h=t,this.s=e,this.l=n}function Ee(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(a-i)*t/60:180>t?a:240>t?i+(a-i)*(240-t)/60:i}function o(t){return Math.round(255*r(t))}var i,a;return t=isNaN(t)?0:0>(t%=360)?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,i=2*n-a,De(o(t+120),o(t),o(t-120))}function Ce(t){return t>1?0:-1>t?si:Math.acos(t)}function ze(t){return t>1?ci:-1>t?-ci:Math.asin(t)}function Se(t,e,n){return new ke(t,e,n)}function ke(t,e,n){this.h=t,this.c=e,this.l=n}function Le(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),Ae(n,Math.cos(t*=pi)*e,Math.sin(t)*e)}function Ae(t,e,n){return new Pe(t,e,n)}function Pe(t,e,n){this.l=t,this.a=e,this.b=n}function Ne(t,e,n){var r=(t+16)/116,o=r+e/500,i=r-n/200;return o=je(o)*vi,r=je(r)*yi,i=je(i)*wi,De(He(3.2404542*o-1.5371385*r-.4985314*i),He(-.969266*o+1.8760108*r+.041556*i),He(.0556434*o-.2040259*r+1.0572252*i))}function qe(t,e,n){return t>0?Se(Math.atan2(n,e)*di,Math.sqrt(e*e+n*n),t):Se(0/0,0/0,t)}function je(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function Ie(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function He(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Oe(t){return De(t>>16,255&t>>8,255&t)}function De(t,e,n){return new Re(t,e,n)}function Re(t,e,n){this.r=t,this.g=e,this.b=n}function Fe(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Be(t,e,n){var r,o,i,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(o=r[2].split(","),r[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e($e(o[0]),$e(o[1]),$e(o[2]))}return(i=Mi.get(t))?e(i.r,i.g,i.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,u=t.charAt(2),u+=u,s=t.charAt(3),s+=s):7===t.length&&(a=t.substring(1,3),u=t.substring(3,5),s=t.substring(5,7)),a=parseInt(a,16),u=parseInt(u,16),s=parseInt(s,16)),e(a,u,s))}function Ye(t,e,n){var r,o,i=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-i,s=(a+i)/2;return u?(o=.5>s?u/(a+i):u/(2-a-i),r=t==a?(e-n)/u+(n>e?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=0/0,o=s>0&&1>s?0:r),_e(r,o,s)}function Ue(t,e,n){t=Xe(t),e=Xe(e),n=Xe(n);var r=Ie((.4124564*t+.3575761*e+.1804375*n)/vi),o=Ie((.2126729*t+.7151522*e+.072175*n)/yi),i=Ie((.0193339*t+.119192*e+.9503041*n)/wi);return Ae(116*o-16,500*(r-o),200*(o-i))}function Xe(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Ze(t,e){t=no.rgb(t),e=no.rgb(e);var n=t.r,r=t.g,o=t.b,i=e.r-n,a=e.g-r,u=e.b-o;return function(t){return"#"+Fe(Math.round(n+i*t))+Fe(Math.round(r+a*t))+Fe(Math.round(o+u*t))}}function We(t,e){var n,r={},o={};for(n in t)n in e?r[n]=Ve(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in r)o[n]=r[n](t);return o}}function Ke(t,e){var n,r=[],o=[],i=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;u>n;++n)r.push(Ve(t[n],e[n]));for(;i>n;++n)o[n]=t[n];for(;a>n;++n)o[n]=e[n];return function(t){for(n=0;u>n;++n)o[n]=r[n](t);return o}}function Qe(t,e){return e-=t=+t,function(n){return t+e*n}}function Ge(t,e){var n,r,o,i,a,u=0,s=0,l=[],c=[];for(t+="",e+="",_i.lastIndex=0,r=0;n=_i.exec(e);++r)n.index&&l.push(e.substring(u,s=n.index)),c.push({i:l.length,x:n[0]}),l.push(null),u=_i.lastIndex;for(e.length>u&&l.push(e.substring(u)),r=0,i=c.length;(n=_i.exec(t))&&i>r;++r)if(a=c[r],a.x==n[0]){if(a.i)if(null==l[a.i+1])for(l[a.i-1]+=a.x,l.splice(a.i,1),o=r+1;i>o;++o)c[o].i--;else for(l[a.i-1]+=a.x+l[a.i+1],l.splice(a.i,2),o=r+1;i>o;++o)c[o].i-=2;else if(null==l[a.i+1])l[a.i]=a.x;else for(l[a.i]=a.x+l[a.i+1],l.splice(a.i+1,1),o=r+1;i>o;++o)c[o].i--;c.splice(r,1),i--,r--}else a.x=Qe(parseFloat(n[0]),parseFloat(a.x));for(;i>r;)a=c.pop(),null==l[a.i+1]?l[a.i]=a.x:(l[a.i]=a.x+l[a.i+1],l.splice(a.i+1,1)),i--;return 1===l.length?null==l[0]?(a=c[0].x,function(t){return a(t)+""}):function(){return e}:function(t){for(r=0;i>r;++r)l[(a=c[r]).i]=a.x(t);return l.join("")}}function Ve(t,e){for(var n,r=no.interpolators.length;--r>=0&&!(n=no.interpolators[r](t,e)););return n}function Je(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function tn(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function en(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function nn(t){return t}function rn(t,e){var n=Math.pow(10,3*oo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function on(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function an(t){return t+""}function un(t,e,n,r){var o=n(t[0],t[1]),i=r(e[0],e[1]);return function(t){return i(o(t))}}function sn(t,e){var n,r=0,o=t.length-1,i=t[r],a=t[o];return i>a&&(n=r,r=o,o=n,n=i,i=a,a=n),t[r]=e.floor(i),t[o]=e.ceil(a),t}function ln(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ni}function cn(t,e,n,r){var o=[],i=[],a=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());u>=++a;)o.push(n(t[a-1],t[a])),i.push(r(e[a-1],e[a]));return function(e){var n=no.bisect(t,e,1,u)-1;return i[n](o[n](e))}}function fn(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function hn(t,e,n,r){function o(){var o=Math.min(t.length,e.length)>2?cn:un,s=r?en:tn;return a=o(t,e,s,n),u=o(e,t,s,Ve),i}function i(t){return a(t)}var a,u;return i.invert=function(t){return u(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},i.range=function(t){return arguments.length?(e=t,o()):e},i.rangeRound=function(t){return i.range(t).interpolate(Je)},i.clamp=function(t){return arguments.length?(r=t,o()):r},i.interpolate=function(t){return arguments.length?(n=t,o()):n},i.ticks=function(e){return gn(t,e)},i.tickFormat=function(e,n){return vn(t,e,n)},i.nice=function(e){return dn(t,e),o()},i.copy=function(){return hn(t,e,n,r)},o()}function pn(t,e){return no.rebind(t,e,"range","rangeRound","interpolate","clamp")}function dn(t,e){return sn(t,ln(mn(t,e)[2]))}function mn(t,e){null==e&&(e=10);var n=fn(t),r=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),i=e/r*o;return.15>=i?o*=10:.35>=i?o*=5:.75>=i&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function gn(t,e){return no.range.apply(no,mn(t,e))}function vn(t,e,n){var r=mn(t,e);return no.format(n?n.replace(ki,function(t,e,n,o,i,a,u,s,l,c){return[e,n,o,i,a,u,s,l||"."+wn(c,r),c].join("")}):",."+yn(r[2])+"f")}function yn(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function wn(t,e){var n=yn(e[2]);return t in qi?Math.abs(n-yn(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +("e"!==t):n-2*("%"===t)}function bn(t,e,n){function r(e){return t(e)}function o(t,n){var r=t[1]-t[0],o=r/n,i=no.bisect(ji,o);return i==ji.length?[e.year,mn(t.map(function(t){return t/31536e6}),n)[2]]:i?e[o/ji[i-1]<ji[i]/o?i-1:i]:[Di,mn(t,n)[2]]}return r.invert=function(e){return xn(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(xn)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,xn(+n+1),e).length}var i=r.domain(),a=fn(i),u=null==t?o(a,10):"number"==typeof t&&o(a,t);return u&&(t=u[0],e=u[1]),r.domain(sn(i,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=xn(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=xn(+e+1);return e}}:t))},r.ticks=function(t,e){var n=fn(r.domain()),i=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],xn(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return bn(t.copy(),e,n)},pn(r,t)}function xn(t){return new Date(t)}function Mn(t){return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n];return r[0](e)}}function _n(t){return[Math.atan2(t[1],t[0]),ze(t[2])]}function Tn(t,e){return fi>oo(t[0]-e[0])&&fi>oo(t[1]-e[1])}function En(t,e,n,r,o){var i=[],a=[];if(t.forEach(function(t){if(!(0>=(e=t.length-1))){var e,n=t[0],r=t[e];if(Tn(n,r)){o.lineStart();for(var u=0;e>u;++u)o.point((n=t[u])[0],n[1]);return o.lineEnd(),void 0}var s=new zn(n,t,null,!0),l=new zn(n,null,s,!1);s.o=l,i.push(s),a.push(l),s=new zn(r,t,null,!1),l=new zn(r,null,s,!0),s.o=l,i.push(s),a.push(l)}}),a.sort(e),Cn(i),Cn(a),i.length){for(var u=0,s=n,l=a.length;l>u;++u)a[u].e=s=!s;for(var c,f,h=i[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,l=c.length;l>u;++u)o.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)o.point((f=c[u])[0],f[1])}else r(p.x,p.p.x,-1,o);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);o.lineEnd()}}}function Cn(t){if(e=t.length){for(var e,n,r=0,o=t[0];e>++r;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function zn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Sn(t,e,n,r){return function(o,i){function a(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&i.point(e,n)}function u(t,e){var n=o(t,e);g.point(n[0],n[1])}function s(){y.point=u,g.lineStart()}function l(){y.point=a,g.lineEnd()}function c(t,e){m.push([t,e]);var n=o(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),m=[]}function h(){c(m[0][0],m[0][1]),b.lineEnd();var t,e=b.clean(),n=w.buffer(),r=n.length;if(m.pop(),d.push(m),m=null,r){if(1&e){t=n[0];var o,r=t.length-1,a=-1;for(i.lineStart();r>++a;)i.point((o=t[a])[0],o[1]);return i.lineEnd(),void 0}r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(kn))}}var p,d,m,g=e(i),v=o.invert(r[0],r[1]),y={point:a,lineStart:s,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,p=[],d=[],i.polygonStart()},polygonEnd:function(){y.point=a,y.lineStart=s,y.lineEnd=l,p=no.merge(p);var t=Un(v,d);p.length?En(p,An,t,n,i):t&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),p=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},w=Ln(),b=e(w);return y}}function kn(t){return t.length>1}function Ln(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:s,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function An(t,e){return(0>(t=t.x)[0]?t[1]-ci-fi:ci-t[1])-(0>(e=e.x)[0]?e[1]-ci-fi:ci-e[1])}function Pn(){}function Nn(t,e,n){var r=n.s=t+e,o=r-t,i=r-o;n.t=t-i+(e-o)}function qn(t,e){t&&Xi.hasOwnProperty(t.type)&&Xi[t.type](t,e)}function jn(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();i>++o;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function In(t,e){var n=-1,r=t.length;for(e.polygonStart();r>++n;)jn(t[n],e,1);e.polygonEnd()}function Hn(){function t(t,e){t*=pi,e=e*pi/2+si/4;var n=t-r,a=Math.cos(e),u=Math.sin(e),s=i*u,l=o*a+s*Math.cos(n),c=s*Math.sin(n);Zi.add(Math.atan2(c,l)),r=t,o=a,i=u}var e,n,r,o,i;Wi.point=function(a,u){Wi.point=t,r=(e=a)*pi,o=Math.cos(u=(n=u)*pi/2+si/4),i=Math.sin(u)},Wi.lineEnd=function(){t(e,n)}}function On(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Dn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Fn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Yn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Un(t,e){var n=t[0],r=t[1],o=[Math.sin(n),-Math.cos(n),0],i=0,a=0;Zi.reset();for(var u=0,s=e.length;s>u;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],h=f[0],p=f[1]/2+si/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0),t=l[g];var v=t[0],y=t[1]/2+si/4,w=Math.sin(y),b=Math.cos(y),x=v-h,M=oo(x)>si,_=d*w;if(Zi.add(Math.atan2(_*Math.sin(x),m*b+_*Math.cos(x))),i+=M?x+(x>=0?li:-li):x,M^h>=n^v>=n){var T=Rn(On(f),On(t));Yn(T);var E=Rn(o,T);Yn(E);var C=(M^x>=0?-1:1)*ze(E[2]);(r>C||r===C&&(T[0]||T[1]))&&(a+=M^x>=0?1:-1)}if(!g++)break;h=v,d=w,m=b,f=t}}return(-fi>i||fi>i&&0>Zi)^1&a}function Xn(t){var e,n=0/0,r=0/0,o=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var u=i>0?si:-si,s=oo(i-n);fi>oo(s-si)?(t.point(n,r=(r+a)/2>0?ci:-ci),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),e=0):o!==u&&s>=si&&(fi>oo(n-o)&&(n-=o*fi),fi>oo(i-u)&&(i-=u*fi),r=$n(n,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=i,r=a),o=u},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function $n(t,e,n,r){var o,i,a=Math.sin(t-n);return oo(a)>fi?Math.atan((Math.sin(e)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(o=Math.cos(e))*Math.sin(t))/(o*i*a)):(e+r)/2}function Zn(t,e,n,r){var o;if(null==t)o=n*ci,r.point(-si,o),r.point(0,o),r.point(si,o),r.point(si,0),r.point(si,-o),r.point(0,-o),r.point(-si,-o),r.point(-si,0),r.point(-si,o);else if(oo(t[0]-e[0])>fi){var i=t[0]<e[0]?si:-si;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])}function Wn(t,e){return[t,e]}function Kn(t,e){return[t>si?t-li:-si>t?t+li:t,e]}function Qn(t,e,n){return t?e||n?ir(Vn(t),Jn(e,n)):Vn(t):e||n?Jn(e,n):Kn}function Gn(t){return function(e,n){return e+=t,[e>si?e-li:-si>e?e+li:e,n]}}function Vn(t){var e=Gn(t);return e.invert=Gn(-t),e}function Jn(t,e){function n(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*r+u*o;return[Math.atan2(s*i-c*a,u*r-l*o),ze(c*i+s*a)]}var r=Math.cos(t),o=Math.sin(t),i=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*i-s*a;return[Math.atan2(s*i+l*a,u*r+c*o),ze(c*r-u*o)]},n}function tr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(o,i,a,u){var s=a*e;null!=o?(o=er(n,o),i=er(n,i),(a>0?i>o:o>i)&&(o+=a*li)):(o=t+a*li,i=t-.5*s);for(var l,c=o;a>0?c>i:i>c;c-=s)u.point((l=_n([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function er(t,e){var n=On(e);n[0]-=t,Yn(n);var r=Ce(-n[1]);return((0>-n[2]?-r:r)+2*Math.PI-fi)%(2*Math.PI)}function nr(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t){var n,i,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var p,d=[f,h],m=e(f,h),g=a?m?0:o(f,h):m?o(f+(0>f?si:-si),h):0;if(!n&&(l=s=m)&&t.lineStart(),m!==s&&(p=r(n,d),(Tn(n,p)||Tn(d,p))&&(d[0]+=fi,d[1]+=fi,m=e(d[0],d[1]))),m!==s)c=0,m?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(u&&n&&a^m){var v;g&i||!(v=r(d,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||n&&Tn(n,d)||t.point(d[0],d[1]),n=d,s=m,i=g},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}}function r(t,e,n){var r=On(t),o=On(e),a=[1,0,0],u=Rn(r,o),s=Dn(u,u),l=u[0],c=s-l*l;if(!c)return!n&&t;var f=i*s/c,h=-i*l/c,p=Rn(a,u),d=Bn(a,f),m=Bn(u,h);Fn(d,m);var g=p,v=Dn(d,g),y=Dn(g,g),w=v*v-y*(Dn(d,d)-1);if(!(0>w)){var b=Math.sqrt(w),x=Bn(g,(-v-b)/y);if(Fn(x,d),x=_n(x),!n)return x;var M,_=t[0],T=e[0],E=t[1],C=e[1];_>T&&(M=_,_=T,T=M);var z=T-_,S=fi>oo(z-si),k=S||fi>z;if(!S&&E>C&&(M=E,E=C,C=M),k?S?E+C>0^x[1]<(fi>oo(x[0]-_)?E:C):x[1]>=E&&C>=x[1]:z>si^(x[0]>=_&&T>=x[0])){var L=Bn(g,(-v+b)/y);return Fn(L,d),[x,_n(L)]}}}function o(e,n){var r=a?t:si-t,o=0;return-r>e?o|=1:e>r&&(o|=2),-r>n?o|=4:n>r&&(o|=8),o}var i=Math.cos(t),a=i>0,u=oo(i)>fi,s=tr(t,6*pi);return Sn(e,n,s,a?[0,-t]:[-si,t-si])}function rr(t,e,n,r){return function(o){var i,a=o.a,u=o.b,s=a.x,l=a.y,c=u.x,f=u.y,h=0,p=1,d=c-s,m=f-l;if(i=t-s,d||!(i>0)){if(i/=d,0>d){if(h>i)return;p>i&&(p=i)}else if(d>0){if(i>p)return;i>h&&(h=i)}if(i=n-s,d||!(0>i)){if(i/=d,0>d){if(i>p)return;i>h&&(h=i)}else if(d>0){if(h>i)return;p>i&&(p=i)}if(i=e-l,m||!(i>0)){if(i/=m,0>m){if(h>i)return;p>i&&(p=i)}else if(m>0){if(i>p)return;i>h&&(h=i)}if(i=r-l,m||!(0>i)){if(i/=m,0>m){if(i>p)return;i>h&&(h=i)}else if(m>0){if(h>i)return;p>i&&(p=i)}return h>0&&(o.a={x:s+h*d,y:l+h*m}),1>p&&(o.b={x:s+p*d,y:l+p*m}),o}}}}}}function or(t,e,n,r){function o(r,o){return fi>oo(r[0]-t)?o>0?0:3:fi>oo(r[0]-n)?o>0?2:1:fi>oo(r[1]-e)?o>0?1:0:o>0?3:2}function i(t,e){return a(t.x,e.x)}function a(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function s(t){for(var e=0,n=v.length,r=t[1],o=0;n>o;++o)for(var i,a=1,u=v[o],s=u.length,c=u[0];s>a;++a)i=u[a],r>=c[1]?i[1]>r&&l(c,i,t)>0&&++e:r>=i[1]&&0>l(c,i,t)&&--e,c=i;return 0!==e}function l(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function c(i,u,s,l){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(u,s))||0>a(i,u)^s>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==f)}else l.point(u[0],u[1])}function f(o,i){return o>=t&&n>=o&&i>=e&&r>=i}function h(t,e){f(t,e)&&u.point(t,e)}function p(){L.point=m,v&&v.push(y=[]),E=!0,T=!1,M=_=0/0}function d(){g&&(m(w,b),x&&T&&S.rejoin(),g.push(S.buffer())),L.point=h,T&&u.lineEnd()}function m(t,e){t=Math.max(-Qi,Math.min(Qi,t)),e=Math.max(-Qi,Math.min(Qi,e));var n=f(t,e);if(v&&y.push([t,e]),E)w=t,b=e,x=n,E=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&T)u.point(t,e);else{var r={a:{x:M,y:_},b:{x:t,y:e}};k(r)?(T||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),C=!1):n&&(u.lineStart(),u.point(t,e),C=!1)}M=t,_=e,T=n}var g,v,y,w,b,x,M,_,T,E,C,z=u,S=Ln(),k=rr(t,e,n,r),L={point:h,lineStart:p,lineEnd:d,polygonStart:function(){u=S,g=[],v=[],C=!0},polygonEnd:function(){u=z,g=no.merge(g);var e=s([t,r]),n=C&&e,o=g.length;(n||o)&&(u.polygonStart(),n&&(u.lineStart(),c(null,null,1,u),u.lineEnd()),o&&En(g,i,e,c,u),u.polygonEnd()),g=v=y=null}};return L}}function ir(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function ar(t){function e(t){return(u?r:n)(t)}function n(e){return sr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){w=0/0,T.point=i,e.lineStart()}function i(n,r){var i=On([n,r]),a=t(n,r);o(w,b,y,x,M,_,w=a[0],b=a[1],y=n,x=i[0],M=i[1],_=i[2],u,e),e.point(w,b)}function a(){T.point=n,e.lineEnd()}function s(){r(),T.point=l,T.lineEnd=c}function l(t,e){i(f=t,h=e),p=w,d=b,m=x,g=M,v=_,T.point=i}function c(){o(w,b,y,x,M,_,p,d,f,m,g,v,u,e),T.lineEnd=a,a()}var f,h,p,d,m,g,v,y,w,b,x,M,_,T={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),T.lineStart=s},polygonEnd:function(){e.polygonEnd(),T.lineStart=r}};return T}function o(e,n,r,u,s,l,c,f,h,p,d,m,g,v){var y=c-e,w=f-n,b=y*y+w*w;if(b>4*i&&g--){var x=u+p,M=s+d,_=l+m,T=Math.sqrt(x*x+M*M+_*_),E=Math.asin(_/=T),C=fi>oo(oo(_)-1)||fi>oo(r-h)?(r+h)/2:Math.atan2(M,x),z=t(C,E),S=z[0],k=z[1],L=S-e,A=k-n,P=w*L-y*A;(P*P/b>i||oo((y*L+w*A)/b-.5)>.3||a>u*p+s*d+l*m)&&(o(e,n,r,u,s,l,S,k,C,x/=T,M/=T,_,g,v),v.point(S,k),o(S,k,C,x,M,_,c,f,h,p,d,m,g,v))}}var i=.5,a=Math.cos(30*pi),u=16;return e.precision=function(t){return arguments.length?(u=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function ur(t){this.stream=t}function sr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function lr(t){return cr(function(){return t})()}function cr(t){function e(t){return t=u(t[0]*pi,t[1]*pi),[t[0]*h+s,l-t[1]*h]}function n(t){return t=u.invert((t[0]-s)/h,(l-t[1])/h),t&&[t[0]*di,t[1]*di]}function r(){u=ir(a=Qn(v,y,w),i);var t=i(m,g);return s=p-t[0]*h,l=d+t[1]*h,o()}function o(){return c&&(c.valid=!1,c=null),e}var i,a,u,s,l,c,f=ar(function(t,e){return t=i(t,e),[t[0]*h+s,l-t[1]*h]}),h=150,p=480,d=250,m=0,g=0,v=0,y=0,w=0,b=Ki,x=nn,M=null,_=null;return e.stream=function(t){return c&&(c.valid=!1),c=fr(b(a,f(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,Ki):nr((M=+t)*pi),o()):M},e.clipExtent=function(t){return arguments.length?(_=t,x=t?or(t[0][0],t[0][1],t[1][0],t[1][1]):nn,o()):_},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},e.center=function(t){return arguments.length?(m=t[0]%360*pi,g=t[1]%360*pi,r()):[m*di,g*di]},e.rotate=function(t){return arguments.length?(v=t[0]%360*pi,y=t[1]%360*pi,w=t.length>2?t[2]%360*pi:0,r()):[v*di,y*di,w*di]},no.rebind(e,f,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,r()}}function fr(t){return sr(t,function(e,n){t.point(e*pi,n*pi)})}function hr(t){var e=0,n=si/3,r=cr(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*si/180,n=t[1]*si/180):[180*(e/si),180*(n/si)]},o}function pr(t,e){function n(t,e){var n=Math.sqrt(i-2*o*Math.sin(e))/o;return[n*Math.sin(t*=o),a-n*Math.cos(t)]}var r=Math.sin(t),o=(r+Math.sin(e))/2,i=1+r*(2*o-r),a=Math.sqrt(i)/o;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/o,ze((i-(t*t+n*n)*o*o)/(2*o))]},n}function dr(t,e){t*=pi;var n=Math.cos(e*=pi);mr(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function mr(t,e,n){++Gi,Ji+=(t-Ji)/Gi,ta+=(e-ta)/Gi,ea+=(n-ea)/Gi}function gr(){function t(t,o){t*=pi;var i=Math.cos(o*=pi),a=i*Math.cos(t),u=i*Math.sin(t),s=Math.sin(o),l=Math.atan2(Math.sqrt((l=n*s-r*u)*l+(l=r*a-e*s)*l+(l=e*u-n*a)*l),e*a+n*u+r*s);Vi+=l,na+=l*(e+(e=a)),ra+=l*(n+(n=u)),oa+=l*(r+(r=s)),mr(e,n,r)}var e,n,r;da.point=function(o,i){o*=pi;var a=Math.cos(i*=pi);e=a*Math.cos(o),n=a*Math.sin(o),r=Math.sin(i),da.point=t,mr(e,n,r)}}function vr(){da.point=dr}function yr(){function t(t,e){t*=pi;var n=Math.cos(e*=pi),a=n*Math.cos(t),u=n*Math.sin(t),s=Math.sin(e),l=o*s-i*u,c=i*a-r*s,f=r*u-o*a,h=Math.sqrt(l*l+c*c+f*f),p=r*a+o*u+i*s,d=h&&-Ce(p)/h,m=Math.atan2(h,p);ia+=d*l,aa+=d*c,ua+=d*f,Vi+=m,na+=m*(r+(r=a)),ra+=m*(o+(o=u)),oa+=m*(i+(i=s)),mr(r,o,i)}var e,n,r,o,i;da.point=function(a,u){e=a,n=u,da.point=t,a*=pi;var s=Math.cos(u*=pi);r=s*Math.cos(a),o=s*Math.sin(a),i=Math.sin(u),mr(r,o,i)},da.lineEnd=function(){t(e,n),da.lineEnd=vr,da.point=dr
}}function wr(){function t(t,e){la+=o*t-r*e,r=t,o=e}var e,n,r,o;ma.point=function(i,a){ma.point=t,e=r=i,n=o=a},ma.lineEnd=function(){t(e,n)}}function br(t,e){ca>t&&(ca=t),t>ha&&(ha=t),fa>e&&(fa=e),e>pa&&(pa=e)}function xr(){function t(t,e){a.push("M",t,",",e,i)}function e(t,e){a.push("M",t,",",e),u.point=n}function n(t,e){a.push("L",t,",",e)}function r(){u.point=t}function o(){a.push("Z")}var i=Mr(4.5),a=[],u={point:t,lineStart:function(){u.point=e},lineEnd:r,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return i=Mr(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Mr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function _r(t,e){Ji+=t,ta+=e,++ea}function Tr(){function t(t,r){var o=t-e,i=r-n,a=Math.sqrt(o*o+i*i);na+=a*(e+t)/2,ra+=a*(n+r)/2,oa+=a,_r(e=t,n=r)}var e,n;va.point=function(r,o){va.point=t,_r(e=r,n=o)}}function Er(){va.point=_r}function Cr(){function t(t,e){var n=t-r,i=e-o,a=Math.sqrt(n*n+i*i);na+=a*(r+t)/2,ra+=a*(o+e)/2,oa+=a,a=o*t-r*e,ia+=a*(r+t),aa+=a*(o+e),ua+=3*a,_r(r=t,o=e)}var e,n,r,o;va.point=function(i,a){va.point=t,_r(e=r=i,n=o=a)},va.lineEnd=function(){t(e,n)}}function zr(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,a,0,li)}function n(e,n){t.moveTo(e,n),u.point=r}function r(e,n){t.lineTo(e,n)}function o(){u.point=e}function i(){t.closePath()}var a=4.5,u={point:e,lineStart:function(){u.point=n},lineEnd:o,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=o,u.point=e},pointRadius:function(t){return a=t,u},result:s};return u}function Sr(t){var e=ar(function(e,n){return t([e*di,n*di])});return function(t){return fr(e(t))}}function kr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Lr(t){return function(e){return 1-t(1-e)}}function Ar(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Pr(t){return t*t}function Nr(t){return t*t*t}function qr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function jr(t){return function(e){return Math.pow(e,t)}}function Ir(t){return 1-Math.cos(t*ci)}function Hr(t){return Math.pow(2,10*(t-1))}function Or(t){return 1-Math.sqrt(1-t*t)}function Dr(t,e){var n;return 2>arguments.length&&(e=.45),arguments.length?n=e/li*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*li/e)}}function Rr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Fr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Br(t,e){return go(t,_a),t.id=e,t}function Yr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Xr(e),o=Ur(e,n),i=Xr($r(n,e,-o))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*di,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(o,i)*di:0}function Ur(t,e){return t[0]*e[0]+t[1]*e[1]}function Xr(t){var e=Math.sqrt(Ur(t,t));return e&&(t[0]/=e,t[1]/=e),e}function $r(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Zr(t,e){var n,r=[],o=[],i=no.transform(t),a=no.transform(e),u=i.translate,s=a.translate,l=i.rotate,c=a.rotate,f=i.skew,h=a.skew,p=i.scale,d=a.scale;return u[0]!=s[0]||u[1]!=s[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:Qe(u[0],s[0])},{i:3,x:Qe(u[1],s[1])})):s[0]||s[1]?r.push("translate("+s+")"):r.push(""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Qe(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=h?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Qe(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:n-4,x:Qe(p[0],d[0])},{i:n-2,x:Qe(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=o.length,function(t){for(var e,i=-1;n>++i;)r[(e=o[i]).i]=e.x(t);return r.join("")}}function Wr(t,e,n,r){var o=t.id;return S(t,"function"==typeof n?function(t,i,a){t.__transition__[o].tween.set(e,r(n.call(t,t.__data__,i,a)))}:(n=r(n),function(t){t.__transition__[o].tween.set(e,n)}))}function Kr(t){return null==t&&(t=""),function(){this.textContent=t}}function Qr(t,e,n,r){var i=t.__transition__||(t.__transition__={active:0,count:0}),a=i[n];if(!a){var u=r.time;a=i[n]={tween:new o,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,no.timer(function(r){function o(r){return i.active>n?l():(i.active=n,a.event&&a.event.start.call(t,c,e),a.tween.forEach(function(n,r){(r=r.call(t,c,e))&&m.push(r)}),no.timer(function(){return d.c=s(r||1)?xe:s,1},0,u),void 0)}function s(r){if(i.active!==n)return l();for(var o=r/p,u=f(o),s=m.length;s>0;)m[--s].call(t,u);return o>=1?(a.event&&a.event.end.call(t,c,e),l()):void 0}function l(){return--i.count?delete i[n]:delete t.__transition__,1}var c=t.__data__,f=a.ease,h=a.delay,p=a.duration,d=No,m=[];return d.t=h+u,r>=h?o(r-h):(d.c=o,void 0)},0,u)}}function Gr(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Vr(e,n,t,r)}}function Vr(t,e,n,r){function o(){var t,e=s.status;if(!e&&s.responseText||e>=200&&300>e||304===e){try{t=n.call(i,s)}catch(r){return a.error.call(i,r),void 0}a.load.call(i,t)}else a.error.call(i,s)}var i={},a=no.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!fo.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=o:s.onreadystatechange=function(){s.readyState>3&&o()},s.onprogress=function(t){var e=no.event;no.event=t;try{a.progress.call(i,s)}finally{no.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),2>arguments.length?u[t]:(null==e?delete u[t]:u[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(l=t,i):l},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(so(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),s.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=l&&(s.responseType=l),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.beforesend.call(i,s),s.send(null==r?null:r),i},i.abort=function(){return s.abort(),i},no.rebind(i,a,"on"),null==r?i:i.get(Jr(r))}function Jr(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function to(t){return JSON.parse(t.responseText)}function eo(t){var e=lo.createRange();return e.selectNode(lo.body),e.createContextualFragment(t.responseText)}var no={version:"3.3.10"};no.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},no.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},no.min=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;i>++o&&!(null!=(n=t[o])&&n>=n);)n=void 0;for(;i>++o;)null!=(r=t[o])&&n>r&&(n=r)}else{for(;i>++o&&!(null!=(n=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;i>++o;)null!=(r=e.call(t,t[o],o))&&n>r&&(n=r)}return n},no.max=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;i>++o&&!(null!=(n=t[o])&&n>=n);)n=void 0;for(;i>++o;)null!=(r=t[o])&&r>n&&(n=r)}else{for(;i>++o&&!(null!=(n=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;i>++o;)null!=(r=e.call(t,t[o],o))&&r>n&&(n=r)}return n},no.extent=function(t,e){var n,r,o,i=-1,a=t.length;if(1===arguments.length){for(;a>++i&&!(null!=(n=o=t[i])&&n>=n);)n=o=void 0;for(;a>++i;)null!=(r=t[i])&&(n>r&&(n=r),r>o&&(o=r))}else{for(;a>++i&&!(null!=(n=o=e.call(t,t[i],i))&&n>=n);)n=void 0;for(;a>++i;)null!=(r=e.call(t,t[i],i))&&(n>r&&(n=r),r>o&&(o=r))}return[n,o]},no.sum=function(t,e){var n,r=0,o=t.length,i=-1;if(1===arguments.length)for(;o>++i;)isNaN(n=+t[i])||(r+=n);else for(;o>++i;)isNaN(n=+e.call(t,t[i],i))||(r+=n);return r},no.mean=function(e,n){var r,o=e.length,i=0,a=-1,u=0;if(1===arguments.length)for(;o>++a;)t(r=e[a])&&(i+=(r-i)/++u);else for(;o>++a;)t(r=n.call(e,e[a],a))&&(i+=(r-i)/++u);return u?i:void 0},no.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),o=+t[r-1],i=n-r;return i?o+i*(t[r]-o):o},no.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?no.quantile(e.sort(no.ascending),.5):void 0},no.bisector=function(t){return{left:function(e,n,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=e.length);o>r;){var i=r+o>>>1;n>t.call(e,e[i],i)?r=i+1:o=i}return r},right:function(e,n,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=e.length);o>r;){var i=r+o>>>1;t.call(e,e[i],i)>n?o=i:r=i+1}return r}}};var ro=no.bisector(function(t){return t});no.bisectLeft=ro.left,no.bisect=no.bisectRight=ro.right,no.shuffle=function(t){for(var e,n,r=t.length;r;)n=0|Math.random()*r--,e=t[r],t[r]=t[n],t[n]=e;return t},no.permute=function(t,e){for(var n=e.length,r=Array(n);n--;)r[n]=t[e[n]];return r},no.pairs=function(t){for(var e,n=0,r=t.length-1,o=t[0],i=Array(0>r?0:r);r>n;)i[n]=[e=o,o=t[++n]];return i},no.zip=function(){if(!(o=arguments.length))return[];for(var t=-1,n=no.min(arguments,e),r=Array(n);n>++t;)for(var o,i=-1,a=r[t]=Array(o);o>++i;)a[i]=arguments[i][t];return r},no.transpose=function(t){return no.zip.apply(no,t)},no.keys=function(t){var e=[];for(var n in t)e.push(n);return e},no.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},no.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},no.merge=function(t){for(var e,n,r,o=t.length,i=-1,a=0;o>++i;)a+=t[i].length;for(n=Array(a);--o>=0;)for(r=t[o],e=r.length;--e>=0;)n[--a]=r[e];return n};var oo=Math.abs;no.range=function(t,e,r){if(3>arguments.length&&(r=1,2>arguments.length&&(e=t,t=0)),1/0===(e-t)/r)throw Error("infinite range");var o,i=[],a=n(oo(r)),u=-1;if(t*=a,e*=a,r*=a,0>r)for(;(o=t+r*++u)>e;)i.push(o/a);else for(;e>(o=t+r*++u);)i.push(o/a);return i},no.map=function(t){var e=new o;if(t instanceof o)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},r(o,{has:function(t){return io+t in this},get:function(t){return this[io+t]},set:function(t,e){return this[io+t]=e},remove:function(t){return t=io+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===ao&&t.call(this,e.substring(1),this[e])}});var io="\0",ao=io.charCodeAt(0);no.nest=function(){function t(e,u,s){if(s>=a.length)return r?r.call(i,u):n?u.sort(n):u;for(var l,c,f,h,p=-1,d=u.length,m=a[s++],g=new o;d>++p;)(h=g.get(l=m(c=u[p])))?h.push(c):g.set(l,[c]);return e?(c=e(),f=function(n,r){c.set(n,t(e,r,s))}):(c={},f=function(n,r){c[n]=t(e,r,s)}),g.forEach(f),c}function e(t,n){if(n>=a.length)return t;var r=[],o=u[n++];return t.forEach(function(t,o){r.push({key:t,values:e(o,n)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}var n,r,i={},a=[],u=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(no.map,n,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return u[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},no.set=function(t){var e=new i;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},r(i,{has:function(t){return io+t in this},add:function(t){return this[io+t]=!0,t},remove:function(t){return t=io+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===ao&&t.call(this,e.substring(1))}}),no.behavior={};var uo=[].slice,so=function(t){return uo.call(t)},lo=document,co=lo.documentElement,fo=window;try{so(co.childNodes)[0].nodeType}catch(ho){so=function(t){for(var e=t.length,n=Array(e);e--;)n[e]=t[e];return n}}no.rebind=function(t,e){for(var n,r=1,o=arguments.length;o>++r;)t[n=arguments[r]]=a(t,e,e[n]);return t};var po=["webkit","ms","moz","Moz","o","O"];no.dispatch=function(){for(var t=new l,e=-1,n=arguments.length;n>++e;)t[arguments[e]]=c(t);return t},l.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.substring(n+1),t=t.substring(0,n)),t)return 2>arguments.length?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},no.event=null,no.requote=function(t){return t.replace(mo,"\\$&")};var mo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,go={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},vo=function(t,e){return e.querySelector(t)},yo=function(t,e){return e.querySelectorAll(t)},wo=co[u(co,"matchesSelector")],bo=function(t,e){return wo.call(t,e)};"function"==typeof Sizzle&&(vo=function(t,e){return Sizzle(t,e)[0]||null},yo=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},bo=Sizzle.matchesSelector),no.selection=function(){return To};var xo=no.selection.prototype=[];xo.select=function(t){var e,n,r,o,i=[];t=m(t);for(var a=-1,u=this.length;u>++a;){i.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=-1,l=r.length;l>++s;)(o=r[s])?(e.push(n=t.call(o,o.__data__,s,a)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return d(i)},xo.selectAll=function(t){var e,n,r=[];t=g(t);for(var o=-1,i=this.length;i>++o;)for(var a=this[o],u=-1,s=a.length;s>++u;)(n=a[u])&&(r.push(e=so(t.call(n,n.__data__,u,o))),e.parentNode=n);return d(r)};var Mo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};no.ns={prefix:Mo,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Mo.hasOwnProperty(n)?{space:Mo[n],local:t}:t}},xo.attr=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node();return t=no.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(v(e,t[e]));return this}return this.each(v(t,e))},xo.classed=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node(),r=(t=t.trim().split(/^|\s+/g)).length,o=-1;if(e=n.classList){for(;r>++o;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");r>++o;)if(!w(t[o]).test(e))return!1;return!0}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},xo.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(M(n,t[n],e));return this}if(2>r)return fo.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(M(t,e,n))},xo.property=function(t,e){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(e in t)this.each(_(e,t[e]));return this}return this.each(_(t,e))},xo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},xo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},xo.append=function(t){return t=T(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},xo.insert=function(t,e){return t=T(t),e=m(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},xo.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},xo.data=function(t,e){function n(t,n){var r,i,a,u=t.length,f=n.length,h=Math.min(u,f),p=Array(f),d=Array(f),m=Array(u);if(e){var g,v=new o,y=new o,w=[];for(r=-1;u>++r;)g=e.call(i=t[r],i.__data__,r),v.has(g)?m[r]=i:v.set(g,i),w.push(g);for(r=-1;f>++r;)g=e.call(n,a=n[r],r),(i=v.get(g))?(p[r]=i,i.__data__=a):y.has(g)||(d[r]=E(a)),y.set(g,a),v.remove(g);for(r=-1;u>++r;)v.has(w[r])&&(m[r]=t[r])}else{for(r=-1;h>++r;)i=t[r],a=n[r],i?(i.__data__=a,p[r]=i):d[r]=E(a);for(;f>r;++r)d[r]=E(n[r]);for(;u>r;++r)m[r]=t[r]}d.update=p,d.parentNode=p.parentNode=m.parentNode=t.parentNode,s.push(d),l.push(p),c.push(m)}var r,i,a=-1,u=this.length;if(!arguments.length){for(t=Array(u=(r=this[0]).length);u>++a;)(i=r[a])&&(t[a]=i.__data__);return t}var s=k([]),l=d([]),c=d([]);if("function"==typeof t)for(;u>++a;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;u>++a;)n(r=this[a],t);return l.enter=function(){return s},l.exit=function(){return c},l},xo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},xo.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=C(t));for(var i=0,a=this.length;a>i;i++){o.push(e=[]),e.parentNode=(n=this[i]).parentNode;for(var u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,i)&&e.push(r)}return d(o)},xo.order=function(){for(var t=-1,e=this.length;e>++t;)for(var n,r=this[t],o=r.length-1,i=r[o];--o>=0;)(n=r[o])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},xo.sort=function(t){t=z.apply(this,arguments);for(var e=-1,n=this.length;n>++e;)this[e].sort(t);return this.order()},xo.each=function(t){return S(this,function(e,n,r){t.call(e,e.__data__,n,r)})},xo.call=function(t){var e=so(arguments);return t.apply(e[0]=this,e),this},xo.empty=function(){return!this.node()},xo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,o=n.length;o>r;r++){var i=n[r];if(i)return i}return null},xo.size=function(){var t=0;return this.each(function(){++t}),t};var _o=[];no.selection.enter=k,no.selection.enter.prototype=_o,_o.append=xo.append,_o.empty=xo.empty,_o.node=xo.node,_o.call=xo.call,_o.size=xo.size,_o.select=function(t){for(var e,n,r,o,i,a=[],u=-1,s=this.length;s>++u;){r=(o=this[u]).update,a.push(e=[]),e.parentNode=o.parentNode;for(var l=-1,c=o.length;c>++l;)(i=o[l])?(e.push(r[l]=n=t.call(o.parentNode,i.__data__,l,u)),n.__data__=i.__data__):e.push(null)}return d(a)},_o.insert=function(t,e){return 2>arguments.length&&(e=L(this)),xo.insert.call(this,t,e)},xo.transition=function(){for(var t,e,n=xa||++Ta,r=[],o=Ma||{time:Date.now(),ease:qr,delay:0,duration:250},i=-1,a=this.length;a>++i;){r.push(t=[]);for(var u=this[i],s=-1,l=u.length;l>++s;)(e=u[s])&&Qr(e,s,n,o),t.push(e)}return Br(r,n)},xo.interrupt=function(){return this.each(A)},no.select=function(t){var e=["string"==typeof t?vo(t,lo):t];return e.parentNode=co,d([e])},no.selectAll=function(t){var e=so("string"==typeof t?yo(t,lo):t);return e.parentNode=co,d([e])};var To=no.select(co);xo.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(P(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(P(t,e,n))};var Eo=no.map({mouseenter:"mouseover",mouseleave:"mouseout"});Eo.forEach(function(t){"on"+t in lo&&Eo.remove(t)});var Co="onselectstart"in lo?null:u(co.style,"userSelect"),zo=0;no.mouse=function(t){return I(t,h())};var So=/WebKit/.test(fo.navigator.userAgent)?-1:0;no.touches=function(t,e){return 2>arguments.length&&(e=h().touches),e?so(e).map(function(e){var n=I(t,e);return n.identifier=e.identifier,n}):[]},no.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",u)}function e(){return no.event.changedTouches[0].identifier}function n(t,e){return no.touches(t).filter(function(t){return t.identifier===e})[0]}function r(t,e,n,r){return function(){function a(){var t=e(c,p),n=t[0]-m[0],r=t[1]-m[1];g|=n|r,m=t,f({type:"drag",x:t[0]+s[0],y:t[1]+s[1],dx:n,dy:r})}function u(){v.on(n+"."+d,null).on(r+"."+d,null),y(g&&no.event.target===h),f({type:"dragend"})}var s,l=this,c=l.parentNode,f=o.of(l,arguments),h=no.event.target,p=t(),d=null==p?"drag":"drag-"+p,m=e(c,p),g=0,v=no.select(fo).on(n+"."+d,a).on(r+"."+d,u),y=j();i?(s=i.apply(l,arguments),s=[s.x-m[0],s.y-m[1]]):s=[0,0],f({type:"dragstart"})}}var o=p(t,"drag","dragstart","dragend"),i=null,a=r(s,no.mouse,"mousemove","mouseup"),u=r(e,n,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},no.rebind(t,o,"on")},no.functor=H;var ko,Lo,Ao,Po,No,qo=fo[u(fo,"requestAnimationFrame")]||function(t){setTimeout(t,17)};no.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var o=n+e,i={c:t,t:o,f:!1,n:null};Lo?Lo.n=i:ko=i,Lo=i,Ao||(Po=clearTimeout(Po),Ao=1,qo(O))},no.timer.flush=function(){D(),R()};var jo=no.time={},Io=Date,Ho=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];F.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Oo.setUTCDate.apply(this._,arguments)},setDay:function(){Oo.setUTCDay.apply(this._,arguments)},setFullYear:function(){Oo.setUTCFullYear.apply(this._,arguments)},setHours:function(){Oo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Oo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Oo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Oo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Oo.setUTCSeconds.apply(this._,arguments)},setTime:function(){Oo.setTime.apply(this._,arguments)}};var Oo=Date.prototype,Do="%a %b %e %X %Y",Ro="%m/%d/%Y",Fo="%H:%M:%S",Bo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Yo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Uo=["January","February","March","April","May","June","July","August","September","October","November","December"],Xo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];jo.year=B(function(t){return t=jo.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),jo.years=jo.year.range,jo.years.utc=jo.year.utc.range,jo.day=B(function(t){var e=new Io(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),jo.days=jo.day.range,jo.days.utc=jo.day.utc.range,jo.dayOfYear=function(t){var e=jo.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Ho.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=jo[t]=B(function(t){return(t=jo.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=jo.year(t).getDay();return Math.floor((jo.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});jo[t+"s"]=n.range,jo[t+"s"].utc=n.utc.range,jo[t+"OfYear"]=function(t){var n=jo.year(t).getDay();return Math.floor((jo.dayOfYear(t)+(n+e)%7)/7)}}),jo.week=jo.sunday,jo.weeks=jo.sunday.range,jo.weeks.utc=jo.sunday.utc.range,jo.weekOfYear=jo.sundayOfYear,jo.format=U;var $o=$(Bo),Zo=Z(Bo),Wo=$(Yo),Ko=Z(Yo),Qo=$(Uo),Go=Z(Uo),Vo=$(Xo),Jo=Z(Xo),ti=/^%/,ei={"-":"",_:" ",0:"0"},ni={a:function(t){return Yo[t.getDay()]},A:function(t){return Bo[t.getDay()]},b:function(t){return Xo[t.getMonth()]},B:function(t){return Uo[t.getMonth()]},c:U(Do),d:function(t,e){return W(t.getDate(),e,2)},e:function(t,e){return W(t.getDate(),e,2)},H:function(t,e){return W(t.getHours(),e,2)},I:function(t,e){return W(t.getHours()%12||12,e,2)},j:function(t,e){return W(1+jo.dayOfYear(t),e,3)},L:function(t,e){return W(t.getMilliseconds(),e,3)},m:function(t,e){return W(t.getMonth()+1,e,2)},M:function(t,e){return W(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return W(t.getSeconds(),e,2)},U:function(t,e){return W(jo.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return W(jo.mondayOfYear(t),e,2)},x:U(Ro),X:U(Fo),y:function(t,e){return W(t.getFullYear()%100,e,2)},Y:function(t,e){return W(t.getFullYear()%1e4,e,4)},Z:ve,"%":function(){return"%"}},ri={a:K,A:Q,b:te,B:ee,c:ne,d:ce,e:ce,H:he,I:he,j:fe,L:me,m:le,M:pe,p:ge,S:de,U:V,w:G,W:J,x:re,X:oe,y:ae,Y:ie,Z:ue,"%":ye},oi=/^\s*\d+/,ii=no.map({am:0,pm:1});U.utc=we;var ai=we("%Y-%m-%dT%H:%M:%S.%LZ");U.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?be:ai,be.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},be.toString=ai.toString,jo.second=B(function(t){return new Io(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),jo.seconds=jo.second.range,jo.seconds.utc=jo.second.utc.range,jo.minute=B(function(t){return new Io(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),jo.minutes=jo.minute.range,jo.minutes.utc=jo.minute.utc.range,jo.hour=B(function(t){var e=t.getTimezoneOffset()/60;return new Io(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),jo.hours=jo.hour.range,jo.hours.utc=jo.hour.utc.range,jo.month=B(function(t){return t=jo.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),jo.months=jo.month.range,jo.months.utc=jo.month.utc.range,Me.prototype.toString=function(){return this.rgb()+""},no.hsl=function(t,e,n){return 1===arguments.length?t instanceof Te?_e(t.h,t.s,t.l):Be(""+t,Ye,_e):_e(+t,+e,+n)};var ui=Te.prototype=new Me;ui.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),_e(this.h,this.s,this.l/t)},ui.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),_e(this.h,this.s,t*this.l)},ui.rgb=function(){return Ee(this.h,this.s,this.l)};var si=Math.PI,li=2*si,ci=si/2,fi=1e-6,hi=fi*fi,pi=si/180,di=180/si;no.hcl=function(t,e,n){return 1===arguments.length?t instanceof ke?Se(t.h,t.c,t.l):t instanceof Pe?qe(t.l,t.a,t.b):qe((t=Ue((t=no.rgb(t)).r,t.g,t.b)).l,t.a,t.b):Se(+t,+e,+n)};var mi=ke.prototype=new Me;mi.brighter=function(t){return Se(this.h,this.c,Math.min(100,this.l+gi*(arguments.length?t:1)))},mi.darker=function(t){return Se(this.h,this.c,Math.max(0,this.l-gi*(arguments.length?t:1)))},mi.rgb=function(){return Le(this.h,this.c,this.l).rgb()},no.lab=function(t,e,n){return 1===arguments.length?t instanceof Pe?Ae(t.l,t.a,t.b):t instanceof ke?Le(t.l,t.c,t.h):Ue((t=no.rgb(t)).r,t.g,t.b):Ae(+t,+e,+n)};var gi=18,vi=.95047,yi=1,wi=1.08883,bi=Pe.prototype=new Me;bi.brighter=function(t){return Ae(Math.min(100,this.l+gi*(arguments.length?t:1)),this.a,this.b)},bi.darker=function(t){return Ae(Math.max(0,this.l-gi*(arguments.length?t:1)),this.a,this.b)},bi.rgb=function(){return Ne(this.l,this.a,this.b)},no.rgb=function(t,e,n){return 1===arguments.length?t instanceof Re?De(t.r,t.g,t.b):Be(""+t,De,Ee):De(~~t,~~e,~~n)};var xi=Re.prototype=new Me;xi.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,o=30;return e||n||r?(e&&o>e&&(e=o),n&&o>n&&(n=o),r&&o>r&&(r=o),De(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(r/t)))):De(o,o,o)},xi.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),De(~~(t*this.r),~~(t*this.g),~~(t*this.b))},xi.hsl=function(){return Ye(this.r,this.g,this.b)},xi.toString=function(){return"#"+Fe(this.r)+Fe(this.g)+Fe(this.b)};var Mi=no.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Mi.forEach(function(t,e){Mi.set(t,Oe(e))}),no.interpolateRgb=Ze,no.interpolateObject=We,no.interpolateArray=Ke,no.interpolateNumber=Qe,no.interpolateString=Ge;var _i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;no.interpolate=Ve,no.interpolators=[function(t,e){var n=typeof e;return("string"===n?Mi.has(e)||/^(#|rgb\(|hsl\()/.test(e)?Ze:Ge:e instanceof Me?Ze:"object"===n?Array.isArray(e)?Ke:We:Qe)(t,e)}],no.interpolateRound=Je;var Ti=".",Ei=",",Ci=[3,3],zi="$",Si=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(rn);no.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=no.round(t,on(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Si[8+n/3]},no.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},no.format=function(t){var e=ki.exec(t),n=e[1]||" ",r=e[2]||">",o=e[3]||"",i=e[4]||"",a=e[5],u=+e[6],s=e[7],l=e[8],c=e[9],f=1,h="",p=!1;switch(l&&(l=+l.substring(1)),(a||"0"===n&&"="===r)&&(a=n="0",r="=",s&&(u-=Math.floor((u-1)/4))),c){case"n":s=!0,c="g";break;case"%":f=100,h="%",c="f";break;case"p":f=100,h="%",c="r";break;case"b":case"o":case"x":case"X":"#"===i&&(i="0"+c.toLowerCase());case"c":case"d":p=!0,l=0;break;case"s":f=-1,c="r"}"#"===i?i="":"$"===i&&(i=zi),"r"!=c||l||(c="g"),null!=l&&("g"==c?l=Math.max(1,Math.min(21,l)):("e"==c||"f"==c)&&(l=Math.max(0,Math.min(20,l)))),c=Li.get(c)||an;var d=a&&s;return function(t){if(p&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):o;if(0>f){var m=no.formatPrefix(t,l);t=m.scale(t),h=m.symbol}else t*=f;t=c(t,l);var g=t.lastIndexOf("."),v=0>g?t:t.substring(0,g),y=0>g?"":Ti+t.substring(g+1);!a&&s&&(v=Ai(v));var w=i.length+v.length+y.length+(d?0:e.length),b=u>w?Array(w=u-w+1).join(n):"";return d&&(v=Ai(b+v)),e+=i,t=v+y,("<"===r?e+t+b:">"===r?b+e+t:"^"===r?b.substring(0,w>>=1)+e+t+b.substring(w):e+(d?t:b+t))+h
}};var ki=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Li=no.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=no.round(t,on(t,e))).toFixed(Math.max(0,Math.min(20,on(t*(1+1e-15),e))))}}),Ai=nn;if(Ci){var Pi=Ci.length;Ai=function(t){for(var e=t.length,n=[],r=0,o=Ci[0];e>0&&o>0;)n.push(t.substring(e-=o,e+o)),o=Ci[r=(r+1)%Pi];return n.reverse().join(Ei)}}var Ni={floor:nn,ceil:nn};no.scale={},no.scale.linear=function(){return hn([0,1],[0,1],Ve,!1)};var qi={s:1,g:1,p:1,r:1,e:1},ji=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ii=[[jo.second,1],[jo.second,5],[jo.second,15],[jo.second,30],[jo.minute,1],[jo.minute,5],[jo.minute,15],[jo.minute,30],[jo.hour,1],[jo.hour,3],[jo.hour,6],[jo.hour,12],[jo.day,1],[jo.day,2],[jo.week,1],[jo.month,1],[jo.month,3],[jo.year,1]],Hi=[[U("%Y"),xe],[U("%B"),function(t){return t.getMonth()}],[U("%b %d"),function(t){return 1!=t.getDate()}],[U("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[U("%I %p"),function(t){return t.getHours()}],[U("%I:%M"),function(t){return t.getMinutes()}],[U(":%S"),function(t){return t.getSeconds()}],[U(".%L"),function(t){return t.getMilliseconds()}]],Oi=Mn(Hi);Ii.year=jo.year,jo.scale=function(){return bn(no.scale.linear(),Ii,Oi)};var Di={range:function(t,e,n){return no.range(+t,+e,n).map(xn)}},Ri=Ii.map(function(t){return[t[0].utc,t[1]]}),Fi=[[we("%Y"),xe],[we("%B"),function(t){return t.getUTCMonth()}],[we("%b %d"),function(t){return 1!=t.getUTCDate()}],[we("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[we("%I %p"),function(t){return t.getUTCHours()}],[we("%I:%M"),function(t){return t.getUTCMinutes()}],[we(":%S"),function(t){return t.getUTCSeconds()}],[we(".%L"),function(t){return t.getUTCMilliseconds()}]],Bi=Mn(Fi);Ri.year=jo.year.utc,jo.scale.utc=function(){return bn(no.scale.linear(),Ri,Bi)},no.geo={},Pn.prototype={s:0,t:0,add:function(t){Nn(t,this.t,Yi),Nn(Yi.s,this.s,this),this.s?this.t+=Yi.t:this.s=Yi.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Yi=new Pn;no.geo.stream=function(t,e){t&&Ui.hasOwnProperty(t.type)?Ui[t.type](t,e):qn(t,e)};var Ui={Feature:function(t,e){qn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;o>++r;)qn(n[r].geometry,e)}},Xi={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;o>++r;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){jn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;o>++r;)jn(n[r],e,0)},Polygon:function(t,e){In(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;o>++r;)In(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;o>++r;)qn(n[r],e)}};no.geo.area=function(t){return $i=0,no.geo.stream(t,Wi),$i};var $i,Zi=new Pn,Wi={sphere:function(){$i+=4*si},point:s,lineStart:s,lineEnd:s,polygonStart:function(){Zi.reset(),Wi.lineStart=Hn},polygonEnd:function(){var t=2*Zi;$i+=0>t?4*si+t:t,Wi.lineStart=Wi.lineEnd=Wi.point=s}},Ki=Sn(xe,Xn,Zn,[-si,-si/2]);(no.geo.equirectangular=function(){return lr(Wn)}).raw=Wn.invert=Wn,no.geo.rotation=function(t){function e(e){return e=t(e[0]*pi,e[1]*pi),e[0]*=di,e[1]*=di,e}return t=Qn(t[0]%360*pi,t[1]*pi,t.length>2?t[2]*pi:0),e.invert=function(e){return e=t.invert(e[0]*pi,e[1]*pi),e[0]*=di,e[1]*=di,e},e},Kn.invert=Wn,no.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=Qn(-t[0]*pi,-t[1]*pi,0).invert,o=[];return n(null,null,1,{point:function(t,n){o.push(t=e(t,n)),t[0]*=di,t[1]*=di}}),{type:"Polygon",coordinates:[o]}}var e,n,r=[0,0],o=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=tr((e=+r)*pi,o*pi),t):e},t.precision=function(r){return arguments.length?(n=tr(e*pi,(o=+r)*pi),t):o},t.angle(90)};var Qi=1e9;no.geo.clipExtent=function(){var t,e,n,r,o,i,a={stream:function(t){return o&&(o.valid=!1),o=i(t),o.valid=!0,o},extent:function(u){return arguments.length?(i=or(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),o&&(o.valid=!1,o=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},no.geo.transform=function(t){return{stream:function(e){var n=new ur(e);for(var r in t)n[r]=t[r];return n}}},ur.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},no.geo.projection=lr,no.geo.projectionMutator=cr,(no.geo.conicEqualArea=function(){return hr(pr)}).raw=pr,no.geo.albers=function(){return no.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},no.geo.albersUsa=function(){function t(t){var i=t[0],a=t[1];return e=null,n(i,a),e||(r(i,a),e)||o(i,a),e}var e,n,r,o,i=no.geo.albers(),a=no.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=no.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&.234>o&&r>=-.425&&-.214>r?a:o>=.166&&.234>o&&r>=-.214&&-.115>r?u:i).invert(t)},t.stream=function(t){var e=i.stream(t),n=a.stream(t),r=u.stream(t);return{point:function(t,o){e.point(t,o),n.point(t,o),r.point(t,o)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(i.precision(e),a.precision(e),u.precision(e),t):i.precision()},t.scale=function(e){return arguments.length?(i.scale(e),a.scale(.35*e),u.scale(e),t.translate(i.translate())):i.scale()},t.translate=function(e){if(!arguments.length)return i.translate();var l=i.scale(),c=+e[0],f=+e[1];return n=i.translate(e).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=a.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+fi,f+.12*l+fi],[c-.214*l-fi,f+.234*l-fi]]).stream(s).point,o=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+fi,f+.166*l+fi],[c-.115*l-fi,f+.234*l-fi]]).stream(s).point,t},t.scale(1070)},no.geo.bounds=function(){function t(t,e){w.push(b=[c=t,h=t]),f>e&&(f=e),e>p&&(p=e)}function e(e,n){var r=On([e*pi,n*pi]);if(v){var o=Rn(v,r),i=[o[1],-o[0],0],a=Rn(i,o);Yn(a),a=_n(a);var s=e-d,l=s>0?1:-1,m=a[0]*di*l,g=oo(s)>180;if(g^(m>l*d&&l*e>m)){var y=a[1]*di;y>p&&(p=y)}else if(m=(m+360)%360-180,g^(m>l*d&&l*e>m)){var y=-a[1]*di;f>y&&(f=y)}else f>n&&(f=n),n>p&&(p=n);g?d>e?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>d?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e)}else t(e,n);v=r,d=e}function n(){x.point=e}function r(){b[0]=c,b[1]=h,x.point=t,v=null}function o(t,n){if(v){var r=t-d;y+=oo(r)>180?r+(r>0?360:-360):r}else m=t,g=n;Wi.point(t,n),e(t,n)}function i(){Wi.lineStart()}function a(){o(m,g),Wi.lineEnd(),oo(y)>fi&&(c=-(h=180)),b[0]=c,b[1]=h,v=null}function u(t,e){return 0>(e-=t)?e+360:e}function s(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?t>=e[0]&&e[1]>=t:e[0]>t||t>e[1]}var c,f,h,p,d,m,g,v,y,w,b,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=o,x.lineStart=i,x.lineEnd=a,y=0,Wi.polygonStart()},polygonEnd:function(){Wi.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,0>Zi?(c=-(h=180),f=-(p=90)):y>fi?p=90:-fi>y&&(f=-90),b[0]=c,b[1]=h}};return function(t){p=h=-(c=f=1/0),w=[],no.geo.stream(t,x);var e=w.length;if(e){w.sort(s);for(var n,r=1,o=w[0],i=[o];e>r;++r)n=w[r],l(n[0],o)||l(n[1],o)?(u(o[0],n[1])>u(o[0],o[1])&&(o[1]=n[1]),u(n[0],o[1])>u(o[0],o[1])&&(o[0]=n[0])):i.push(o=n);for(var a,n,d=-1/0,e=i.length-1,r=0,o=i[e];e>=r;o=n,++r)n=i[r],(a=u(o[1],n[0]))>d&&(d=a,c=n[0],h=o[1])}return w=b=null,1/0===c||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[c,f],[h,p]]}}(),no.geo.centroid=function(t){Gi=Vi=Ji=ta=ea=na=ra=oa=ia=aa=ua=0,no.geo.stream(t,da);var e=ia,n=aa,r=ua,o=e*e+n*n+r*r;return hi>o&&(e=na,n=ra,r=oa,fi>Vi&&(e=Ji,n=ta,r=ea),o=e*e+n*n+r*r,hi>o)?[0/0,0/0]:[Math.atan2(n,e)*di,ze(r/Math.sqrt(o))*di]};var Gi,Vi,Ji,ta,ea,na,ra,oa,ia,aa,ua,sa,la,ca,fa,ha,pa,da={sphere:s,point:dr,lineStart:gr,lineEnd:vr,polygonStart:function(){da.lineStart=yr},polygonEnd:function(){da.lineStart=gr}},ma={point:s,lineStart:s,lineEnd:s,polygonStart:function(){la=0,ma.lineStart=wr},polygonEnd:function(){ma.lineStart=ma.lineEnd=ma.point=s,sa+=oo(la/2)}},ga={point:br,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s},va={point:_r,lineStart:Tr,lineEnd:Er,polygonStart:function(){va.lineStart=Cr},polygonEnd:function(){va.point=_r,va.lineStart=Tr,va.lineEnd=Er}};no.geo.path=function(){function t(t){return t&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=o(i)),no.geo.stream(t,a)),i.result()}function e(){return a=null,t}var n,r,o,i,a,u=4.5;return t.area=function(t){return sa=0,no.geo.stream(t,o(ma)),sa},t.centroid=function(t){return Ji=ta=ea=na=ra=oa=ia=aa=ua=0,no.geo.stream(t,o(va)),ua?[ia/ua,aa/ua]:oa?[na/oa,ra/oa]:ea?[Ji/ea,ta/ea]:[0/0,0/0]},t.bounds=function(t){return ha=pa=-(ca=fa=1/0),no.geo.stream(t,o(ga)),[[ca,fa],[ha,pa]]},t.projection=function(t){return arguments.length?(o=(n=t)?t.stream||Sr(t):nn,e()):n},t.context=function(t){return arguments.length?(i=null==(r=t)?new xr:new zr(t),"function"!=typeof u&&i.pointRadius(u),e()):r},t.pointRadius=function(e){return arguments.length?(u="function"==typeof e?e:(i.pointRadius(+e),+e),t):u},t.projection(no.geo.albersUsa()).context(null)};var ya=function(){return nn},wa=no.map({linear:ya,poly:jr,quad:function(){return Pr},cubic:function(){return Nr},sin:function(){return Ir},exp:function(){return Hr},circle:function(){return Or},elastic:Dr,back:Rr,bounce:function(){return Fr}}),ba=no.map({"in":nn,out:Lr,"in-out":Ar,"out-in":function(t){return Ar(Lr(t))}});no.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=wa.get(n)||ya,r=ba.get(r)||nn,kr(r(n.apply(null,uo.call(arguments,1))))};var xa,Ma,_a=[],Ta=0;_a.call=xo.call,_a.empty=xo.empty,_a.node=xo.node,_a.size=xo.size,no.transition=function(t){return arguments.length?xa?t.transition():t:To.transition()},no.transition.prototype=_a,_a.select=function(t){var e,n,r,o=this.id,i=[];t=m(t);for(var a=-1,u=this.length;u>++a;){i.push(e=[]);for(var s=this[a],l=-1,c=s.length;c>++l;)(r=s[l])&&(n=t.call(r,r.__data__,l,a))?("__data__"in r&&(n.__data__=r.__data__),Qr(n,l,o,r.__transition__[o]),e.push(n)):e.push(null)}return Br(i,o)},_a.selectAll=function(t){var e,n,r,o,i,a=this.id,u=[];t=g(t);for(var s=-1,l=this.length;l>++s;)for(var c=this[s],f=-1,h=c.length;h>++f;)if(r=c[f]){i=r.__transition__[a],n=t.call(r,r.__data__,f,s),u.push(e=[]);for(var p=-1,d=n.length;d>++p;)(o=n[p])&&Qr(o,p,a,i),e.push(o)}return Br(u,a)},_a.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=C(t));for(var i=0,a=this.length;a>i;i++){o.push(e=[]);for(var n=this[i],u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,i)&&e.push(r)}return Br(o,this.id)},no.transform=function(t){var e=lo.createElementNS(no.ns.prefix.svg,"g");return(no.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Yr(n?n.matrix:Ea)})(t)},Yr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ea={a:1,b:0,c:0,d:1,e:0,f:0};return no.interpolateTransform=Zr,_a.tween=function(t,e){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(t):S(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})},_a.attr=function(t,e){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function o(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=a(n,t),function(t){this.setAttribute(u,e(t))})})}function i(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(2>arguments.length){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Zr:Ve,u=no.ns.qualify(t);return Wr(this,"attr."+t,e,u.local?i:o)},_a.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(o));return r&&function(t){this.setAttribute(o,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(o.space,o.local));return r&&function(t){this.setAttributeNS(o.space,o.local,r(t))}}var o=no.ns.qualify(t);return this.tween("attr."+t,o.local?r:n)},_a.style=function(t,e,n){function r(){this.style.removeProperty(t)}function o(e){return null==e?r:(e+="",function(){var r,o=fo.getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(r=Ve(o,e),function(e){this.style.setProperty(t,r(e),n)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Wr(this,"style."+t,e,o)},_a.styleTween=function(t,e,n){function r(r,o){var i=e.call(this,r,o,fo.getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),n)}}return 3>arguments.length&&(n=""),this.tween("style."+t,r)},_a.text=function(t){return Wr(this,"text",t,Kr)},_a.remove=function(){return this.each("end.transition",function(){var t;2>this.__transition__.count&&(t=this.parentNode)&&t.removeChild(this)})},_a.ease=function(t){var e=this.id;return 1>arguments.length?this.node().__transition__[e].ease:("function"!=typeof t&&(t=no.ease.apply(no,arguments)),S(this,function(n){n.__transition__[e].ease=t}))},_a.delay=function(t){var e=this.id;return S(this,"function"==typeof t?function(n,r,o){n.__transition__[e].delay=+t.call(n,n.__data__,r,o)}:(t=+t,function(n){n.__transition__[e].delay=t}))},_a.duration=function(t){var e=this.id;return S(this,"function"==typeof t?function(n,r,o){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,r,o))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},_a.each=function(t,e){var n=this.id;if(2>arguments.length){var r=Ma,o=xa;xa=n,S(this,function(e,r,o){Ma=e.__transition__[n],t.call(e,e.__data__,r,o)}),Ma=r,xa=o}else S(this,function(r){var o=r.__transition__[n];(o.event||(o.event=no.dispatch("start","end"))).on(t,e)});return this},_a.transition=function(){for(var t,e,n,r,o=this.id,i=++Ta,a=[],u=0,s=this.length;s>u;u++){a.push(t=[]);for(var e=this[u],l=0,c=e.length;c>l;l++)(n=e[l])&&(r=Object.create(n.__transition__[o]),r.delay+=r.duration,Qr(n,l,i,r)),t.push(n)}return Br(a,i)},no.xhr=Gr(nn),no.text=Gr(function(t){return t.responseText}),no.json=function(t,e){return Vr(t,"application/json",to,e)},no.html=function(t,e){return Vr(t,"text/html",eo,e)},no.xml=Gr(function(t){return t.responseXML}),no}(),function(){function t(t,e,n){for(var r=(n||0)-1,o=t?t.length:0;o>++r;)if(t[r]===e)return r;return-1}function e(e,n){var r=typeof n;if(e=e.cache,"boolean"==r||null==n)return e[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var o="number"==r?n:v+n;return e=(e=e[r])&&e[o],"object"==r?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:v+t,o=e[n]||(e[n]={});"object"==n?(o[r]||(o[r]=[])).push(t):o[r]=!0}}function r(t){return t.charCodeAt(0)}function o(t,e){for(var n=t.criteria,r=e.criteria,o=-1,i=n.length;i>++o;){var a=n[o],u=r[o];if(a!==u){if(a>u||a===p)return 1;if(u>a||u===p)return-1}}return t.index-e.index}function i(t){var e=-1,r=t.length,o=t[0],i=t[0|r/2],a=t[r-1];if(o&&"object"==typeof o&&i&&"object"==typeof i&&a&&"object"==typeof a)return!1;var u=s();u["false"]=u["null"]=u["true"]=u.undefined=!1;var l=s();for(l.array=t,l.cache=u,l.push=n;r>++e;)l.push(t[e]);return l}function a(t){return"\\"+Z[t]}function u(){return d.pop()||[]}function s(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(t){t.length=0,w>d.length&&d.push(t)}function c(t){var e=t.cache;e&&c(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,w>m.length&&m.push(t)}function f(t,e,n){e||(e=0),n===p&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);o>++r;)i[r]=t[e+r];return i}function h(n){function d(t){return t&&"object"==typeof t&&!Vr(t)&&qr.call(t,"__wrapped__")?t:new m(t)}function m(t,e){this.__chain__=!!e,this.__wrapped__=t}function w(t){function e(){if(r){var t=f(r);jr.apply(t,arguments)}if(this instanceof e){var i=K(n.prototype),a=n.apply(i,t||arguments);return Le(a)?a:i}return n.apply(o,t||arguments)}var n=t[0],r=t[2],o=t[4];return Gr(e,t),e}function Z(t,e,n,r,o){if(n){var i=n(t);if(i!==p)return i}var a=Le(t);if(!a)return t;var s=zr.call(t);if(!Y[s])return t;var c=Kr[s];switch(s){case I:case H:return new c(+t);case D:case B:return new c(t);case F:return i=c(t.source,E.exec(t)),i.lastIndex=t.lastIndex,i}var h=Vr(t);if(e){var d=!r;r||(r=u()),o||(o=u());for(var m=r.length;m--;)if(r[m]==t)return o[m];i=h?c(t.length):{}}else i=h?f(t):io({},t);return h&&(qr.call(t,"index")&&(i.index=t.index),qr.call(t,"input")&&(i.input=t.input)),e?(r.push(t),o.push(i),(h?Qe:so)(t,function(t,a){i[a]=Z(t,e,n,r,o)}),d&&(l(r),l(o)),i):i}function K(t){return Le(t)?Rr(t):{}}function Q(t,e,n){if("function"!=typeof t)return Vn;if(e===p||!("prototype"in t))return t;var r=t.__bindData__;if(r===p&&(Qr.funcNames&&(r=!t.name),r=r||!Qr.funcDecomp,!r)){var o=Pr.call(t);Qr.funcNames||(r=!C.test(o)),r||(r=L.test(o),Gr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return jn(t,e)}function G(t){function e(){var t=s?a:this;if(o){var d=f(o);jr.apply(d,arguments)}if((i||c)&&(d||(d=f(arguments)),i&&jr.apply(d,i),c&&u>d.length))return r|=16,G([n,h?r:-4&r,d,null,a,u]);if(d||(d=arguments),l&&(n=t[p]),this instanceof e){t=K(n.prototype);var m=n.apply(t,d);return Le(m)?m:t}return n.apply(t,d)}var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=1&r,l=2&r,c=4&r,h=8&r,p=n;return Gr(e,t),e}function V(n,r){var o=-1,a=se(),u=n?n.length:0,s=u>=y&&a===t,l=[];if(s){var f=i(r);f?(a=e,r=f):s=!1}for(;u>++o;){var h=n[o];0>a(r,h)&&l.push(h)}return s&&c(r),l}function te(t,e,n,r){for(var o=(r||0)-1,i=t?t.length:0,a=[];i>++o;){var u=t[o];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Vr(u)||he(u))){e||(u=te(u,e,n));var s=-1,l=u.length,c=a.length;for(a.length+=l;l>++s;)a[c++]=u[s]}else n||a.push(u)}return a}function ee(t,e,n,r,o,i){if(n){var a=n(t,e);if(a!==p)return!!a}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,c=typeof e;if(!(t!==t||t&&$[s]||e&&$[c]))return!1;if(null==t||null==e)return t===e;var f=zr.call(t),h=zr.call(e);if(f==q&&(f=R),h==q&&(h=R),f!=h)return!1;switch(f){case I:case H:return+t==+e;case D:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case F:case B:return t==Mr(e)}var d=f==j;if(!d){var m=qr.call(t,"__wrapped__"),g=qr.call(e,"__wrapped__");if(m||g)return ee(m?t.__wrapped__:t,g?e.__wrapped__:e,n,r,o,i);if(f!=R)return!1;var v=t.constructor,y=e.constructor;if(v!=y&&!(ke(v)&&v instanceof v&&ke(y)&&y instanceof y)&&"constructor"in t&&"constructor"in e)return!1}var w=!o;o||(o=u()),i||(i=u());for(var b=o.length;b--;)if(o[b]==t)return i[b]==e;var x=0;if(a=!0,o.push(t),i.push(e),d){if(b=t.length,x=e.length,a=x==b,a||r)for(;x--;){var M=b,_=e[x];if(r)for(;M--&&!(a=ee(t[M],_,n,r,o,i)););else if(!(a=ee(t[x],_,n,r,o,i)))break}}else uo(e,function(e,u,s){return qr.call(s,u)?(x++,a=qr.call(t,u)&&ee(t[u],e,n,r,o,i)):p}),a&&!r&&uo(t,function(t,e,n){return qr.call(n,e)?a=--x>-1:p});return o.pop(),i.pop(),w&&(l(o),l(i)),a}function ne(t,e,n,r,o){(Vr(e)?Qe:so)(e,function(e,i){var a,u,s=e,l=t[i];if(e&&((u=Vr(e))||lo(e))){for(var c=r.length;c--;)if(a=r[c]==e){l=o[c];break}if(!a){var f;n&&(s=n(l,e),(f=s!==p)&&(l=s)),f||(l=u?Vr(l)?l:[]:lo(l)?l:{}),r.push(e),o.push(l),f||ne(l,e,n,r,o)}}else n&&(s=n(l,e),s===p&&(s=e)),s!==p&&(l=s);t[i]=l})}function re(t,e){return t+Ar(Wr()*(e-t+1))}function oe(n,r,o){var a=-1,s=se(),f=n?n.length:0,h=[],p=!r&&f>=y&&s===t,d=o||p?u():h;if(p){var m=i(d);s=e,d=m}for(;f>++a;){var g=n[a],v=o?o(g,a,n):g;(r?!a||d[d.length-1]!==v:0>s(d,v))&&((o||p)&&d.push(v),h.push(g))}return p?(l(d.array),c(d)):o&&l(d),h}function ie(t){return function(e,n,r){var o={};n=d.createCallback(n,r,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;a>++i;){var u=e[i];t(o,u,n(u,i,e),e)}else so(e,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function ae(t,e,n,r,o,i){var a=1&e,u=2&e,s=4&e,l=16&e,c=32&e;if(!u&&!ke(t))throw new _r;l&&!n.length&&(e&=-17,l=n=!1),c&&!r.length&&(e&=-33,c=r=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=f(h),h[2]&&(h[2]=f(h[2])),h[3]&&(h[3]=f(h[3])),!a||1&h[1]||(h[4]=o),!a&&1&h[1]&&(e|=8),!s||4&h[1]||(h[5]=i),l&&jr.apply(h[2]||(h[2]=[]),n),c&&Or.apply(h[3]||(h[3]=[]),r),h[1]|=e,ae.apply(null,h);var p=1==e||17===e?w:G;return p([t,e,n,r,o,i])}function ue(t){return eo[t]}function se(){var e=(e=d.indexOf)===yn?t:e;return e}function le(t){return"function"==typeof t&&Sr.test(t)}function ce(t){var e,n;return t&&zr.call(t)==R&&(e=t.constructor,!ke(e)||e instanceof e)?(uo(t,function(t,e){n=e}),n===p||qr.call(t,n)):!1}function fe(t){return no[t]}function he(t){return t&&"object"==typeof t&&"number"==typeof t.length&&zr.call(t)==q||!1}function pe(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),Z(t,e,"function"==typeof n&&Q(n,r,1))}function de(t,e,n){return Z(t,!0,"function"==typeof e&&Q(e,n,1))}function me(t,e){var n=K(t);return e?io(n,e):n}function ge(t,e,n){var r;return e=d.createCallback(e,n,3),so(t,function(t,n,o){return e(t,n,o)?(r=n,!1):p}),r}function ve(t,e,n){var r;return e=d.createCallback(e,n,3),we(t,function(t,n,o){return e(t,n,o)?(r=n,!1):p}),r}function ye(t,e,n){var r=[];uo(t,function(t,e){r.push(e,t)});var o=r.length;for(e=Q(e,n,3);o--&&e(r[o--],r[o],t)!==!1;);return t}function we(t,e,n){var r=to(t),o=r.length;for(e=Q(e,n,3);o--;){var i=r[o];if(e(t[i],i,t)===!1)break}return t}function be(t){var e=[];return uo(t,function(t,n){ke(t)&&e.push(n)}),e.sort()}function xe(t,e){return t?qr.call(t,e):!1}function Me(t){for(var e=-1,n=to(t),r=n.length,o={};r>++e;){var i=n[e];o[t[i]]=i}return o}function _e(t){return t===!0||t===!1||t&&"object"==typeof t&&zr.call(t)==I||!1}function Te(t){return t&&"object"==typeof t&&zr.call(t)==H||!1}function Ee(t){return t&&1===t.nodeType||!1}function Ce(t){var e=!0;if(!t)return e;var n=zr.call(t),r=t.length;return n==j||n==B||n==q||n==R&&"number"==typeof r&&ke(t.splice)?!r:(so(t,function(){return e=!1}),e)}function ze(t,e,n,r){return ee(t,e,"function"==typeof n&&Q(n,r,2))}function Se(t){return Br(t)&&!Yr(parseFloat(t))}function ke(t){return"function"==typeof t}function Le(t){return!(!t||!$[typeof t])}function Ae(t){return Ne(t)&&t!=+t}function Pe(t){return null===t}function Ne(t){return"number"==typeof t||t&&"object"==typeof t&&zr.call(t)==D||!1}function qe(t){return t&&"object"==typeof t&&zr.call(t)==F||!1}function je(t){return"string"==typeof t||t&&"object"==typeof t&&zr.call(t)==B||!1}function Ie(t){return t===p}function He(t,e,n){var r={};return e=d.createCallback(e,n,3),so(t,function(t,n,o){r[n]=e(t,n,o)}),r}function Oe(t){var e=arguments,n=2;if(!Le(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=Q(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var o=f(arguments,1,n),i=-1,a=u(),s=u();n>++i;)ne(t,o[i],r,a,s);return l(a),l(s),t}function De(t,e,n){var r={};if("function"!=typeof e){var o=[];uo(t,function(t,e){o.push(e)}),o=V(o,te(arguments,!0,!1,1));for(var i=-1,a=o.length;a>++i;){var u=o[i];r[u]=t[u]}}else e=d.createCallback(e,n,3),uo(t,function(t,n,o){e(t,n,o)||(r[n]=t)});return r}function Re(t){for(var e=-1,n=to(t),r=n.length,o=dr(r);r>++e;){var i=n[e];o[e]=[i,t[i]]}return o}function Fe(t,e,n){var r={};if("function"!=typeof e)for(var o=-1,i=te(arguments,!0,!1,1),a=Le(t)?i.length:0;a>++o;){var u=i[o];u in t&&(r[u]=t[u])}else e=d.createCallback(e,n,3),uo(t,function(t,n,o){e(t,n,o)&&(r[n]=t)});return r}function Be(t,e,n,r){var o=Vr(t);if(null==n)if(o)n=[];else{var i=t&&t.constructor,a=i&&i.prototype;n=K(a)}return e&&(e=d.createCallback(e,r,4),(o?Qe:so)(t,function(t,r,o){return e(n,t,r,o)})),n}function Ye(t){for(var e=-1,n=to(t),r=n.length,o=dr(r);r>++e;)o[e]=t[n[e]];return o}function Ue(t){for(var e=arguments,n=-1,r=te(e,!0,!1,1),o=e[2]&&e[2][e[1]]===t?1:r.length,i=dr(o);o>++n;)i[n]=t[r[n]];return i}function Xe(t,e,n){var r=-1,o=se(),i=t?t.length:0,a=!1;return n=(0>n?Xr(0,i+n):n)||0,Vr(t)?a=o(t,e,n)>-1:"number"==typeof i?a=(je(t)?t.indexOf(e,n):o(t,e,n))>-1:so(t,function(t){return++r>=n?!(a=t===e):p}),a}function $e(t,e,n){var r=!0;e=d.createCallback(e,n,3);var o=-1,i=t?t.length:0;if("number"==typeof i)for(;i>++o&&(r=!!e(t[o],o,t)););else so(t,function(t,n,o){return r=!!e(t,n,o)});return r}function Ze(t,e,n){var r=[];e=d.createCallback(e,n,3);var o=-1,i=t?t.length:0;if("number"==typeof i)for(;i>++o;){var a=t[o];e(a,o,t)&&r.push(a)}else so(t,function(t,n,o){e(t,n,o)&&r.push(t)});return r}function We(t,e,n){e=d.createCallback(e,n,3);var r=-1,o=t?t.length:0;if("number"!=typeof o){var i;return so(t,function(t,n,r){return e(t,n,r)?(i=t,!1):p}),i}for(;o>++r;){var a=t[r];if(e(a,r,t))return a}}function Ke(t,e,n){var r;return e=d.createCallback(e,n,3),Ge(t,function(t,n,o){return e(t,n,o)?(r=t,!1):p}),r}function Qe(t,e,n){var r=-1,o=t?t.length:0;if(e=e&&n===p?e:Q(e,n,3),"number"==typeof o)for(;o>++r&&e(t[r],r,t)!==!1;);else so(t,e);return t}function Ge(t,e,n){var r=t?t.length:0;if(e=e&&n===p?e:Q(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var o=to(t);r=o.length,so(t,function(t,n,i){return n=o?o[--r]:--r,e(i[n],n,i)})}return t}function Ve(t,e){var n=f(arguments,2),r=-1,o="function"==typeof e,i=t?t.length:0,a=dr("number"==typeof i?i:0);return Qe(t,function(t){a[++r]=(o?e:t[e]).apply(t,n)}),a}function Je(t,e,n){var r=-1,o=t?t.length:0;if(e=d.createCallback(e,n,3),"number"==typeof o)for(var i=dr(o);o>++r;)i[r]=e(t[r],r,t);else i=[],so(t,function(t,n,o){i[++r]=e(t,n,o)});return i}function tn(t,e,n){var o=-1/0,i=o;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Vr(t))for(var a=-1,u=t.length;u>++a;){var s=t[a];s>i&&(i=s)}else e=null==e&&je(t)?r:d.createCallback(e,n,3),Qe(t,function(t,n,r){var a=e(t,n,r);a>o&&(o=a,i=t)});return i}function en(t,e,n){var o=1/0,i=o;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Vr(t))for(var a=-1,u=t.length;u>++a;){var s=t[a];i>s&&(i=s)}else e=null==e&&je(t)?r:d.createCallback(e,n,3),Qe(t,function(t,n,r){var a=e(t,n,r);o>a&&(o=a,i=t)});return i}function nn(t,e,n,r){if(!t)return n;var o=3>arguments.length;e=d.createCallback(e,r,4);var i=-1,a=t.length;if("number"==typeof a)for(o&&(n=t[++i]);a>++i;)n=e(n,t[i],i,t);else so(t,function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)});return n}function rn(t,e,n,r){var o=3>arguments.length;return e=d.createCallback(e,r,4),Ge(t,function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)}),n}function on(t,e,n){return e=d.createCallback(e,n,3),Ze(t,function(t,n,r){return!e(t,n,r)})}function an(t,e,n){if(t&&"number"!=typeof t.length&&(t=Ye(t)),null==e||n)return t?t[re(0,t.length-1)]:p;var r=un(t);return r.length=$r(Xr(0,e),r.length),r}function un(t){var e=-1,n=t?t.length:0,r=dr("number"==typeof n?n:0);return Qe(t,function(t){var n=re(0,++e);r[e]=r[n],r[n]=t}),r}function sn(t){var e=t?t.length:0;return"number"==typeof e?e:to(t).length}function ln(t,e,n){var r;e=d.createCallback(e,n,3);var o=-1,i=t?t.length:0;if("number"==typeof i)for(;i>++o&&!(r=e(t[o],o,t)););else so(t,function(t,n,o){return!(r=e(t,n,o))});return!!r}function cn(t,e,n){var r=-1,i=Vr(e),a=t?t.length:0,f=dr("number"==typeof a?a:0);for(i||(e=d.createCallback(e,n,3)),Qe(t,function(t,n,o){var a=f[++r]=s();i?a.criteria=Je(e,function(e){return t[e]}):(a.criteria=u())[0]=e(t,n,o),a.index=r,a.value=t}),a=f.length,f.sort(o);a--;){var h=f[a];f[a]=h.value,i||l(h.criteria),c(h)}return f}function fn(t){return t&&"number"==typeof t.length?f(t):Ye(t)}function hn(t){for(var e=-1,n=t?t.length:0,r=[];n>++e;){var o=t[e];o&&r.push(o)}return r}function pn(t){return V(t,te(arguments,!0,!0,1))}function dn(t,e,n){var r=-1,o=t?t.length:0;for(e=d.createCallback(e,n,3);o>++r;)if(e(t[r],r,t))return r;return-1}function mn(t,e,n){var r=t?t.length:0;for(e=d.createCallback(e,n,3);r--;)if(e(t[r],r,t))return r;return-1}function gn(t,e,n){var r=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var i=-1;for(e=d.createCallback(e,n,3);o>++i&&e(t[i],i,t);)r++}else if(r=e,null==r||n)return t?t[0]:p;return f(t,0,$r(Xr(0,r),o))}function vn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=Je(t,n,r)),te(t,e)}function yn(e,n,r){if("number"==typeof r){var o=e?e.length:0;r=0>r?Xr(0,o+r):r||0}else if(r){var i=zn(e,n);return e[i]===n?i:-1}return t(e,n,r)}function wn(t,e,n){var r=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var i=o;for(e=d.createCallback(e,n,3);i--&&e(t[i],i,t);)r++}else r=null==e||n?1:e||r;return f(t,0,$r(Xr(0,o-r),o))}function bn(){for(var n=[],r=-1,o=arguments.length,a=u(),s=se(),f=s===t,h=u();o>++r;){var p=arguments[r];(Vr(p)||he(p))&&(n.push(p),a.push(f&&p.length>=y&&i(r?n[r]:h)))}var d=n[0],m=-1,g=d?d.length:0,v=[];t:for(;g>++m;){var w=a[0];if(p=d[m],0>(w?e(w,p):s(h,p))){for(r=o,(w||h).push(p);--r;)if(w=a[r],0>(w?e(w,p):s(n[r],p)))continue t;v.push(p)}}for(;o--;)w=a[o],w&&c(w);return l(a),l(h),v}function xn(t,e,n){var r=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var i=o;for(e=d.createCallback(e,n,3);i--&&e(t[i],i,t);)r++}else if(r=e,null==r||n)return t?t[o-1]:p;return f(t,Xr(0,o-r))}function Mn(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Xr(0,r+n):$r(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function _n(t){for(var e=arguments,n=0,r=e.length,o=t?t.length:0;r>++n;)for(var i=-1,a=e[n];o>++i;)t[i]===a&&(Hr.call(t,i--,1),o--);return t}function Tn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,o=Xr(0,kr((e-t)/(n||1))),i=dr(o);o>++r;)i[r]=t,t+=n;return i}function En(t,e,n){var r=-1,o=t?t.length:0,i=[];for(e=d.createCallback(e,n,3);o>++r;){var a=t[r];e(a,r,t)&&(i.push(a),Hr.call(t,r--,1),o--)}return i}function Cn(t,e,n){if("number"!=typeof e&&null!=e){var r=0,o=-1,i=t?t.length:0;for(e=d.createCallback(e,n,3);i>++o&&e(t[o],o,t);)r++}else r=null==e||n?1:Xr(0,e);return f(t,r)}function zn(t,e,n,r){var o=0,i=t?t.length:o;for(n=n?d.createCallback(n,r,1):Vn,e=n(e);i>o;){var a=o+i>>>1;e>n(t[a])?o=a+1:i=a}return o}function Sn(){return oe(te(arguments,!0,!0))}function kn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=d.createCallback(n,r,3)),oe(t,e,n)}function Ln(t){return V(t,f(arguments,1))}function An(){for(var t=-1,e=arguments.length;e>++t;){var n=arguments[t];if(Vr(n)||he(n))var r=r?oe(V(r,n).concat(V(n,r))):n}return r||[]}function Pn(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?tn(po(t,"length")):0,r=dr(0>n?0:n);n>++e;)r[e]=po(t,e);return r}function Nn(t,e){var n=-1,r=t?t.length:0,o={};for(e||!r||Vr(t[0])||(e=[]);r>++n;){var i=t[n];e?o[i]=e[n]:i&&(o[i[0]]=i[1])}return o}function qn(t,e){if(!ke(e))throw new _r;return function(){return 1>--t?e.apply(this,arguments):p}}function jn(t,e){return arguments.length>2?ae(t,17,f(arguments,2),null,e):ae(t,1,null,null,e)
}function In(t){for(var e=arguments.length>1?te(arguments,!0,!1,1):be(t),n=-1,r=e.length;r>++n;){var o=e[n];t[o]=ae(t[o],1,null,null,t)}return t}function Hn(t,e){return arguments.length>2?ae(e,19,f(arguments,2),null,t):ae(e,3,null,null,t)}function On(){for(var t=arguments,e=t.length;e--;)if(!ke(t[e]))throw new _r;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Dn(t,e){return e="number"==typeof e?e:+e||t.length,ae(t,4,null,null,null,e)}function Rn(t,e,n){var r,o,i,a,u,s,l,c=0,f=!1,h=!0;if(!ke(t))throw new _r;if(e=Xr(0,e)||0,n===!0){var d=!0;h=!1}else Le(n)&&(d=n.leading,f="maxWait"in n&&(Xr(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var m=function(){var n=e-(go()-a);if(0>=n){o&&Lr(o);var f=l;o=s=l=p,f&&(c=go(),i=t.apply(u,r),s||o||(r=u=null))}else s=Ir(m,n)},g=function(){s&&Lr(s),o=s=l=p,(h||f!==e)&&(c=go(),i=t.apply(u,r),s||o||(r=u=null))};return function(){if(r=arguments,a=go(),u=this,l=h&&(s||!d),f===!1)var n=d&&!s;else{o||d||(c=a);var p=f-(a-c),v=0>=p;v?(o&&(o=Lr(o)),c=a,i=t.apply(u,r)):o||(o=Ir(g,p))}return v&&s?s=Lr(s):s||e===f||(s=Ir(m,e)),n&&(v=!0,i=t.apply(u,r)),!v||s||o||(r=u=null),i}}function Fn(t){if(!ke(t))throw new _r;var e=f(arguments,1);return Ir(function(){t.apply(p,e)},1)}function Bn(t,e){if(!ke(t))throw new _r;var n=f(arguments,2);return Ir(function(){t.apply(p,n)},e)}function Yn(t,e){if(!ke(t))throw new _r;var n=function(){var r=n.cache,o=e?e.apply(this,arguments):v+arguments[0];return qr.call(r,o)?r[o]:r[o]=t.apply(this,arguments)};return n.cache={},n}function Un(t){var e,n;if(!ke(t))throw new _r;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Xn(t){return ae(t,16,f(arguments,1))}function $n(t){return ae(t,32,null,f(arguments,1))}function Zn(t,e,n){var r=!0,o=!0;if(!ke(t))throw new _r;return n===!1?r=!1:Le(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),U.leading=r,U.maxWait=e,U.trailing=o,Rn(t,e,U)}function Wn(t,e){return ae(e,16,[t])}function Kn(t){return function(){return t}}function Qn(t,e,n){var r=typeof t;if(null==t||"function"==r)return Q(t,e,n);if("object"!=r)return nr(t);var o=to(t),i=o[0],a=t[i];return 1!=o.length||a!==a||Le(a)?function(e){for(var n=o.length,r=!1;n--&&(r=ee(e[o[n]],t[o[n]],null,!0)););return r}:function(t){var e=t[i];return a===e&&(0!==a||1/a==1/e)}}function Gn(t){return null==t?"":Mr(t).replace(oo,ue)}function Vn(t){return t}function Jn(t,e,n){var r=!0,o=e&&be(e);e&&(n||o.length)||(null==n&&(n=e),i=m,e=t,t=d,o=be(e)),n===!1?r=!1:Le(n)&&"chain"in n&&(r=n.chain);var i=t,a=ke(i);Qe(o,function(n){var o=t[n]=e[n];a&&(i.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,a=[n];jr.apply(a,arguments);var u=o.apply(t,a);if(r||e){if(n===u&&Le(u))return this;u=new i(u),u.__chain__=e}return u})})}function tr(){return n._=Cr,this}function er(){}function nr(t){return function(e){return e[t]}}function rr(t,e,n){var r=null==t,o=null==e;if(null==n&&("boolean"==typeof t&&o?(n=t,t=1):o||"boolean"!=typeof e||(n=e,o=!0)),r&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var i=Wr();return $r(t+i*(e-t+parseFloat("1e-"+((i+"").length-1))),e)}return re(t,e)}function or(t,e){if(t){var n=t[e];return ke(n)?t[e]():n}}function ir(t,e,n){var r=d.templateSettings;t=Mr(t||""),n=ao({},n,r);var o,i=ao({},n.imports,r.imports),u=to(i),s=Ye(i),l=0,c=n.interpolate||k,f="__p += '",h=xr((n.escape||k).source+"|"+c.source+"|"+(c===z?T:k).source+"|"+(n.evaluate||k).source+"|$","g");t.replace(h,function(e,n,r,i,u,s){return r||(r=i),f+=t.slice(l,s).replace(A,a),n&&(f+="' +\n__e("+n+") +\n'"),u&&(o=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),f+="';\n";var m=n.variable,g=m;g||(m="obj",f="with ("+m+") {\n"+f+"\n}\n"),f=(o?f.replace(x,""):f).replace(M,"$1").replace(_,"$1;"),f="function("+m+") {\n"+(g?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+N++ +"]")+"\n*/";try{var y=vr(u,"return "+f+v).apply(p,s)}catch(w){throw w.source=f,w}return e?y(e):(y.source=f,y)}function ar(t,e,n){t=(t=+t)>-1?t:0;var r=-1,o=dr(t);for(e=Q(e,n,1);t>++r;)o[r]=e(r);return o}function ur(t){return null==t?"":Mr(t).replace(ro,fe)}function sr(t){var e=++g;return Mr(null==t?"":t)+e}function lr(t){return t=new m(t),t.__chain__=!0,t}function cr(t,e){return e(t),t}function fr(){return this.__chain__=!0,this}function hr(){return Mr(this.__wrapped__)}function pr(){return this.__wrapped__}n=n?J.defaults(W.Object(),n,J.pick(W,P)):W;var dr=n.Array,mr=n.Boolean,gr=n.Date,vr=n.Function,yr=n.Math,wr=n.Number,br=n.Object,xr=n.RegExp,Mr=n.String,_r=n.TypeError,Tr=[],Er=br.prototype,Cr=n._,zr=Er.toString,Sr=xr("^"+Mr(zr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),kr=yr.ceil,Lr=n.clearTimeout,Ar=yr.floor,Pr=vr.prototype.toString,Nr=le(Nr=br.getPrototypeOf)&&Nr,qr=Er.hasOwnProperty,jr=Tr.push,Ir=n.setTimeout,Hr=Tr.splice,Or=Tr.unshift,Dr=function(){try{var t={},e=le(e=br.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Rr=le(Rr=br.create)&&Rr,Fr=le(Fr=dr.isArray)&&Fr,Br=n.isFinite,Yr=n.isNaN,Ur=le(Ur=br.keys)&&Ur,Xr=yr.max,$r=yr.min,Zr=n.parseInt,Wr=yr.random,Kr={};Kr[j]=dr,Kr[I]=mr,Kr[H]=gr,Kr[O]=vr,Kr[R]=br,Kr[D]=wr,Kr[F]=xr,Kr[B]=Mr,m.prototype=d.prototype;var Qr=d.support={};Qr.funcDecomp=!le(n.WinRTError)&&L.test(h),Qr.funcNames="string"==typeof vr.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:z,variable:"",imports:{_:d}},Rr||(K=function(){function t(){}return function(e){if(Le(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}());var Gr=Dr?function(t,e){X.value=e,Dr(t,"__bindData__",X)}:er,Vr=Fr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&zr.call(t)==j||!1},Jr=function(t){var e,n=t,r=[];if(!n)return r;if(!$[typeof t])return r;for(e in n)qr.call(n,e)&&r.push(e);return r},to=Ur?function(t){return Le(t)?Ur(t):[]}:Jr,eo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},no=Me(eo),ro=xr("("+to(no).join("|")+")","g"),oo=xr("["+to(eo).join("")+"]","g"),io=function(t,e,n){var r,o=t,i=o;if(!o)return i;var a=arguments,u=0,s="number"==typeof n?2:a.length;if(s>3&&"function"==typeof a[s-2])var l=Q(a[--s-1],a[s--],2);else s>2&&"function"==typeof a[s-1]&&(l=a[--s]);for(;s>++u;)if(o=a[u],o&&$[typeof o])for(var c=-1,f=$[typeof o]&&to(o),h=f?f.length:0;h>++c;)r=f[c],i[r]=l?l(i[r],o[r]):o[r];return i},ao=function(t,e,n){var r,o=t,i=o;if(!o)return i;for(var a=arguments,u=0,s="number"==typeof n?2:a.length;s>++u;)if(o=a[u],o&&$[typeof o])for(var l=-1,c=$[typeof o]&&to(o),f=c?c.length:0;f>++l;)r=c[l],i[r]===p&&(i[r]=o[r]);return i},uo=function(t,e,n){var r,o=t,i=o;if(!o)return i;if(!$[typeof o])return i;e=e&&n===p?e:Q(e,n,3);for(r in o)if(e(o[r],r,t)===!1)return i;return i},so=function(t,e,n){var r,o=t,i=o;if(!o)return i;if(!$[typeof o])return i;e=e&&n===p?e:Q(e,n,3);for(var a=-1,u=$[typeof o]&&to(o),s=u?u.length:0;s>++a;)if(r=u[a],e(o[r],r,t)===!1)return i;return i},lo=Nr?function(t){if(!t||zr.call(t)!=R)return!1;var e=t.valueOf,n=le(e)&&(n=Nr(e))&&Nr(n);return n?t==n||Nr(t)==n:ce(t)}:ce,co=ie(function(t,e,n){qr.call(t,n)?t[n]++:t[n]=1}),fo=ie(function(t,e,n){(qr.call(t,n)?t[n]:t[n]=[]).push(e)}),ho=ie(function(t,e,n){t[n]=e}),po=Je,mo=Ze,go=le(go=gr.now)&&go||function(){return(new gr).getTime()},vo=8==Zr(b+"08")?Zr:function(t,e){return Zr(je(t)?t.replace(S,""):t,e||0)};return d.after=qn,d.assign=io,d.at=Ue,d.bind=jn,d.bindAll=In,d.bindKey=Hn,d.chain=lr,d.compact=hn,d.compose=On,d.constant=Kn,d.countBy=co,d.create=me,d.createCallback=Qn,d.curry=Dn,d.debounce=Rn,d.defaults=ao,d.defer=Fn,d.delay=Bn,d.difference=pn,d.filter=Ze,d.flatten=vn,d.forEach=Qe,d.forEachRight=Ge,d.forIn=uo,d.forInRight=ye,d.forOwn=so,d.forOwnRight=we,d.functions=be,d.groupBy=fo,d.indexBy=ho,d.initial=wn,d.intersection=bn,d.invert=Me,d.invoke=Ve,d.keys=to,d.map=Je,d.mapValues=He,d.max=tn,d.memoize=Yn,d.merge=Oe,d.min=en,d.omit=De,d.once=Un,d.pairs=Re,d.partial=Xn,d.partialRight=$n,d.pick=Fe,d.pluck=po,d.property=nr,d.pull=_n,d.range=Tn,d.reject=on,d.remove=En,d.rest=Cn,d.shuffle=un,d.sortBy=cn,d.tap=cr,d.throttle=Zn,d.times=ar,d.toArray=fn,d.transform=Be,d.union=Sn,d.uniq=kn,d.values=Ye,d.where=mo,d.without=Ln,d.wrap=Wn,d.xor=An,d.zip=Pn,d.zipObject=Nn,d.collect=Je,d.drop=Cn,d.each=Qe,d.eachRight=Ge,d.extend=io,d.methods=be,d.object=Nn,d.select=Ze,d.tail=Cn,d.unique=kn,d.unzip=Pn,Jn(d),d.clone=pe,d.cloneDeep=de,d.contains=Xe,d.escape=Gn,d.every=$e,d.find=We,d.findIndex=dn,d.findKey=ge,d.findLast=Ke,d.findLastIndex=mn,d.findLastKey=ve,d.has=xe,d.identity=Vn,d.indexOf=yn,d.isArguments=he,d.isArray=Vr,d.isBoolean=_e,d.isDate=Te,d.isElement=Ee,d.isEmpty=Ce,d.isEqual=ze,d.isFinite=Se,d.isFunction=ke,d.isNaN=Ae,d.isNull=Pe,d.isNumber=Ne,d.isObject=Le,d.isPlainObject=lo,d.isRegExp=qe,d.isString=je,d.isUndefined=Ie,d.lastIndexOf=Mn,d.mixin=Jn,d.noConflict=tr,d.noop=er,d.now=go,d.parseInt=vo,d.random=rr,d.reduce=nn,d.reduceRight=rn,d.result=or,d.runInContext=h,d.size=sn,d.some=ln,d.sortedIndex=zn,d.template=ir,d.unescape=ur,d.uniqueId=sr,d.all=$e,d.any=ln,d.detect=We,d.findWhere=We,d.foldl=nn,d.foldr=rn,d.include=Xe,d.inject=nn,Jn(function(){var t={};return so(d,function(e,n){d.prototype[n]||(t[n]=e)}),t}(),!1),d.first=gn,d.last=xn,d.sample=an,d.take=gn,d.head=gn,so(d,function(t,e){var n="sample"!==e;d.prototype[e]||(d.prototype[e]=function(e,r){var o=this.__chain__,i=t(this.__wrapped__,e,r);return o||null!=e&&(!r||n&&"function"==typeof e)?new m(i,o):i})}),d.VERSION="2.4.1",d.prototype.chain=fr,d.prototype.toString=hr,d.prototype.value=pr,d.prototype.valueOf=pr,Qe(["join","pop","shift"],function(t){var e=Tr[t];d.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new m(n,t):n}}),Qe(["push","reverse","sort","unshift"],function(t){var e=Tr[t];d.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Qe(["concat","slice","splice"],function(t){var e=Tr[t];d.prototype[t]=function(){return new m(e.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var p,d=[],m=[],g=0,v=+new Date+"",y=75,w=40,b=" 	\f\n\r\u2028\u2029",x=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,z=/<%=([\s\S]+?)%>/g,S=RegExp("^["+b+"]*0+(?=.$)"),k=/($^)/,L=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,P=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],N=0,q="[object Arguments]",j="[object Array]",I="[object Boolean]",H="[object Date]",O="[object Function]",D="[object Number]",R="[object Object]",F="[object RegExp]",B="[object String]",Y={};Y[O]=!1,Y[q]=Y[j]=Y[I]=Y[H]=Y[D]=Y[R]=Y[F]=Y[B]=!0;var U={leading:!1,maxWait:0,trailing:!1},X={configurable:!1,enumerable:!1,value:null,writable:!1},$={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Z={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},W=$[typeof window]&&window||this,K=$[typeof exports]&&exports&&!exports.nodeType&&exports,Q=$[typeof module]&&module&&!module.nodeType&&module,G=Q&&Q.exports===K&&K,V=$[typeof global]&&global;!V||V.global!==V&&V.window!==V||(W=V);var J=h();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(W._=J,define(function(){return J})):K&&Q?G?(Q.exports=J)._=J:K._=J:W._=J}.call(this),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz"],e=0;t.length>e&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(r+16,e);return setTimeout(function(){t(r=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var previousMM=MM;if(!com){var com={};com.modestmaps||(com.modestmaps={})}var MM=com.modestmaps={noConflict:function(){return MM=previousMM,this}};(function(t){t.extend=function(t,e){for(var n in e.prototype)t.prototype[n]===void 0&&(t.prototype[n]=e.prototype[n]);return t},t.getFrame=function(){return function(t){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(+new Date)},10)})(t)}}(),t.transformProperty=function(t){if(this.document){for(var e=document.documentElement.style,n=0;t.length>n;n++)if(t[n]in e)return t[n];return!1}}(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),t.matrixString=function(e){e.scale*e.width%1&&(e.scale+=(1-e.scale*e.width%1)/e.width);var n=e.scale||1;return t._browser.webkit3d?"translate3d("+e.x.toFixed(0)+"px,"+e.y.toFixed(0)+"px, 0px)"+"scale3d("+n+","+n+", 1)":"translate("+e.x.toFixed(6)+"px,"+e.y.toFixed(6)+"px)"+"scale("+n+","+n+")"},t._browser=function(t){return{webkit:"WebKitCSSMatrix"in t,webkit3d:"WebKitCSSMatrix"in t&&"m11"in new WebKitCSSMatrix}}(this),t.moveElement=function(e,n){if(t.transformProperty){n.scale||(n.scale=1),n.width||(n.width=0),n.height||(n.height=0);var r=t.matrixString(n);e[t.transformProperty]!==r&&(e.style[t.transformProperty]=e[t.transformProperty]=r)}else e.style.left=n.x+"px",e.style.top=n.y+"px",n.width&&n.height&&n.scale&&(e.style.width=Math.ceil(n.width*n.scale)+"px",e.style.height=Math.ceil(n.height*n.scale)+"px")},t.cancelEvent=function(t){return t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},t.coerceLayer=function(e){return"string"==typeof e?new t.Layer(new t.TemplatedLayer(e)):"draw"in e&&"function"==typeof e.draw?e:new t.Layer(e)},t.addEvent=function(t,e,n){t.addEventListener?(t.addEventListener(e,n,!1),"mousewheel"==e&&t.addEventListener("DOMMouseScroll",n,!1)):t.attachEvent&&(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n]))},t.removeEvent=function(t,e,n){t.removeEventListener?(t.removeEventListener(e,n,!1),"mousewheel"==e&&t.removeEventListener("DOMMouseScroll",n,!1)):t.detachEvent&&(t.detachEvent("on"+e,t[e+n]),t[e+n]=null)},t.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?document.defaultView.getComputedStyle(t,null).getPropertyValue(e):void 0},t.Point=function(t,e){this.x=parseFloat(t),this.y=parseFloat(e)},t.Point.prototype={x:0,y:0,toString:function(){return"("+this.x.toFixed(3)+", "+this.y.toFixed(3)+")"},copy:function(){return new t.Point(this.x,this.y)}},t.Point.distance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.Point.interpolate=function(e,n,r){return new t.Point(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r)},t.Coordinate=function(t,e,n){this.row=t,this.column=e,this.zoom=n},t.Coordinate.prototype={row:0,column:0,zoom:0,toString:function(){return"("+this.row.toFixed(3)+", "+this.column.toFixed(3)+" @"+this.zoom.toFixed(3)+")"},toKey:function(){return this.zoom+","+this.row+","+this.column},copy:function(){return new t.Coordinate(this.row,this.column,this.zoom)},container:function(){return new t.Coordinate(Math.floor(this.row),Math.floor(this.column),Math.floor(this.zoom))},zoomTo:function(e){var n=Math.pow(2,e-this.zoom);return new t.Coordinate(this.row*n,this.column*n,e)},zoomBy:function(e){var n=Math.pow(2,e);return new t.Coordinate(this.row*n,this.column*n,this.zoom+e)},up:function(e){return void 0===e&&(e=1),new t.Coordinate(this.row-e,this.column,this.zoom)},right:function(e){return void 0===e&&(e=1),new t.Coordinate(this.row,this.column+e,this.zoom)},down:function(e){return void 0===e&&(e=1),new t.Coordinate(this.row+e,this.column,this.zoom)},left:function(e){return void 0===e&&(e=1),new t.Coordinate(this.row,this.column-e,this.zoom)}},t.Location=function(t,e){this.lat=parseFloat(t),this.lon=parseFloat(e)},t.Location.prototype={lat:0,lon:0,toString:function(){return"("+this.lat.toFixed(3)+", "+this.lon.toFixed(3)+")"},copy:function(){return new t.Location(this.lat,this.lon)}},t.Location.distance=function(t,e,n){n||(n=6378e3);var r=Math.PI/180,o=t.lat*r,i=t.lon*r,a=e.lat*r,u=e.lon*r,s=Math.cos(o)*Math.cos(i)*Math.cos(a)*Math.cos(u),l=Math.cos(o)*Math.sin(i)*Math.cos(a)*Math.sin(u),c=Math.sin(o)*Math.sin(a);return Math.acos(s+l+c)*n},t.Location.interpolate=function(e,n,r){if(e.lat===n.lat&&e.lon===n.lon)return new t.Location(e.lat,e.lon);var o=Math.PI/180,i=e.lat*o,a=e.lon*o,u=n.lat*o,s=n.lon*o,l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(.5*(i-u)),2)+Math.cos(i)*Math.cos(u)*Math.pow(Math.sin(.5*(a-s)),2))),c=Math.sin((1-r)*l)/Math.sin(l),f=Math.sin(r*l)/Math.sin(l),h=c*Math.cos(i)*Math.cos(a)+f*Math.cos(u)*Math.cos(s),p=c*Math.cos(i)*Math.sin(a)+f*Math.cos(u)*Math.sin(s),d=c*Math.sin(i)+f*Math.sin(u),m=Math.atan2(d,Math.sqrt(Math.pow(h,2)+Math.pow(p,2))),g=Math.atan2(p,h);return new t.Location(m/o,g/o)},t.Location.bearing=function(t,e){var n=Math.PI/180,r=t.lat*n,o=t.lon*n,i=e.lat*n,a=e.lon*n,u=Math.atan2(Math.sin(o-a)*Math.cos(i),Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(o-a))/-(Math.PI/180);return 0>u?u+360:u},t.Extent=function(e,n,r,o){if(e instanceof t.Location&&n instanceof t.Location){var i=e,a=n;e=i.lat,n=i.lon,r=a.lat,o=a.lon}isNaN(r)&&(r=e),isNaN(o)&&(o=n),this.north=Math.max(e,r),this.south=Math.min(e,r),this.east=Math.max(o,n),this.west=Math.min(o,n)},t.Extent.prototype={north:0,south:0,east:0,west:0,copy:function(){return new t.Extent(this.north,this.west,this.south,this.east)},toString:function(t){return isNaN(t)&&(t=3),[this.north.toFixed(t),this.west.toFixed(t),this.south.toFixed(t),this.east.toFixed(t)].join(", ")},northWest:function(){return new t.Location(this.north,this.west)},southEast:function(){return new t.Location(this.south,this.east)},northEast:function(){return new t.Location(this.north,this.east)},southWest:function(){return new t.Location(this.south,this.west)},center:function(){return new t.Location(this.south+.5*(this.north-this.south),this.east+.5*(this.west-this.east))},encloseLocation:function(t){t.lat>this.north&&(this.north=t.lat),t.lat<this.south&&(this.south=t.lat),t.lon>this.east&&(this.east=t.lon),t.lon<this.west&&(this.west=t.lon)},encloseLocations:function(t){for(var e=t.length,n=0;e>n;n++)this.encloseLocation(t[n])},setFromLocations:function(t){var e=t.length,n=t[0];this.north=this.south=n.lat,this.east=this.west=n.lon;for(var r=1;e>r;r++)this.encloseLocation(t[r])},encloseExtent:function(t){t.north>this.north&&(this.north=t.north),t.south<this.south&&(this.south=t.south),t.east>this.east&&(this.east=t.east),t.west<this.west&&(this.west=t.west)},containsLocation:function(t){return t.lat>=this.south&&t.lat<=this.north&&t.lon>=this.west&&t.lon<=this.east},toArray:function(){return[this.northWest(),this.southEast()]}},t.Extent.fromString=function(e){var n=e.split(/\s*,\s*/);if(4!=n.length)throw"Invalid extent string (expecting 4 comma-separated numbers)";return new t.Extent(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]))},t.Extent.fromArray=function(e){var n=new t.Extent;return n.setFromLocations(e),n},t.Transformation=function(t,e,n,r,o,i){this.ax=t,this.bx=e,this.cx=n,this.ay=r,this.by=o,this.cy=i},t.Transformation.prototype={ax:0,bx:0,cx:0,ay:0,by:0,cy:0,transform:function(e){return new t.Point(this.ax*e.x+this.bx*e.y+this.cx,this.ay*e.x+this.by*e.y+this.cy)},untransform:function(e){return new t.Point((e.x*this.by-e.y*this.bx-this.cx*this.by+this.cy*this.bx)/(this.ax*this.by-this.ay*this.bx),(e.x*this.ay-e.y*this.ax-this.cx*this.ay+this.cy*this.ax)/(this.bx*this.ay-this.by*this.ax))}},t.deriveTransformation=function(e,n,r,o,i,a,u,s,l,c,f,h){var p=t.linearSolution(e,n,r,i,a,u,l,c,f),d=t.linearSolution(e,n,o,i,a,s,l,c,h);return new t.Transformation(p[0],p[1],p[2],d[0],d[1],d[2])},t.linearSolution=function(t,e,n,r,o,i,a,u,s){t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),r=parseFloat(r),o=parseFloat(o),i=parseFloat(i),a=parseFloat(a),u=parseFloat(u),s=parseFloat(s);var l=((i-s)*(e-o)-(n-i)*(o-u))/((r-a)*(e-o)-(t-r)*(o-u)),c=((i-s)*(t-r)-(n-i)*(r-a))/((o-u)*(t-r)-(e-o)*(r-a)),f=n-t*l-e*c;return[l,c,f]},t.Projection=function(e,n){n||(n=new t.Transformation(1,0,0,0,1,0)),this.zoom=e,this.transformation=n},t.Projection.prototype={zoom:0,transformation:null,rawProject:function(){throw"Abstract method not implemented by subclass."},rawUnproject:function(){throw"Abstract method not implemented by subclass."},project:function(t){return t=this.rawProject(t),this.transformation&&(t=this.transformation.transform(t)),t},unproject:function(t){return this.transformation&&(t=this.transformation.untransform(t)),t=this.rawUnproject(t)},locationCoordinate:function(e){var n=new t.Point(Math.PI*e.lon/180,Math.PI*e.lat/180);return n=this.project(n),new t.Coordinate(n.y,n.x,this.zoom)},coordinateLocation:function(e){e=e.zoomTo(this.zoom);var n=new t.Point(e.column,e.row);return n=this.unproject(n),new t.Location(180*n.y/Math.PI,180*n.x/Math.PI)}},t.LinearProjection=function(e,n){t.Projection.call(this,e,n)},t.LinearProjection.prototype={rawProject:function(e){return new t.Point(e.x,e.y)},rawUnproject:function(e){return new t.Point(e.x,e.y)}},t.extend(t.LinearProjection,t.Projection),t.MercatorProjection=function(e,n){t.Projection.call(this,e,n)},t.MercatorProjection.prototype={rawProject:function(e){return new t.Point(e.x,Math.log(Math.tan(.25*Math.PI+.5*e.y)))},rawUnproject:function(e){return new t.Point(e.x,2*Math.atan(Math.pow(Math.E,e.y))-.5*Math.PI)}},t.extend(t.MercatorProjection,t.Projection),t.MapProvider=function(t){t&&(this.getTile=t)},t.MapProvider.prototype={tileLimits:[new t.Coordinate(0,0,0),new t.Coordinate(1,1,0).zoomTo(18)],getTileUrl:function(){throw"Abstract method not implemented by subclass."},getTile:function(){throw"Abstract method not implemented by subclass."},releaseTile:function(){},setZoomRange:function(t,e){this.tileLimits[0]=this.tileLimits[0].zoomTo(t),this.tileLimits[1]=this.tileLimits[1].zoomTo(e)},sourceCoordinate:function(e){var n,r=this.tileLimits[0].zoomTo(e.zoom).container(),o=this.tileLimits[1].zoomTo(e.zoom),i=Math.pow(2,e.zoom);return o=new t.Coordinate(Math.ceil(o.row),Math.ceil(o.column),Math.floor(o.zoom)),n=0>e.column?(e.column%i+i)%i:e.column%i,e.row<r.row||e.row>=o.row?null:r.column>n||n>=o.column?null:new t.Coordinate(e.row,n,e.zoom)}},t.Template=function(e,n){function r(t,e,n){for(var r="",o=1;n>=o;o++)r+=(1&t>>n-o)<<1|1&e>>n-o;return r||"0"}var o=e.match(/{(Q|quadkey)}/);o&&(e=e.replace("{subdomain}","{S}").replace("{zoom}","{Z}").replace("{quadkey}","{Q}"));var i=n&&n.length&&e.indexOf("{S}")>=0,a=function(t){var a=this.sourceCoordinate(t);if(!a)return null;var u=e;if(i){var s=parseInt(a.zoom+a.row+a.column,10)%n.length;u=u.replace("{S}",n[s])}return o?u.replace("{Z}",a.zoom.toFixed(0)).replace("{Q}",r(a.row,a.column,a.zoom)):u.replace("{Z}",a.zoom.toFixed(0)).replace("{X}",a.column.toFixed(0)).replace("{Y}",a.row.toFixed(0))};t.MapProvider.call(this,a)},t.Template.prototype={getTile:function(t){return this.getTileUrl(t)}},t.extend(t.Template,t.MapProvider),t.TemplatedLayer=function(e,n,r){return new t.Layer(new t.Template(e,n),null,r)},t.getMousePoint=function(e,n){var r=new t.Point(e.clientX,e.clientY);r.x+=document.body.scrollLeft+document.documentElement.scrollLeft,r.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var o=n.parent;o;o=o.offsetParent)r.x-=o.offsetLeft,r.y-=o.offsetTop;return r},t.MouseWheelHandler=function(){function e(e){var i=0;o=o||(new Date).getTime();try{r.scrollTop=1e3,r.dispatchEvent(e),i=1e3-r.scrollTop}catch(u){i=e.wheelDelta||5*-e.detail}var s=(new Date).getTime()-o,l=t.getMousePoint(e,n);return Math.abs(i)>0&&s>200&&!a?(n.zoomByAbout(i>0?1:-1,l),o=(new Date).getTime()):a&&n.zoomByAbout(.001*i,l),t.cancelEvent(e)}var n,r,o,i={id:"MouseWheelHandler"},a=!1;return i.init=function(o){n=o,r=document.body.appendChild(document.createElement("div")),r.style.cssText="visibility:hidden;top:0;height:0;width:0;overflow-y:scroll";var a=r.appendChild(document.createElement("div"));return a.style.height="2000px",t.addEvent(n.parent,"mousewheel",e),i},i.precise=function(t){return arguments.length?(a=t,i):a},i.remove=function(){t.removeEvent(n.parent,"mousewheel",e),r.parentNode.removeChild(r)},i},t.DoubleClickHandler=function(){function e(e){var r=t.getMousePoint(e,n);return n.zoomByAbout(e.shiftKey?-1:1,r),t.cancelEvent(e)}var n,r={id:"DoubleClickHandler"};return r.init=function(o){return n=o,t.addEvent(n.parent,"dblclick",e),r},r.remove=function(){t.removeEvent(n.parent,"dblclick",e)},r},t.DragHandler=function(){function e(e){return e.shiftKey||2==e.button?void 0:(t.addEvent(document,"mouseup",n),t.addEvent(document,"mousemove",r),o=new t.Point(e.clientX,e.clientY),i.parent.style.cursor="move",t.cancelEvent(e))}function n(e){return t.removeEvent(document,"mouseup",n),t.removeEvent(document,"mousemove",r),o=null,i.parent.style.cursor="",t.cancelEvent(e)}function r(e){return o&&(i.panBy(e.clientX-o.x,e.clientY-o.y),o.x=e.clientX,o.y=e.clientY,o.t=+new Date),t.cancelEvent(e)}var o,i,a={id:"DragHandler"};return a.init=function(n){return i=n,t.addEvent(i.parent,"mousedown",e),a},a.remove=function(){t.removeEvent(i.parent,"mousedown",e)},a},t.MouseHandler=function(){var e,n={id:"MouseHandler",handlers:[]};return n.init=function(r){return e=r,n.handlers=[t.DragHandler().init(e),t.DoubleClickHandler().init(e),t.MouseWheelHandler().init(e)],n},n.remove=function(){for(var t=0;n.handlers.length>t;t++)n.handlers[t].remove();return n.handlers=[],n},n},t.TouchHandler=function(){function e(){var t=document.createElement("div");return t.setAttribute("ongesturestart","return;"),"function"==typeof t.ongesturestart}function n(t){for(var e=0;t.touches.length>e;e+=1){var n=t.touches[e];if(n.identifier in v){var r=v[n.identifier];r.x=n.clientX,r.y=n.clientY,r.scale=t.scale}else v[n.identifier]={scale:t.scale,startPos:{x:n.clientX,y:n.clientY},x:n.clientX,y:n.clientY,time:(new Date).getTime()}}}function r(t){n(t)}function o(e){switch(e.touches.length){case 1:l(e.touches[0]);break;case 2:c(e)}return n(e),t.cancelEvent(e)}function i(e){var n=(new Date).getTime();0===e.touches.length&&b&&f(x);for(var r=0;e.changedTouches.length>r;r+=1){var o=e.changedTouches[r],i=v[o.identifier];if(i&&!i.wasPinch){var s={x:o.clientX,y:o.clientY},l=n-i.time,c=t.Point.distance(s,i.startPos);c>m||(l>d?(s.end=n,s.duration=l,a(s)):(s.time=n,u(s)))}}for(var h={},p=0;e.touches.length>p;p++)h[e.touches[p].identifier]=!0;for(var g in v)g in h||delete h[g];return t.cancelEvent(e)}function a(){}function u(t){return y.length&&g>t.time-y[0].time?(s(t),y=[],void 0):(y=[t],void 0)}function s(e){var n=h.getZoom(),r=Math.round(n)+1,o=r-n,i=new t.Point(e.x,e.y);h.zoomByAbout(o,i)}function l(t){var e={x:t.clientX,y:t.clientY},n=v[t.identifier];h.panBy(e.x-n.x,e.y-n.y)}function c(e){var n=e.touches[0],r=e.touches[1],o=new t.Point(n.clientX,n.clientY),i=new t.Point(r.clientX,r.clientY),a=v[n.identifier],u=v[r.identifier];a.wasPinch=!0,u.wasPinch=!0;var s=t.Point.interpolate(o,i,.5);h.zoomByAbout(Math.log(e.scale)/Math.LN2-Math.log(a.scale)/Math.LN2,s);var l=t.Point.interpolate(a,u,.5);h.panBy(s.x-l.x,s.y-l.y),b=!0,x=s}function f(t){if(w){var e=h.getZoom(),n=Math.round(e);h.zoomByAbout(n-e,t)}b=!1}var h,p={id:"TouchHandler"},d=250,m=30,g=350,v={},y=[],w=!0,b=!1,x=null;return p.init=function(n){return h=n,e()?(t.addEvent(h.parent,"touchstart",r),t.addEvent(h.parent,"touchmove",o),t.addEvent(h.parent,"touchend",i),p):p},p.remove=function(){return e()?(t.removeEvent(h.parent,"touchstart",r),t.removeEvent(h.parent,"touchmove",o),t.removeEvent(h.parent,"touchend",i),p):p},p},t.CallbackManager=function(t,e){this.owner=t,this.callbacks={};for(var n=0;e.length>n;n++)this.callbacks[e[n]]=[]},t.CallbackManager.prototype={owner:null,callbacks:null,addCallback:function(t,e){"function"==typeof e&&this.callbacks[t]&&this.callbacks[t].push(e)},removeCallback:function(t,e){if("function"==typeof e&&this.callbacks[t])for(var n=this.callbacks[t],r=n.length,o=0;r>o;o++)if(n[o]===e){n.splice(o,1);break}},dispatchCallback:function(t,e){if(this.callbacks[t])for(var n=0;this.callbacks[t].length>n;n+=1)try{this.callbacks[t][n](this.owner,e)}catch(r){}}},t.RequestManager=function(){this.loadingBay=document.createDocumentFragment(),this.requestsById={},this.openRequestCount=0,this.maxOpenRequests=4,this.requestQueue=[],this.callbackManager=new t.CallbackManager(this,["requestcomplete","requesterror"])},t.RequestManager.prototype={loadingBay:null,requestsById:null,requestQueue:null,openRequestCount:null,maxOpenRequests:null,callbackManager:null,addCallback:function(t,e){this.callbackManager.addCallback(t,e)},removeCallback:function(t,e){this.callbackManager.removeCallback(t,e)},dispatchCallback:function(t,e){this.callbackManager.dispatchCallback(t,e)},clear:function(){this.clearExcept({})},clearRequest:function(t){t in this.requestsById&&delete this.requestsById[t];for(var e=0;this.requestQueue.length>e;e++){var n=this.requestQueue[e];n&&n.id==t&&(this.requestQueue[e]=null)}},clearExcept:function(t){for(var e=0;this.requestQueue.length>e;e++){var n=this.requestQueue[e];!n||n.id in t||(this.requestQueue[e]=null)}for(var r=this.loadingBay.childNodes,o=r.length-1;o>=0;o--){var i=r[o];i.id in t||(this.loadingBay.removeChild(i),this.openRequestCount--,i.src=i.coord=i.onload=i.onerror=null)}for(var a in this.requestsById)if(!(a in t)&&this.requestsById.hasOwnProperty(a)){var u=this.requestsById[a];delete this.requestsById[a],null!==u&&(u=u.id=u.coord=u.url=null)}},hasRequest:function(t){return t in this.requestsById},requestTile:function(t,e,n){if(!(t in this.requestsById)){var r={id:t,coord:e.copy(),url:n};this.requestsById[t]=r,n&&this.requestQueue.push(r)}},getProcessQueue:function(){if(!this._processQueue){var t=this;this._processQueue=function(){t.processQueue()}}return this._processQueue},processQueue:function(t){for(t&&this.requestQueue.length>8&&this.requestQueue.sort(t);this.openRequestCount<this.maxOpenRequests&&this.requestQueue.length>0;){var e=this.requestQueue.pop();if(e){this.openRequestCount++;var n=document.createElement("img");n.id=e.id,n.style.position="absolute",n.coord=e.coord,this.loadingBay.appendChild(n),n.onload=n.onerror=this.getLoadComplete(),n.src=e.url,e=e.id=e.coord=e.url=null}}},_loadComplete:null,getLoadComplete:function(){if(!this._loadComplete){var t=this;this._loadComplete=function(e){e=e||window.event;var n=e.srcElement||e.target;n.onload=n.onerror=null,t.loadingBay.removeChild(n),t.openRequestCount--,delete t.requestsById[n.id],"load"===e.type&&(n.complete||n.readyState&&"complete"==n.readyState)?t.dispatchCallback("requestcomplete",n):(t.dispatchCallback("requesterror",{element:n,url:""+n.src}),n.src=null),setTimeout(t.getProcessQueue(),0)}}return this._loadComplete}},t.Layer=function(e,n,r){this.parent=n||document.createElement("div"),this.parent.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0; z-index: 0",this.name=r,this.levels={},this.requestManager=new t.RequestManager,this.requestManager.addCallback("requestcomplete",this.getTileComplete()),this.requestManager.addCallback("requesterror",this.getTileError()),e&&this.setProvider(e)},t.Layer.prototype={map:null,parent:null,name:null,enabled:!0,tiles:null,levels:null,requestManager:null,provider:null,_tileComplete:null,getTileComplete:function(){if(!this._tileComplete){var t=this;this._tileComplete=function(e,n){t.tiles[n.id]=n,t.positionTile(n),n.style.visibility="inherit",n.className="map-tile-loaded"}}return this._tileComplete},getTileError:function(){if(!this._tileError){var t=this;
this._tileError=function(e,n){n.onload=n.onerror=null,t.tiles[n.element.id]=n.element,t.positionTile(n.element),n.element.style.visibility="hidden"}}return this._tileError},draw:function(){function e(t,e){if(t&&e){var r=t.coord,o=e.coord;if(r.zoom==o.zoom){var i=Math.abs(n.row-r.row-.5)+Math.abs(n.column-r.column-.5),a=Math.abs(n.row-o.row-.5)+Math.abs(n.column-o.column-.5);return a>i?1:i>a?-1:0}return r.zoom<o.zoom?1:r.zoom>o.zoom?-1:0}return t?1:e?-1:0}if(this.enabled&&this.map){var n=this.map.coordinate.zoomTo(Math.round(this.map.coordinate.zoom)),r=Math.round(this.map.coordinate.zoom),o=this.map.pointCoordinate(new t.Point(0,0)).zoomTo(r).container(),i=this.map.pointCoordinate(this.map.dimensions).zoomTo(r).container().right().down(),a={},u=this.createOrGetLevel(o.zoom),s=o.copy();for(s.column=o.column;s.column<i.column;s.column++)for(s.row=o.row;s.row<i.row;s.row++)for(var l=this.inventoryVisibleTile(u,s);l.length;)a[l.pop()]=!0;for(var c in this.levels)if(this.levels.hasOwnProperty(c)){var f=parseInt(c,10);if(f>=o.zoom-5&&o.zoom+2>f)continue;var h=this.levels[c];h.style.display="none";for(var p=this.tileElementsInLevel(h);p.length;)this.provider.releaseTile(p[0].coord),this.requestManager.clearRequest(p[0].coord.toKey()),h.removeChild(p[0]),p.shift()}for(var d=o.zoom-5,m=o.zoom+2,g=d;m>g;g++)this.adjustVisibleLevel(this.levels[g],g,a);this.requestManager.clearExcept(a),this.requestManager.processQueue(e)}},inventoryVisibleTile:function(t,e){var n=e.toKey(),r=[n];if(n in this.tiles){var o=this.tiles[n];return o.parentNode!=t&&(t.appendChild(o),"reAddTile"in this.provider&&this.provider.reAddTile(n,e,o)),r}if(!this.requestManager.hasRequest(n)){var i=this.provider.getTile(e);"string"==typeof i?this.addTileImage(n,e,i):i&&this.addTileElement(n,e,i)}for(var a=!1,u=e.zoom,s=1;u>=s;s++){var l=e.zoomBy(-s).container(),c=l.toKey();if(c in this.tiles){r.push(c),a=!0;break}}if(!a){var f=e.zoomBy(1);r.push(f.toKey()),f.column+=1,r.push(f.toKey()),f.row+=1,r.push(f.toKey()),f.column-=1,r.push(f.toKey())}return r},tileElementsInLevel:function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e.push(n);return e},adjustVisibleLevel:function(e,n,r){if(e){var o=1,i=this.map.coordinate.copy();if(!(e.childNodes.length>0))return e.style.display="none",!1;e.style.display="block",o=Math.pow(2,this.map.coordinate.zoom-n),i=i.zoomTo(n);for(var a=this.map.tileSize.x*o,u=this.map.tileSize.y*o,s=new t.Point(.5*this.map.dimensions.x,.5*this.map.dimensions.y),l=this.tileElementsInLevel(e);l.length;){var c=l.pop();r[c.id]?t.moveElement(c,{x:Math.round(s.x+(c.coord.column-i.column)*a),y:Math.round(s.y+(c.coord.row-i.row)*u),scale:o,width:this.map.tileSize.x,height:this.map.tileSize.y}):(this.provider.releaseTile(c.coord),this.requestManager.clearRequest(c.coord.toKey()),e.removeChild(c))}}},createOrGetLevel:function(t){if(t in this.levels)return this.levels[t];var e=document.createElement("div");return e.id=this.parent.id+"-zoom-"+t,e.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0;",e.style.zIndex=t,this.parent.appendChild(e),this.levels[t]=e,e},addTileImage:function(t,e,n){this.requestManager.requestTile(t,e,n)},addTileElement:function(t,e,n){n.id=t,n.coord=e.copy(),this.positionTile(n)},positionTile:function(e){var n=this.map.coordinate.zoomTo(e.coord.zoom);e.style.cssText="position:absolute;-webkit-user-select:none;-webkit-user-drag:none;-moz-user-drag:none;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;width:"+this.map.tileSize.x+"px; height: "+this.map.tileSize.y+"px;",e.ondragstart=function(){return!1};var r=Math.pow(2,this.map.coordinate.zoom-e.coord.zoom);t.moveElement(e,{x:Math.round(.5*this.map.dimensions.x+(e.coord.column-n.column)*this.map.tileSize.x*r),y:Math.round(.5*this.map.dimensions.y+(e.coord.row-n.row)*this.map.tileSize.y*r),scale:r,width:this.map.tileSize.x,height:this.map.tileSize.y});var o=this.levels[e.coord.zoom];o.appendChild(e),Math.round(this.map.coordinate.zoom)==e.coord.zoom&&(o.style.display="block"),this.requestRedraw()},_redrawTimer:void 0,requestRedraw:function(){this._redrawTimer||(this._redrawTimer=setTimeout(this.getRedraw(),1e3))},_redraw:null,getRedraw:function(){if(!this._redraw){var t=this;this._redraw=function(){t.draw(),t._redrawTimer=0}}return this._redraw},setProvider:function(t){var e=null===this.provider;if(!e){this.requestManager.clear();for(var n in this.levels)if(this.levels.hasOwnProperty(n))for(var r=this.levels[n];r.firstChild;)this.provider.releaseTile(r.firstChild.coord),r.removeChild(r.firstChild)}this.tiles={},this.provider=t,e||this.draw()},enable:function(){return this.enabled=!0,this.parent.style.display="",this.draw(),this},disable:function(){return this.enabled=!1,this.requestManager.clear(),this.parent.style.display="none",this},destroy:function(){this.requestManager.clear(),this.requestManager.removeCallback("requestcomplete",this.getTileComplete()),this.requestManager.removeCallback("requesterror",this.getTileError()),this.provider=null,this.parent.parentNode&&this.parent.parentNode.removeChild(this.parent),this.map=null}},t.Map=function(e,n,r,o){if("string"==typeof e&&(e=document.getElementById(e),!e))throw"The ID provided to modest maps could not be found.";this.parent=e,this.parent.style.padding="0",this.parent.style.overflow="hidden";var i=t.getStyle(this.parent,"position");"relative"!=i&&"absolute"!=i&&(this.parent.style.position="relative"),this.layers=[],n||(n=[]),n instanceof Array||(n=[n]);for(var a=0;n.length>a;a++)this.addLayer(n[a]);if(this.projection=new t.MercatorProjection(0,t.deriveTransformation(-Math.PI,Math.PI,0,0,Math.PI,Math.PI,1,0,-Math.PI,-Math.PI,0,1)),this.tileSize=new t.Point(256,256),this.coordLimits=[new t.Coordinate(0,-1/0,0),new t.Coordinate(1,1/0,0).zoomTo(18)],this.coordinate=new t.Coordinate(.5,.5,0),r?(this.autoSize=!1,this.parent.style.width=Math.round(r.x)+"px",this.parent.style.height=Math.round(r.y)+"px"):(r=new t.Point(this.parent.offsetWidth,this.parent.offsetHeight),this.autoSize=!0,t.addEvent(window,"resize",this.windowResize())),this.dimensions=r,this.callbackManager=new t.CallbackManager(this,["zoomed","panned","centered","extentset","resized","drawn"]),void 0===o)this.eventHandlers=[t.MouseHandler().init(this),t.TouchHandler().init(this)];else if(this.eventHandlers=o,o instanceof Array)for(var u=0;o.length>u;u++)o[u].init(this)},t.Map.prototype={parent:null,dimensions:null,projection:null,coordinate:null,tileSize:null,coordLimits:null,layers:null,callbackManager:null,eventHandlers:null,autoSize:null,toString:function(){return"Map(#"+this.parent.id+")"},addCallback:function(t,e){return this.callbackManager.addCallback(t,e),this},removeCallback:function(t,e){return this.callbackManager.removeCallback(t,e),this},dispatchCallback:function(t,e){return this.callbackManager.dispatchCallback(t,e),this},getHandler:function(t,e){var n=null,r=this.eventHandlers;if(e===!0){if(r=this.getHandler("MouseHandler",!1),!r)return n;r=r.handlers}if(!r)return n;for(var o=0;r.length>o;o++)if("string"==typeof r[o].id&&r[o].id===t){n=r[o];break}return n||"boolean"==typeof e?n:this.getHandler(t,!0)},disableHandler:function(t){var e=this.getHandler(t);return e&&"function"==typeof e.remove&&e.remove(),this},enableHandler:function(t){var e=this.getHandler(t);return e&&"function"==typeof e.remove&&e.init(this),this},removeHandler:function(t){var e=this.getHandler(t),n=this.eventHandlers.indexOf(e);if(-1===n){var r=this.getHandler("MouseHandler");return n=r.handlers.indexOf(e),-1!==n&&(e.remove(),r.handlers.splice(n,1)),void 0}return e.remove(),this.eventHandlers.splice(n,1),e},addHandler:function(t){if(t.init(this),"string"!=typeof t.id)throw Error("Handler lacks the required id attribute");return this.eventHandlers.push(t),this},windowResize:function(){if(!this._windowResize){var e=this;this._windowResize=function(){e.dimensions=new t.Point(e.parent.offsetWidth,e.parent.offsetHeight),e.draw(),e.dispatchCallback("resized",[e.dimensions])}}return this._windowResize},setZoomRange:function(t,e){return this.coordLimits[0]=this.coordLimits[0].zoomTo(t),this.coordLimits[1]=this.coordLimits[1].zoomTo(e),this},zoomBy:function(e){return this.coordinate=this.enforceLimits(this.coordinate.zoomBy(e)),t.getFrame(this.getRedraw()),this.dispatchCallback("zoomed",e),this},zoomIn:function(){return this.zoomBy(1)},zoomOut:function(){return this.zoomBy(-1)},setZoom:function(t){return this.zoomBy(t-this.coordinate.zoom)},zoomByAbout:function(t,e){var n=this.pointLocation(e);this.coordinate=this.enforceLimits(this.coordinate.zoomBy(t));var r=this.locationPoint(n);return this.dispatchCallback("zoomed",t),this.panBy(e.x-r.x,e.y-r.y)},panBy:function(e,n){return this.coordinate.column-=e/this.tileSize.x,this.coordinate.row-=n/this.tileSize.y,this.coordinate=this.enforceLimits(this.coordinate),t.getFrame(this.getRedraw()),this.dispatchCallback("panned",[e,n]),this},panLeft:function(){return this.panBy(100,0)},panRight:function(){return this.panBy(-100,0)},panDown:function(){return this.panBy(0,-100)},panUp:function(){return this.panBy(0,100)},setCenter:function(t){return this.setCenterZoom(t,this.coordinate.zoom)},setCenterZoom:function(e,n){return this.coordinate=this.projection.locationCoordinate(e).zoomTo(parseFloat(n)||0),this.coordinate=this.enforceLimits(this.coordinate),t.getFrame(this.getRedraw()),this.dispatchCallback("centered",[e,n]),this},extentCoordinate:function(e,n){e instanceof t.Extent&&(e=e.toArray());for(var r,o,i=0;e.length>i;i++){var a=this.projection.locationCoordinate(e[i]);r?(r.row=Math.min(r.row,a.row),r.column=Math.min(r.column,a.column),r.zoom=Math.min(r.zoom,a.zoom),o.row=Math.max(o.row,a.row),o.column=Math.max(o.column,a.column),o.zoom=Math.max(o.zoom,a.zoom)):(r=a.copy(),o=a.copy())}var u=this.dimensions.x+1,s=this.dimensions.y+1,l=(o.column-r.column)/(u/this.tileSize.x),c=Math.log(l)/Math.log(2),f=r.zoom-(n?c:Math.ceil(c)),h=(o.row-r.row)/(s/this.tileSize.y),p=Math.log(h)/Math.log(2),d=r.zoom-(n?p:Math.ceil(p)),m=Math.min(f,d);m=Math.min(m,this.coordLimits[1].zoom),m=Math.max(m,this.coordLimits[0].zoom);var g=(r.row+o.row)/2,v=(r.column+o.column)/2,y=r.zoom;return new t.Coordinate(g,v,y).zoomTo(m)},setExtent:function(e,n){return this.coordinate=this.extentCoordinate(e,n),this.coordinate=this.enforceLimits(this.coordinate),t.getFrame(this.getRedraw()),this.dispatchCallback("extentset",e),this},setSize:function(e){return this.dimensions=new t.Point(e.x,e.y),this.parent.style.width=Math.round(this.dimensions.x)+"px",this.parent.style.height=Math.round(this.dimensions.y)+"px",this.autoSize&&(t.removeEvent(window,"resize",this.windowResize()),this.autoSize=!1),this.draw(),this.dispatchCallback("resized",this.dimensions),this},coordinatePoint:function(e){e.zoom!=this.coordinate.zoom&&(e=e.zoomTo(this.coordinate.zoom));var n=new t.Point(this.dimensions.x/2,this.dimensions.y/2);return n.x+=this.tileSize.x*(e.column-this.coordinate.column),n.y+=this.tileSize.y*(e.row-this.coordinate.row),n},pointCoordinate:function(t){var e=this.coordinate.copy();return e.column+=(t.x-this.dimensions.x/2)/this.tileSize.x,e.row+=(t.y-this.dimensions.y/2)/this.tileSize.y,e},locationCoordinate:function(t){return this.projection.locationCoordinate(t)},coordinateLocation:function(t){return this.projection.coordinateLocation(t)},locationPoint:function(t){return this.coordinatePoint(this.locationCoordinate(t))},pointLocation:function(t){return this.coordinateLocation(this.pointCoordinate(t))},getExtent:function(){return new t.Extent(this.pointLocation(new t.Point(0,0)),this.pointLocation(this.dimensions))},extent:function(t,e){return t?this.setExtent(t,e):this.getExtent()},getCenter:function(){return this.projection.coordinateLocation(this.coordinate)},center:function(t){return t?this.setCenter(t):this.getCenter()},getZoom:function(){return this.coordinate.zoom},zoom:function(t){return void 0!==t?this.setZoom(t):this.getZoom()},getLayers:function(){return this.layers.slice()},getLayer:function(t){for(var e=0;this.layers.length>e;e++)if(t==this.layers[e].name)return this.layers[e]},getLayerAt:function(t){return this.layers[t]},addLayer:function(e){return this.layers.push(e),this.parent.appendChild(e.parent),e.map=this,this.coordinate&&t.getFrame(this.getRedraw()),this},removeLayer:function(t){for(var e=0;this.layers.length>e;e++)if(t==this.layers[e]||t==this.layers[e].name){this.removeLayerAt(e);break}return this},setLayerAt:function(e,n){if(0>e||e>=this.layers.length)throw Error("invalid index in setLayerAt(): "+e);if(this.layers[e]!=n){if(this.layers.length>e){var r=this.layers[e];this.parent.insertBefore(n.parent,r.parent),r.destroy()}else this.parent.appendChild(n.parent);this.layers[e]=n,n.map=this,t.getFrame(this.getRedraw())}return this},insertLayerAt:function(e,n){if(0>e||e>this.layers.length)throw Error("invalid index in insertLayerAt(): "+e);if(e==this.layers.length)this.layers.push(n),this.parent.appendChild(n.parent);else{var r=this.layers[e];this.parent.insertBefore(n.parent,r.parent),this.layers.splice(e,0,n)}return n.map=this,t.getFrame(this.getRedraw()),this},removeLayerAt:function(t){if(0>t||t>=this.layers.length)throw Error("invalid index in removeLayer(): "+t);var e=this.layers[t];return this.layers.splice(t,1),e.destroy(),this},swapLayersAt:function(t,e){if(0>t||t>=this.layers.length||0>e||e>=this.layers.length)throw Error("invalid index in swapLayersAt(): "+index);var n=this.layers[t],r=this.layers[e],o=document.createElement("div");return this.parent.replaceChild(o,r.parent),this.parent.replaceChild(r.parent,n.parent),this.parent.replaceChild(n.parent,o),this.layers[t]=r,this.layers[e]=n,this},enableLayer:function(t){var e=this.getLayer(t);return e&&e.enable(),this},enableLayerAt:function(t){var e=this.getLayerAt(t);return e&&e.enable(),this},disableLayer:function(t){var e=this.getLayer(t);return e&&e.disable(),this},disableLayerAt:function(t){var e=this.getLayerAt(t);return e&&e.disable(),this},enforceZoomLimits:function(t){var e=this.coordLimits;if(e){var n=e[0].zoom,r=e[1].zoom;n>t.zoom?t=t.zoomTo(n):t.zoom>r&&(t=t.zoomTo(r))}return t},enforcePanLimits:function(e){if(this.coordLimits){e=e.copy();var n=this.coordLimits[0].zoomTo(e.zoom),r=this.coordLimits[1].zoomTo(e.zoom),o=this.pointCoordinate(new t.Point(0,0)).zoomTo(e.zoom),i=this.pointCoordinate(this.dimensions).zoomTo(e.zoom);r.row-n.row<i.row-o.row?e.row=(r.row+n.row)/2:o.row<n.row?e.row+=n.row-o.row:i.row>r.row&&(e.row-=i.row-r.row),r.column-n.column<i.column-o.column?e.column=(r.column+n.column)/2:o.column<n.column?e.column+=n.column-o.column:i.column>r.column&&(e.column-=i.column-r.column)}return e},enforceLimits:function(t){return this.enforcePanLimits(this.enforceZoomLimits(t))},draw:function(){if(this.coordinate=this.enforceLimits(this.coordinate),0>=this.dimensions.x||0>=this.dimensions.y){if(!this.autoSize)return;var e=this.parent.offsetWidth,n=this.parent.offsetHeight;if(this.dimensions=new t.Point(e,n),0>=e||0>=n)return}for(var r=0;this.layers.length>r;r++)this.layers[r].draw();this.dispatchCallback("drawn")},_redrawTimer:void 0,requestRedraw:function(){this._redrawTimer||(this._redrawTimer=setTimeout(this.getRedraw(),1e3))},_redraw:null,getRedraw:function(){if(!this._redraw){var t=this;this._redraw=function(){t.draw(),t._redrawTimer=0}}return this._redraw},destroy:function(){for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();this.layers=[],this.projection=null;for(var n=0;this.eventHandlers.length>n;n++)this.eventHandlers[n].remove();this.autoSize&&t.removeEvent(window,"resize",this.windowResize())}},t.mapByCenterZoom=function(e,n,r,o){var i=t.coerceLayer(n),a=new t.Map(e,i,!1);return a.setCenterZoom(r,o).draw(),a},t.mapByExtent=function(e,n,r,o){var i=t.coerceLayer(n),a=new t.Map(e,i,!1);return a.setExtent([r,o]).draw(),a},"undefined"!=typeof module&&module.exports&&(module.exports={Point:t.Point,Projection:t.Projection,MercatorProjection:t.MercatorProjection,LinearProjection:t.LinearProjection,Transformation:t.Transformation,Location:t.Location,MapProvider:t.MapProvider,Template:t.Template,Coordinate:t.Coordinate,deriveTransformation:t.deriveTransformation})})(MM),!function(t,e,n){"undefined"!=typeof module?module.exports=n(t,e):"function"==typeof define&&"object"==typeof define.amd?define(n):e[t]=n(t,e)}("bean",this,function(t,e){var n=window,r=e[t],o=/over|out/,i=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,u="addEventListener",s="attachEvent",l="removeEventListener",c="detachEvent",f=document||{},h=f.documentElement||{},p=h[u],d=p?u:s,m=Array.prototype.slice,g=/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,v=/mouse.*(wheel|scroll)/i,y=/^text/i,w=/^touch|^gesture/i,b={one:1},x=function(t,e,n){for(n=0;e.length>n;n++)t[e[n]]=1;return t}({},("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(p?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),M=function(){function t(t,e){for(;null!==(e=e.parentNode);)if(e===t)return!0;return!1}function e(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(""+this)&&!t(this,n):null===n}return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),_=function(){var t="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),e=t.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),n=e.concat("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis".split(" ")),r=t.concat("char charCode key keyCode keyIdentifier keyLocation".split(" ")),i=t.concat(["data"]),a=t.concat("touches targetTouches changedTouches scale rotation".split(" ")),u="preventDefault",s=function(t){return function(){t[u]?t[u]():t.returnValue=!1}},l="stopPropagation",c=function(t){return function(){t[l]?t[l]():t.cancelBubble=!0}},p=function(t){return function(){t[u](),t[l](),t.stopped=!0}},d=function(t,e,n){var r,o;for(r=n.length;r--;)o=n[r],!(o in e)&&o in t&&(e[o]=t[o])};return function(m,b){var x={originalEvent:m,isNative:b};if(!m)return x;var M,_=m.type,T=m.target||m.srcElement;return x[u]=s(m),x[l]=c(m),x.stop=p(x),x.target=T&&3===T.nodeType?T.parentNode:T,b&&(-1!==_.indexOf("key")?(M=r,x.keyCode=m.which||m.keyCode):g.test(_)?(M=e,x.rightClick=3===m.which||2===m.button,x.pos={x:0,y:0},m.pageX||m.pageY?(x.clientX=m.pageX,x.clientY=m.pageY):(m.clientX||m.clientY)&&(x.clientX=m.clientX+f.body.scrollLeft+h.scrollLeft,x.clientY=m.clientY+f.body.scrollTop+h.scrollTop),o.test(_)&&(x.relatedTarget=m.relatedTarget||m[("mouseover"===_?"from":"to")+"Element"])):w.test(_)?M=a:v.test(_)?M=n:y.test(_)&&(M=i),d(m,x,M||t)),x}}(),T=function(t,e){return p||e||t!==f&&t!==n?t:h},E=function(){function t(t,e,n,r,o){this.element=t,this.type=e,this.handler=n,this.original=r,this.namespaces=o,this.custom=M[e],this.isNative=x[e]&&t[d],this.eventType=p||this.isNative?e:"propertychange",this.customType=!p&&!this.isNative&&e,this.target=T(t,this.isNative),this.eventSupport=this.target[d]}return t.prototype={inNamespaces:function(t){var e,n;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)if(t[e]===this.namespaces[n])return!0;return!1},matches:function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)}},t}(),C=function(){var t={},e=function(n,r,o,i,a){if(r&&"*"!==r){var u,s=0,l=t["$"+r],c="*"===n;if(!l)return;for(u=l.length;u>s;s++)if((c||l[s].matches(n,o,i))&&!a(l[s],l,s,r))return}else for(var f in t)"$"===f.charAt(0)&&e(n,f.substr(1),o,i,a)},n=function(e,n,r){var o,i=t["$"+n];if(i)for(o=i.length;o--;)if(i[o].matches(e,r,null))return!0;return!1},r=function(t,n,r){var o=[];return e(t,n,r,null,function(t){return o.push(t)}),o},o=function(e){return(t["$"+e.type]||(t["$"+e.type]=[])).push(e),e},i=function(n){e(n.element,n.type,null,n.handler,function(e,n,r){return n.splice(r,1),0===n.length&&delete t["$"+e.type],!1})},a=function(){var e,n=[];for(e in t)"$"===e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:r,put:o,del:i,entries:a}}(),z=p?function(t,e,n,r){t[r?u:l](e,n,!1)}:function(t,e,n,r,o){o&&r&&null===t["_on"+o]&&(t["_on"+o]=0),t[r?s:c]("on"+e,n)},S=function(t,e,r){return function(o){return o=_(o||((this.ownerDocument||this.document||this).parentWindow||n).event,!0),e.apply(t,[o].concat(r))}},k=function(t,e,r,o,i,a){return function(u){(o?o.apply(this,arguments):p?!0:u&&u.propertyName==="_on"+r||!u)&&(u&&(u=_(u||((this.ownerDocument||this.document||this).parentWindow||n).event,a)),e.apply(t,!u||i&&0!==i.length?m.call(arguments,u?0:1).concat(i):arguments))}},L=function(t,e,n,r,o){return function(){t(e,n,o),r.apply(this,arguments)}},A=function(t,e,n,r){var o,i,u,s=e&&e.replace(a,""),l=C.get(t,s,n);for(o=0,i=l.length;i>o;o++)l[o].inNamespaces(r)&&((u=l[o]).eventSupport&&z(u.target,u.eventType,u.handler,!1,u.type),C.del(u))},P=function(t,e,n,r,o){var u,s=e.replace(a,""),l=e.replace(i,"").split(".");return C.has(t,s,n)?t:("unload"===s&&(n=L(A,t,s,n,r)),M[s]&&(M[s].condition&&(n=k(t,n,s,M[s].condition,!0)),s=M[s].base||s),u=C.put(new E(t,s,n,r,l[0]&&l)),u.handler=u.isNative?S(t,u.handler,o):k(t,u.handler,s,!1,o,!1),u.eventSupport&&z(u.target,u.eventType,u.handler,!0,u.customType),void 0)},N=function(t,e,n){return function(r){var o,i,a="string"==typeof t?n(t,this):t;for(o=r.target;o&&o!==this;o=o.parentNode)for(i=a.length;i--;)if(a[i]===o)return e.apply(o,arguments)}},q=function(t,e,n){var r,o,u,s,l=A,c=e&&"string"==typeof e;if(c&&e.indexOf(" ")>0){for(e=e.split(" "),s=e.length;s--;)q(t,e[s],n);return t}if(o=c&&e.replace(a,""),o&&M[o]&&(o=M[o].type),!e||c)(u=c&&e.replace(i,""))&&(u=u.split(".")),l(t,o,n,u);else if("function"==typeof e)l(t,null,e);else for(r in e)e.hasOwnProperty(r)&&q(t,r,e[r]);return t},j=function(t,e,n,r,o){var i,a,u,s,l=n,c=n&&"string"==typeof n;if(e&&!n&&"object"==typeof e)for(i in e)e.hasOwnProperty(i)&&j.apply(this,[t,i,e[i]]);else for(s=arguments.length>3?m.call(arguments,3):[],a=(c?n:e).split(" "),c&&(n=N(e,l=r,o))&&(s=m.call(s,1)),this===b&&(n=L(q,t,e,n,l)),u=a.length;u--;)P(t,a[u],n,l,s);return t},I=function(){return j.apply(b,arguments)},H=p?function(t,e,r){var o=f.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,n,1),r.dispatchEvent(o)}:function(t,e,n){n=T(n,t),t?n.fireEvent("on"+e,f.createEventObject()):n["_on"+e]++},O=function(t,e,n){var r,o,u,s,l,c=e.split(" ");for(r=c.length;r--;)if(e=c[r].replace(a,""),(s=c[r].replace(i,""))&&(s=s.split(".")),s||n||!t[d])for(l=C.get(t,e),n=[!1].concat(n),o=0,u=l.length;u>o;o++)l[o].inNamespaces(s)&&l[o].handler.apply(t,n);else H(x[e],e,t);return t},D=function(t,e,n){for(var r=0,o=C.get(e,n),i=o.length;i>r;r++)o[r].original&&j(t,o[r].type,o[r].original);return t},R={add:j,one:I,remove:q,clone:D,fire:O,noConflict:function(){return e[t]=r,this}};if(n[s]){var F=function(){var t,e=C.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&q(e[t].element,e[t].type);n[c]("onunload",F),n.CollectGarbage&&n.CollectGarbage()};n[s]("onunload",F)}return R});var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noembed:4,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0},html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=function(t){function e(t){if(t=c(t),f.hasOwnProperty(t))return f[t];var e=t.match(p);return e?String.fromCharCode(parseInt(e[1],10)):(e=t.match(d))?String.fromCharCode(parseInt(e[1],16)):""}function n(t,n){return e(n)}function r(t){return t.replace(m,"")}function o(t){return t.replace(g,n)}function i(t){return t.replace(v,"&amp;").replace(w,"&lt;").replace(b,"&gt;").replace(x,"&#34;").replace(M,"&#61;")}function a(t){return t.replace(y,"&amp;$1").replace(w,"&lt;").replace(b,"&gt;")}function u(e){return function(n,i){n+="";var u=null,s=!1,l=[],f=void 0,h=void 0,p=void 0;for(e.startDoc&&e.startDoc(i);n;){var d=n.match(s?_:T);if(n=n.substring(d[0].length),s){if(d[1]){var m,g=c(d[1]);if(d[2]){var v=d[3];switch(v.charCodeAt(0)){case 34:case 39:v=v.substring(1,v.length-1)}m=o(r(v))}else m=g;l.push(g,m)}else if(d[4]){if(void 0!==h&&(p?e.startTag&&e.startTag(f,l,i):e.endTag&&e.endTag(f,i)),p&&h&(t.eflags.CDATA|t.eflags.RCDATA)){u=null===u?c(n):u.substring(u.length-n.length);var y=u.indexOf("</"+f);0>y&&(y=n.length),y&&(h&t.eflags.CDATA?e.cdata&&e.cdata(n.substring(0,y),i):e.rcdata&&e.rcdata(a(n.substring(0,y)),i),n=n.substring(y))}f=h=p=void 0,l.length=0,s=!1}}else if(d[1])e.pcdata&&e.pcdata(d[0],i);else if(d[3])p=!d[2],s=!0,f=c(d[3]),h=t.ELEMENTS.hasOwnProperty(f)?t.ELEMENTS[f]:void 0;else if(d[4])e.pcdata&&e.pcdata(d[4],i);else if(d[5]&&e.pcdata){var w=d[5];e.pcdata("<"===w?"&lt;":">"===w?"&gt;":"&amp;",i)}}e.endDoc&&e.endDoc(i)}}function s(e){var n,r;return u({startDoc:function(){n=[],r=!1},startTag:function(o,a,u){if(!r&&t.ELEMENTS.hasOwnProperty(o)){var s=t.ELEMENTS[o];if(!(s&t.eflags.FOLDABLE)){if(s&t.eflags.UNSAFE)return r=!(s&t.eflags.EMPTY),void 0;if(a=e(o,a)){s&t.eflags.EMPTY||n.push(o),u.push("<",o);for(var l=0,c=a.length;c>l;l+=2){var f=a[l],h=a[l+1];null!==h&&void 0!==h&&u.push(" ",f,'="',i(h),'"')}u.push(">")}}}},endTag:function(e,o){if(r)return r=!1,void 0;if(t.ELEMENTS.hasOwnProperty(e)){var i=t.ELEMENTS[e];if(!(i&(t.eflags.UNSAFE|t.eflags.EMPTY|t.eflags.FOLDABLE))){var a;if(i&t.eflags.OPTIONAL_ENDTAG)for(a=n.length;--a>=0;){var u=n[a];if(u===e)break;if(!(t.ELEMENTS[u]&t.eflags.OPTIONAL_ENDTAG))return}else for(a=n.length;--a>=0&&n[a]!==e;);if(0>a)return;for(var s=n.length;--s>a;){var u=n[s];t.ELEMENTS[u]&t.eflags.OPTIONAL_ENDTAG||o.push("</",u,">")}n.length=a,o.push("</",e,">")}}},pcdata:function(t,e){r||e.push(t)},rcdata:function(t,e){r||e.push(t)},cdata:function(t,e){r||e.push(t)},endDoc:function(t){for(var e=n.length;--e>=0;)t.push("</",n[e],">");n.length=0}})}function l(e,n,r){var o=[];return s(function(e,o){for(var i=0;o.length>i;i+=2){var a,u=o[i],s=o[i+1],l=null;if(a=e+"::"+u,(t.ATTRIBS.hasOwnProperty(a)||(a="*::"+u,t.ATTRIBS.hasOwnProperty(a)))&&(l=t.ATTRIBS[a]),null!==l)switch(l){case t.atype.NONE:break;
case t.atype.SCRIPT:case t.atype.STYLE:s=null;break;case t.atype.ID:case t.atype.IDREF:case t.atype.IDREFS:case t.atype.GLOBAL_NAME:case t.atype.LOCAL_NAME:case t.atype.CLASSES:s=r?r(s):s;break;case t.atype.URI:var c=(""+s).match(E);s=c?!c[1]||h.test(c[1])?n&&n(s):null:null;break;case t.atype.URI_FRAGMENT:s&&"#"===s.charAt(0)?(s=r?r(s):s,s&&(s="#"+s)):s=null;break;default:s=null}else s=null;o[i+1]=s}return o})(e,o),o.join("")}var c;c="script"==="SCRIPT".toLowerCase()?function(t){return t.toLowerCase()}:function(t){return t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))})};var f={lt:"<",gt:">",amp:"&",nbsp:"",quot:'"',apos:"'"},h=/^(?:https?|mailto|data)$/i,p=/^#(\d+)$/,d=/^#x([0-9A-Fa-f]+)$/,m=/\0/g,g=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,v=/&/g,y=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,w=/</g,b=/>/g,x=/\"/g,M=/\=/g,_=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[\\s\\S][^a-z\\s>]*)","i"),T=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i"),E=RegExp("^(?:([^:/?#]+):)?");return{escapeAttrib:i,makeHtmlSanitizer:s,makeSaxParser:u,normalizeRCData:a,sanitize:l,unescapeEntities:o}}(html4),html_sanitize=html.sanitize;"undefined"!=typeof window&&(window.html=html,window.html_sanitize=html_sanitize),html4.ATTRIBS["*::style"]=0,html4.ELEMENTS.style=0,html4.ATTRIBS["a::target"]=0,html4.ELEMENTS.video=0,html4.ATTRIBS["video::src"]=0,html4.ATTRIBS["video::poster"]=0,html4.ATTRIBS["video::controls"]=0,html4.ELEMENTS.audio=0,html4.ATTRIBS["audio::src"]=0,html4.ATTRIBS["video::autoplay"]=0,html4.ATTRIBS["video::controls"]=0;var Mustache;(function(t){"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define?define(t):Mustache=t})(function(){function t(t,e){return RegExp.prototype.test.call(t,e)}function e(e){return!t(m,e)}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t){return(t+"").replace(/[&<>"'\/]/g,function(t){return b[t]})}function o(t){this.string=t,this.tail=t,this.pos=0}function i(t,e){this.view=t,this.parent=e,this.clearCache()}function a(){this.clearCache()}function u(t){for(var e,n=t[3],r=n;(e=t[4])&&e.length;)t=e[e.length-1],r=t[3];return[n,r]}function s(t){function e(t,e,n){if(!r[t]){var o=s(e);r[t]=function(t,e){return o(t,e,n)}}return r[t]}function n(n,r,o){for(var i,a,s="",l=0,c=t.length;c>l;++l)switch(i=t[l],i[0]){case"#":a=o.slice.apply(o,u(i)),s+=n._section(i[1],r,a,e(l,i[4],o));break;case"^":s+=n._inverted(i[1],r,e(l,i[4],o));break;case">":s+=n._partial(i[1],r);break;case"&":s+=n._name(i[1],r);break;case"name":s+=n._escaped(i[1],r);break;case"text":s+=i[1]}return s}var r={};return n}function l(t){for(var e,n,r=[],o=r,i=[],a=0;t.length>a;++a)switch(e=t[a],e[0]){case"#":case"^":e[4]=[],i.push(e),o.push(e),o=e[4];break;case"/":if(0===i.length)throw Error("Unopened section: "+e[1]);if(n=i.pop(),n[1]!==e[1])throw Error("Unclosed section: "+n[1]);o=i.length>0?i[i.length-1][4]:r;break;default:o.push(e)}if(n=i.pop())throw Error("Unclosed section: "+n[1]);return r}function c(t){for(var e,n,r=0;t.length>r;++r)e=t[r],n&&"text"===n[0]&&"text"===e[0]?(n[1]+=e[1],n[3]=e[3],t.splice(r--,1)):n=e}function f(t){if(2!==t.length)throw Error("Invalid tags: "+t.join(" "));return[RegExp(n(t[0])+"\\s*"),RegExp("\\s*"+n(t[1]))]}var h={};h.name="mustache.js",h.version="0.7.0",h.tags=["{{","}}"],h.Scanner=o,h.Context=i,h.Writer=a;var p=/\s*/,d=/\s+/,m=/\S/,g=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,w=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.escape=r,o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},o.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},i.make=function(t){return t instanceof i?t:new i(t)},i.prototype.clearCache=function(){this._cache={}},i.prototype.push=function(t){return new i(t,this)},i.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var n=this;n;){if(t.indexOf(".")>0){var r=t.split("."),o=0;for(e=n.view;e&&r.length>o;)e=e[r[o++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},a.prototype.clearCache=function(){this._cache={},this._partialCache={}},a.prototype.compile=function(t,e){return this._compile(this._cache,t,t,e)},a.prototype.compilePartial=function(t,e,n){return this._compile(this._partialCache,t,e,n)},a.prototype.render=function(t,e,n){return this.compile(t)(e,n)},a.prototype._compile=function(t,e,n,r){if(!t[e]){var o=h.parse(n,r),a=s(o),u=this;t[e]=function(t,e){if(e)if("function"==typeof e)u._loadPartial=e;else for(var r in e)u.compilePartial(r,e[r]);return a(u,i.make(t),n)}}return t[e]},a.prototype._section=function(t,e,n,r){var o=e.lookup(t);switch(typeof o){case"object":if(w(o)){for(var i="",a=0,u=o.length;u>a;++a)i+=r(this,e.push(o[a]));return i}return o?r(this,e.push(o)):"";case"function":var s=this,l=function(t){return s.render(t,e)};return o.call(e.view,n,l)||"";default:if(o)return r(this,e)}return""},a.prototype._inverted=function(t,e,n){var r=e.lookup(t);return!r||w(r)&&0===r.length?n(this,e):""},a.prototype._partial=function(t,e){t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t));var n=this._partialCache[t];return n?n(e):""},a.prototype._name=function(t,e){var n=e.lookup(t);return"function"==typeof n&&(n=n.call(e.view)),null==n?"":n+""},a.prototype._escaped=function(t,e){return h.escape(this._name(t,e))},h.parse=function(t,r){function i(){if(_&&!T)for(;M.length;)x.splice(M.pop(),1);else M=[];_=!1,T=!1}r=r||h.tags;for(var a,u,s,m,w=f(r),b=new o(t),x=[],M=[],_=!1,T=!1;!b.eos();){if(a=b.pos,s=b.scanUntil(w[0]))for(var E=0,C=s.length;C>E;++E)m=s.charAt(E),e(m)?M.push(x.length):T=!0,x.push(["text",m,a,a+1]),a+=1,"\n"===m&&i();if(a=b.pos,!b.scan(w[0]))break;if(_=!0,u=b.scan(y)||"name",b.scan(p),"="===u)s=b.scanUntil(g),b.scan(g),b.scanUntil(w[1]);else if("{"===u){var z=RegExp("\\s*"+n("}"+r[1]));s=b.scanUntil(z),b.scan(v),b.scanUntil(w[1]),u="&"}else s=b.scanUntil(w[1]);if(!b.scan(w[1]))throw Error("Unclosed tag at "+b.pos);x.push([u,s,a,b.pos]),("name"===u||"{"===u||"&"===u)&&(T=!0),"="===u&&(r=s.split(d),w=f(r))}return c(x),l(x)};var x=new a;return h.clearCache=function(){return x.clearCache()},h.compile=function(t,e){return x.compile(t,e)},h.compilePartial=function(t,e,n){return x.compilePartial(t,e,n)},h.render=function(t,e,n){return x.render(t,e,n)},h.to_html=function(t,e,n,r){var o=h.render(t,e,n);return"function"!=typeof r?o:(r(o),void 0)},h}()),!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):this[t]=e()}("reqwest",function(){function handleReadyState(t,e,n){return function(){t&&4==t[readyState]&&(twoHundo.test(t.status)?e(t):n(t))}}function setHeaders(t,e){var n,r=e.headers||{};r.Accept=r.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"],!e.crossOrigin&&!r[requestedWith]&&(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||(r[contentType]=e.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&t.setRequestHeader(n,r[n])}function setCredentials(t,e){e.withCredentials!==void 0&&t.withCredentials!==void 0&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,n,r){var o=uniqid++,i=t.jsonpCallback||"callback",a=t.jsonpCallbackName||reqwest.getcallbackPrefix(o),u=RegExp("((^|\\?|&)"+i+")=([^&]+)"),s=r.match(u),l=doc.createElement("script"),c=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");s?"?"===s[3]?r=r.replace(u,"$1="+a):a=s[3]:r=urlappend(r,i+"="+a),win[a]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,l.onreadystatechange!==void 0&&!f&&(l.event="onclick",l.htmlFor=l.id="_reqwest_"+o),l.onload=l.onreadystatechange=function(){return l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c?!1:(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t.success&&t.success(lastValue),lastValue=void 0,head.removeChild(l),c=1,void 0)},head.appendChild(l)}function getRequest(t,e,n){var r,o=(t.method||"GET").toUpperCase(),i="string"==typeof t?t:t.url,a=t.processData!==!1&&t.data&&"string"!=typeof t.data?reqwest.toQueryString(t.data):t.data||null;return("jsonp"==t.type||"GET"==o)&&a&&(i=urlappend(i,a),a=null),"jsonp"==t.type?handleJsonp(t,e,n,i):(r=xhr(),r.open(o,i,!0),setHeaders(r,t),setCredentials(r,t),r.onreadystatechange=handleReadyState(r,e,n),t.before&&t.before(r),r.send(a),r)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){var e=t.match(/\.(json|jsonp|html|xml)(\?|$)/);return e?e[1]:"js"}function init(o,fn){function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var r=resp.responseText;if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp);self._fulfillmentHandlers.length>0;)self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(t,e,n){for(self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,n);complete(t)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&this._fulfillmentHandlers.push(function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest(o,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var n=t.name,r=t.tagName.toLowerCase(),o=function(t){t&&!t.disabled&&e(n,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&n)switch(r){case"input":if(!/reset|button|image|file/i.test(t.type)){var i=/checkbox/i.test(t.type),a=/radio/i.test(t.type),u=t.value;(!i&&!a||t.checked)&&e(n,normalize(i&&""===u?"on":u))}break;case"textarea":e(n,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())o(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(var s=0;t.length&&t.length>s;s++)t.options[s].selected&&o(t.options[s])}}function eachFormElement(){var t,e,n,r=this,o=function(t,e){for(var o=0;e.length>o;o++){var i=t[byTag](e[o]);for(n=0;i.length>n;n++)serial(i[n],r)}};for(e=0;arguments.length>e;e++)t=arguments[e],/input|select|textarea/i.test(t.tagName)&&serial(t,r),o(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply(function(e,n){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(n)):t[e]=n},arguments),t}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=win[xmlHttpRequest]?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return this._fulfilled?t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply(function(e,n){t.push({name:e,value:n})},arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e,n=Array.prototype.slice.call(arguments,0);return t=n.pop(),t&&t.nodeType&&n.push(t)&&(t=null),t&&(t=t.type),e="map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString,e.apply(null,n)},reqwest.toQueryString=function(t){var e,n="",r=encodeURIComponent,o=function(t,e){n+=r(t)+"="+r(e)+"&"};if(isArray(t))for(e=0;t&&t.length>e;e++)o(t[e].name,t[e].value);else for(var i in t)if(Object.hasOwnProperty.call(t,i)){var a=t[i];if(isArray(a))for(e=0;a.length>e;e++)o(i,a[e]);else o(i,t[i])}return n.replace(/&$/,"").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest}),wax=wax||{},wax.attribution=function(){var t={},e=document.createElement("div");return e.className="map-attribution",t.content=function(t){return t===void 0?e.innerHTML:(e.innerHTML=wax.u.sanitize(t),this)},t.element=function(){return e},t.init=function(){return this},t},wax=wax||{},wax.bwdetect=function(t,e){function n(){wax.bw=-1;var t=new Image;t.src=a;var e=!0,n=setTimeout(function(){e&&-1==wax.bw&&(r.bw(0),e=!1)},o);t.onload=function(){e&&-1==wax.bw&&(clearTimeout(n),r.bw(1),e=!1)}}var r={},o=t.threshold||400,a="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+ +new Date,u=1,s=void 0===t.auto?!0:t.auto;return r.bw=function(t){return arguments.length?(wax.bwlisteners&&wax.bwlisteners.length&&function(){for(listeners=wax.bwlisteners,wax.bwlisteners=[],i=0;listeners>i;i++)listeners[i](t)}(),wax.bw=t,u!=(u=t)&&e(t),void 0):u},r.add=function(){return s&&n(),this},-1==wax.bw?(wax.bwlisteners=wax.bwlisteners||[],wax.bwlisteners.push(r.bw)):void 0!==wax.bw?r.bw(wax.bw):r.add(),r},wax.formatter=function(x){var formatter={},f;if(x&&"string"==typeof x)try{eval("f = "+x)}catch(e){console&&console.log(e)}else f=x&&"function"==typeof x?x:function(){};return formatter.format=function(t,e){try{return wax.u.sanitize(f(t,e))}catch(n){console&&console.log(n)}},formatter},wax.gi=function(t,e){function n(t){return t>=93&&t--,t>=35&&t--,t-=32}e=e||{};var r={},o=e.resolution||4,i=e.tileSize||256;return r.grid_tile=function(){return t},r.getKey=function(e,r){return!t||!t.grid||0>r||0>e||Math.floor(r)>=i||Math.floor(e)>=i?void 0:n(t.grid[Math.floor(r/o)].charCodeAt(Math.floor(e/o)))},r.gridFeature=function(e,n){var r=this.getKey(e,n),o=t.keys;return o&&o[r]&&t.data[o[r]]?t.data[o[r]]:void 0},r.tileFeature=function(e,n,r){if(t){var o=wax.u.offset(r);return feature=this.gridFeature(e-o.left,n-o.top)}},r},wax.gm=function(){function t(t){return"string"==typeof t&&(t=[t]),function(e){if(e){var n=RegExp("/(\\d+)\\/(\\d+)\\/(\\d+)\\.[\\w\\._]+"),r=n.exec(e);if(r)return t[parseInt(r[2],10)%t.length].replace(/\{z\}/g,r[1]).replace(/\{x\}/g,r[2]).replace(/\{y\}/g,r[3])}}}var e,n,r=4,o={},i=function(t){return t?t.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json"):void 0};return o.formatter=function(t){return arguments.length?(n=wax.formatter(t),o):n},o.template=function(t){return arguments.length?(n=wax.template(t),o):n},o.gridUrl=function(e){return arguments.length?(i=e?"function"==typeof e?e:t(e):function(){return null},o):i},o.getGrid=function(t,e){var a=i(t);return n&&a?(wax.request.get(a,function(t,o){return t?e(t,null):(e(null,wax.gi(o,{formatter:n,resolution:r})),void 0)}),o):e(null,null)},o.tilejson=function(t){return arguments.length?(t.template?o.template(t.template):t.formatter?o.formatter(t.formatter):n=void 0,o.gridUrl(t.grids),t.resolution&&(r=t.resolution),e=t,o):e},o},wax=wax||{},wax.hash=function(t){function e(){return location.hash.substring(1)}function n(t){var e=window.location;e.replace((""+e).replace(e.hash||/$/,"#"+t))}function r(e){for(var n=e.split("/"),r=0;n.length>r;r++)if(n[r]=Number(n[r]),isNaN(n[r]))return!0;return 3>n.length?!0:(3==n.length&&t.setCenterZoom(n),void 0)}function o(){var e=t.getCenterZoom();a!==e&&(a=e,n(a))}function i(t){t!==a&&r(a=t)&&o()}t=t||{};var a,u={},s=wax.u.throttle(o,500);return u.add=function(){return i(e()),t.bindChange(s),u},u.remove=function(){return t.unbindChange(s),u},u},wax=wax||{},wax.interaction=function(){function t(t){for(var e=s(),n=0;e.length>n;n++)if(e[n][0]<t.y&&e[n][0]+256>t.y&&e[n][1]<t.x&&e[n][1]+256>t.x)return e[n][2];return!1}function e(){return g?(window.clearTimeout(g),g=null,!0):!1}function n(t){if(!m){var e=wax.u.eventoffset(t);d.screen_feature(e,function(e){e?bean.fire(d,"on",{parent:f(),data:e,formatter:p.formatter().format,e:t}):bean.fire(d,"off")})}}function r(){m=!1}function o(t){m=!0,u=wax.u.eventoffset(t),"mousedown"===t.type?(bean.add(document.body,"click",a),bean.add(document.body,"mouseup",r)):"touchstart"===t.type&&1===t.touches.length&&(bean.fire(d,"off"),bean.add(t.srcElement,w))}function i(t){bean.remove(t.srcElement,w),m=!1}function a(t){var n={},r=wax.u.eventoffset(t);m=!1;for(var o in t)n[o]=t[o];return bean.remove(document.body,"mouseup",a),bean.remove(t.srcElement,w),"touchend"===t.type?d.click(t,u):Math.round(r.y/v)===Math.round(u.y/v)&&Math.round(r.x/v)===Math.round(u.x/v)&&(g?e():g=window.setTimeout(function(){g=null,d.click(n,r)},300)),a}var u,s,l,c,f,h,p=wax.gm(),d={},m=!1,g=null,v=4,y={mousemove:n,touchstart:o,mousedown:o},w={touchend:a,touchmove:a,touchcancel:i};return d.click=function(t,e){d.screen_feature(e,function(e){e&&bean.fire(d,"on",{parent:f(),data:e,formatter:p.formatter().format,e:t})})},d.screen_feature=function(e,n){var r=t(e);r||n(null),p.getGrid(r.src,function(t,o){if(t||!o)return n(null);var i=o.tileFeature(e.x,e.y,r);n(i)})},d.attach=function(t){return arguments.length?(l=t,d):l},d.detach=function(t){return arguments.length?(c=t,d):c},d.map=function(t){return arguments.length?(h=t,l&&l(h),bean.add(f(),y),bean.add(f(),"touchstart",o),d):h},d.grid=function(t){return arguments.length?(s=t,d):s},d.remove=function(){return c&&c(h),bean.remove(f(),y),bean.fire(d,"remove"),d},d.tilejson=function(t){return arguments.length?(p.tilejson(t),d):p.tilejson()},d.formatter=function(){return p.formatter()},d.on=function(t,e){return bean.add(d,t,e),d},d.off=function(t,e){return bean.remove(d,t,e),d},d.gridmanager=function(t){return arguments.length?(p=t,d):p},d.parent=function(t){return f=t,d},d};var wax=wax||{};wax.legend=function(){var t,e,n={};return n.element=function(){return e},n.content=function(e){return arguments.length?(t.innerHTML=wax.u.sanitize(e),t.style.display="block",""===t.innerHTML&&(t.style.display="none"),n):t.innerHTML},n.add=function(){return e=document.createElement("div"),e.className="map-legends wax-legends",t=e.appendChild(document.createElement("div")),t.className="map-legend wax-legend",t.style.display="none",n},n.add()};var wax=wax||{};wax.location=function(){function t(t){if("mousemove"!==t.e.type&&t.e.type){var e=t.formatter({format:"location"},t.data);e&&(window.top.location.href=e)}}var e={};return e.events=function(){return{on:t}},e};var wax=wax||{};wax.movetip={},wax.movetip=function(){function t(t){var e=wax.u.eventoffset(t);i.height+e.y>a.top+a.height&&a.height>i.height&&(e.y-=i.height,u.className+=" flip-y"),i.width+e.x>a.left+a.width&&(e.x-=i.width,u.className+=" flip-x"),u.style.left=e.x+"px",u.style.top=e.y+"px"}function e(t){var e=document.createElement("div");return e.className="map-tooltip map-tooltip-0",e.innerHTML=t,e}function n(){u&&(u.parentNode.removeChild(u),u=null)}function r(r){var o;if(!l){if("mousemove"!==r.e.type&&r.e.type){if(o=r.formatter({format:"teaser"},r.data),!o)return;n();var c=document.body.appendChild(e(o));c.className+=" map-popup";var f=c.appendChild(document.createElement("a"));f.href="#close",f.className="close",f.innerHTML="Close",l=!0,u=c,i=wax.u.offset(u),a=wax.u.offset(s),t(r.e),bean.add(f,"click touchend",function(t){t.stop(),n(),l=!1})}else{if(o=r.formatter({format:"teaser"},r.data),!o)return;n(),s.style.cursor="pointer",u=document.body.appendChild(e(o))}u&&(i=wax.u.offset(u),a=wax.u.offset(s),t(r.e))}}function o(){s.style.cursor="default",l||n()}var i,a,u,s,l=!1,c={};return c.parent=function(t){return arguments.length?(s=t,c):s},c.events=function(){return{on:r,off:o}},c};var wax=wax||{};if(wax.request={cache:{},locks:{},promises:{},get:function(t,e){if(this.cache[t])return e(this.cache[t][0],this.cache[t][1]);if(this.promises[t]=this.promises[t]||[],this.promises[t].push(e),!this.locks[t]){var n=this;this.locks[t]=!0,reqwest({url:t+(~t.indexOf("?")?"&":"?")+"callback=?",type:"jsonp",success:function(e){n.locks[t]=!1,n.cache[t]=[null,e];for(var r=0;n.promises[t].length>r;r++)n.promises[t][r](n.cache[t][0],n.cache[t][1])},error:function(e){n.locks[t]=!1,n.cache[t]=[e,null];for(var r=0;n.promises[t].length>r;r++)n.promises[t][r](n.cache[t][0],n.cache[t][1])}})}}},wax.template=function(t){var e={};return e.format=function(e,n){var r={};for(var o in n)r[o]=n[o];return e.format&&(r["__"+e.format+"__"]=!0),wax.u.sanitize(Mustache.to_html(t,r))},e},!wax)var wax={};wax.tilejson=function(t,e){reqwest({url:t+(~t.indexOf("?")?"&":"?")+"callback=?",type:"jsonp",success:e,error:e})};var wax=wax||{};wax.tooltip={},wax.tooltip=function(){function t(t){var e=document.createElement("div");return e.className="map-tooltip map-tooltip-0 wax-tooltip",e.innerHTML=t,e}function e(){this.parentNode&&this.parentNode.removeChild(this)}function n(){for(var t;t=f.pop();)l&&a?(bean.add(t,a,e),t.className+=" map-fade"):t.parentNode&&t.parentNode.removeChild(t)}function r(e){var r;if("mousemove"!==e.e.type&&e.e.type){if(r=e.content||e.formatter({format:"full"},e.data),!r&&(e.e.type&&e.e.type.match(/touch/)&&(r=e.content||e.formatter({format:"teaser"},e.data)),!r))return;n(),u.style.cursor="pointer";var o=u.appendChild(t(r));o.className+=" map-popup wax-popup";var a=o.appendChild(document.createElement("a"));a.href="#close",a.className="close",a.innerHTML="Close",s=!0,f.push(o),bean.add(a,"touchstart mousedown",function(t){t.stop()}),bean.add(a,"click touchend",function(t){t.stop(),n(),s=!1})}else if(!s){if(r=e.content||e.formatter({format:"teaser"},e.data),!r||r==i)return;n(),u.style.cursor="pointer",f.push(u.appendChild(t(r))),i=r}}function o(){u.style.cursor="default",i=null,s||n()}var i,a,u,s=!1,l=!1,c={},f=[];return void 0!==document.body.style["-webkit-transition"]?a="webkitTransitionEnd":void 0!==document.body.style.MozTransition&&(a="transitionend"),c.parent=function(t){return arguments.length?(u=t,c):u},c.animate=function(t){return arguments.length?(l=t,c):l},c.events=function(){return{on:r,off:o}},c};var wax=wax||{};wax.u={offset:function(t){var e=t.offsetWidth||parseInt(t.style.width,10),n=t.offsetHeight||parseInt(t.style.height,10),r=document.body,o=0,i=0,a=function(t){if(t!==r&&t!==document.documentElement){o+=t.offsetTop,i+=t.offsetLeft;var e=t.style.transform||t.style.WebkitTransform||t.style.OTransform||t.style.MozTransform||t.style.msTransform;if(e){var n;if(n=e.match(/translate\((.+)[px]?, (.+)[px]?\)/))o+=parseInt(n[2],10),i+=parseInt(n[1],10);else if(n=e.match(/translate3d\((.+)[px]?, (.+)[px]?, (.+)[px]?\)/))o+=parseInt(n[2],10),i+=parseInt(n[1],10);else if(n=e.match(/matrix3d\(([\-\d,\s]+)\)/)){var a=n[1].split(",");o+=parseInt(a[13],10),i+=parseInt(a[12],10)}else(n=e.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/))&&(o+=parseInt(n[2],10),i+=parseInt(n[1],10))}}};if(t.getBoundingClientRect!==void 0){var u=document.body,s=t.ownerDocument.documentElement,l=document.clientTop||u.clientTop||0,c=document.clientLeft||u.clientLeft||0,f=window.pageYOffset||s.scrollTop,h=window.pageXOffset||s.scrollLeft,p=t.getBoundingClientRect();o=p.top+f-l,i=p.left+h-c}else{a(t);try{for(;t=t.offsetParent;)a(t)}catch(d){}}o+=r.offsetTop,i+=r.offsetLeft,o+=r.parentNode.offsetTop,i+=r.parentNode.offsetLeft;var m=document.defaultView?window.getComputedStyle(r.parentNode,null):r.parentNode.currentStyle;return r.parentNode.offsetTop===parseInt(m.marginTop,10)||isNaN(parseInt(m.marginTop,10))||(o+=parseInt(m.marginTop,10),i+=parseInt(m.marginLeft,10)),{top:o,left:i,height:n,width:e}},$:function(t){return"string"==typeof t?document.getElementById(t):t},eventoffset:function(t){return t||(t=window.event),t.pageX||t.pageY?{x:t.pageX,y:t.pageY}:t.clientX||t.clientY?{x:t.clientX,y:t.clientY}:t.touches&&1===t.touches.length?{x:t.touches[0].pageX,y:t.touches[0].pageY}:void 0},limit:function(t,e,n){var r;return function(){var o=this,i=arguments,a=function(){r=null,t.apply(o,i)};n&&clearTimeout(r),(n||!r)&&(r=setTimeout(a,e))}},throttle:function(t,e){return this.limit(t,e,!1)},sanitize:function(t){function e(t){return/^(https?:\/\/|data:image)/.test(t)?t:void 0}function n(t){return t}return t?html_sanitize(t,e,n):""}},wax=wax||{},wax.mm=wax.mm||{},wax.mm.attribution=function(){var t,e={},n=document.createElement("div");return n.className="map-attribution map-mm",e.content=function(t){return t===void 0?n.innerHTML:(n.innerHTML=wax.u.sanitize(t),e)},e.element=function(){return n},e.map=function(n){return arguments.length?(t=n,e):t},e.add=function(){return t?(t.parent.appendChild(n),e):!1},e.remove=function(){return t?(n.parentNode&&n.parentNode.removeChild(n),e):!1},e.appendTo=function(t){return wax.u.$(t).appendChild(n),e},e},wax=wax||{},wax.mm=wax.mm||{},wax.mm.boxselector=function(){function t(t){var e=new MM.Point(t.clientX,t.clientY);e.x+=document.body.scrollLeft+document.documentElement.scrollLeft,e.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var n=p.parent;n;n=n.offsetParent)e.x-=n.offsetLeft,e.y-=n.offsetTop;return e}function e(e){return e.shiftKey?(s=l=t(e),m=g=!0,f.left=s.x+"px",f.top=s.y+"px",f.width=f.height=0,y(document,"mousemove",r),y(document,"mouseup",o),p.parent.style.cursor="crosshair",MM.cancelEvent(e)):void 0}function n(e){var n=t(e),i={x:parseInt(c.offsetLeft,10),y:parseInt(c.offsetTop,10)},a={x:i.x+parseInt(c.offsetWidth,10),y:i.y+parseInt(c.offsetHeight,10)};return m=v>=n.x-i.x||v>=a.x-n.x,g=v>=n.y-i.y||v>=a.y-n.y,g||m?(s={x:n.x-i.x<a.x-n.x?a.x:i.x,y:n.y-i.y<a.y-n.y?a.y:i.y},l={x:n.x-i.x<a.x-n.x?i.x:a.x,y:n.y-i.y<a.y-n.y?i.y:a.y},y(document,"mousemove",r),y(document,"mouseup",o),MM.cancelEvent(e)):void 0}function r(e){var n=t(e);return f.display="block",m&&(f.left=(n.x<s.x?n.x:s.x)+"px",f.width=Math.abs(n.x-s.x)-2*d+"px"),g&&(f.top=(n.y<s.y?n.y:s.y)+"px",f.height=Math.abs(n.y-s.y)-2*d+"px"),a(n,p.parent),MM.cancelEvent(e)}function o(e){var n=t(e),i=p.pointLocation(new MM.Point(m?n.x:l.x,g?n.y:l.y));l2=p.pointLocation(s),b.extent([new MM.Location(Math.max(i.lat,l2.lat),Math.min(i.lon,l2.lon)),new MM.Location(Math.min(i.lat,l2.lat),Math.max(i.lon,l2.lon))]),w(document,"mousemove",r),w(document,"mouseup",o),p.parent.style.cursor="auto"}function i(e){a(t(e),c)}function a(t,e){var n={x:parseInt(c.offsetLeft,10),y:parseInt(c.offsetTop,10)},r={x:n.x+parseInt(c.offsetWidth,10),y:n.y+parseInt(c.offsetHeight,10)},o="";v>=t.y-n.y?o="n":v>=r.y-t.y&&(o="s"),v>=t.x-n.x?o+="w":v>=r.x-t.x&&(o+="e"),""!==o&&(o+="-resize"),e.style.cursor=o}function u(t){if(c&&h){var e=t.locationPoint(h[1]),n=t.locationPoint(h[0]),r=c.style;r.display="block",r.height="auto",r.width="auto",r.left=Math.max(0,n.x)+"px",r.top=Math.max(0,n.y)+"px",r.right=Math.max(0,t.dimensions.x-e.x)+"px",r.bottom=Math.max(0,t.dimensions.y-e.y)+"px"}}var s,l,c,f,h,p,d=0,m=!1,g=!1,v=5,y=MM.addEvent,w=MM.removeEvent,b={},x=new MM.CallbackManager(b,["change"]);return b.addCallback=function(t,e){return x.addCallback(t,e),b},b.removeCallback=function(t,e){return x.removeCallback(t,e),b},b.extent=function(t,e){return t?(h=[new MM.Location(Math.max(t[0].lat,t[1].lat),Math.min(t[0].lon,t[1].lon)),new MM.Location(Math.min(t[0].lat,t[1].lat),Math.max(t[0].lon,t[1].lon))],u(p),e||x.dispatchCallback("change",h),void 0):h},c=document.createElement("div"),c.className="boxselector-box",f=c.style,b.add=function(){return c.id=p.parent.id+"-boxselector-box",p.parent.appendChild(c),d=parseInt(window.getComputedStyle(c).borderWidth,10),y(p.parent,"mousedown",e),y(c,"mousedown",n),y(p.parent,"mousemove",i),p.addCallback("drawn",u),b},b.map=function(t){return arguments.length?(p=t,b):p},b.remove=function(){return p.parent.removeChild(c),w(p.parent,"mousedown",e),w(c,"mousedown",n),w(p.parent,"mousemove",i),p.removeCallback("drawn",u),b},b},wax=wax||{},wax.mm=wax.mm||{},wax._={},wax.mm.bwdetect=function(t,e){e=e||{};var n=e.png||".png128",r=e.jpg||".jpg70";return wax._.bw_png=n,wax._.bw_jpg=r,wax.bwdetect(e,function(e){wax._.bw=!e;for(var n=0;t.layers.length>n;n++)t.getLayerAt(n).provider instanceof wax.mm.connector&&t.getLayerAt(n).setProvider(t.getLayerAt(n).provider)})},wax=wax||{},wax.mm=wax.mm||{},wax.mm.fullscreen=function(){function t(t){t&&t.stop(),r?o.original():o.full()}var e,n,r=!1,o={},i=document.createElement("a"),a=document.body;return i.className="map-fullscreen",i.href="#fullscreen",o.map=function(t){return arguments.length?(e=t,o):e},o.add=function(){return bean.add(i,"click",t),e.parent.appendChild(i),o},o.remove=function(){return bean.remove(i,"click",t),i.parentNode&&i.parentNode.removeChild(i),o},o.full=function(){return r?void 0:(r=!0,n=e.dimensions,e.parent.className+=" map-fullscreen-map",a.className+=" map-fullscreen-view",e.dimensions={x:e.parent.offsetWidth,y:e.parent.offsetHeight},e.draw(),o)},o.original=function(){return r?(r=!1,e.parent.className=e.parent.className.replace(" map-fullscreen-map",""),a.className=a.className.replace(" map-fullscreen-view",""),e.dimensions=n,e.draw(),o):void 0},o.fullscreen=function(t){return arguments.length?(t&&!r?o.full():!t&&r&&o.original(),o):r},o.element=function(){return i},o.appendTo=function(t){return wax.u.$(t).appendChild(i),o},o},wax=wax||{},wax.mm=wax.mm||{},wax.mm.hash=function(){var t,e=wax.hash({getCenterZoom:function(){var e=t.getCenter(),n=t.getZoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return[n.toFixed(2),e.lat.toFixed(r),e.lon.toFixed(r)].join("/")},setCenterZoom:function(e){t.setCenterZoom(new MM.Location(e[1],e[2]),e[0])},bindChange:function(e){t.addCallback("drawn",e)},unbindChange:function(e){t.removeCallback("drawn",e)}});return e.map=function(n){return arguments.length?(t=n,e):t},e},wax=wax||{},wax.mm=wax.mm||{},wax.mm.interaction=function(){function t(){if(!a&&void 0!==o&&o.length)return o;for(var t,e=0;i.getLayers().length>e;e++){var n=i.getLayerAt(e).levels,r=n&&n[Math.round(i.zoom())];if(void 0!==r&&(t=i.getLayerAt(e).tileElementsInLevel(r),t.length))break}return o=function(t){var e=[];for(var n in t)if(t[n].parentNode===r){var o=wax.u.offset(t[n]);
e.push([o.top,o.left,t[n]])}return e}(t)}function e(){a=!0}function n(t){if(!arguments.length)return i;i=t;for(var n=0;u.length>n;n++)i.addCallback(u[n],e)}function r(){for(var t=0;u.length>t;t++)i.removeCallback(u[t],e)}var o,i,a=!1,u=["zoomed","panned","centered","extentset","resized","drawn"];return wax.interaction().attach(n).detach(r).parent(function(){return i.parent}).grid(t)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.legend=function(){var t,e={},n=document.createElement("div");n.className="wax-legends map-legends";var r=n.appendChild(document.createElement("div"));return r.className="wax-legend map-legend",r.style.display="none",e.content=function(t){return arguments.length?(r.innerHTML=wax.u.sanitize(t),r.style.display="block",""===r.innerHTML&&(r.style.display="none"),e):r.innerHTML},e.element=function(){return n},e.map=function(n){return arguments.length?(t=n,e):t},e.add=function(){return t?(e.appendTo(t.parent),e):!1},e.remove=function(){return n.parentNode&&n.parentNode.removeChild(n),e},e.appendTo=function(t){return wax.u.$(t).appendChild(n),e},e},wax=wax||{},wax.mm=wax.mm||{},wax.mm.pointselector=function(){function t(t){var e=wax.u.eventoffset(t),n=new MM.Point(e.x,e.y),r={x:parseFloat(MM.getStyle(document.documentElement,"margin-left")),y:parseFloat(MM.getStyle(document.documentElement,"margin-top"))};isNaN(r.x)||(n.x-=r.x),isNaN(r.y)||(n.y-=r.y);for(var o=i.parent;o;o=o.offsetParent)n.x-=o.offsetLeft,n.y-=o.offsetTop;return n}function e(t){for(var e=[],n=0;t.length>n;n++)e.push(new MM.Location(t[n].lat,t[n].lon));return e}function n(){new MM.Point(0,0);for(var t=0;f.length>t;t++){var e=i.locationPoint(f[t]);f[t].pointDiv||(f[t].pointDiv=document.createElement("div"),f[t].pointDiv.className="map-point-div",f[t].pointDiv.style.position="absolute",f[t].pointDiv.style.display="block",f[t].pointDiv.location=f[t],bean.add(f[t].pointDiv,"mouseup",function(){var e=f[t];return function(t){MM.removeEvent(i.parent,"mouseup",o),l.deleteLocation(e,t)}}()),i.parent.appendChild(f[t].pointDiv)),f[t].pointDiv.style.left=e.x+"px",f[t].pointDiv.style.top=e.y+"px"}}function r(e){a=t(e),bean.add(i.parent,"mouseup",o)}function o(n){a&&(u=t(n),s>MM.Point.distance(a,u)&&(l.addLocation(i.pointLocation(a)),c.dispatchCallback("change",e(f))),a=null)}var i,a=null,u=null,s=5,l={},c=new MM.CallbackManager(l,["change"]),f=[];return l.addLocation=function(t){return f.push(t),n(),c.dispatchCallback("change",e(f)),l},l.locations=function(){return arguments.length?void 0:f},l.addCallback=function(t,e){return c.addCallback(t,e),l},l.removeCallback=function(t,e){return c.removeCallback(t,e),l},l.map=function(t){return arguments.length?(i=t,l):i},l.add=function(){return bean.add(i.parent,"mousedown",r),i.addCallback("drawn",n),l},l.remove=function(){bean.remove(i.parent,"mousedown",r),i.removeCallback("drawn",n);for(var t=f.length-1;t>-1;t--)l.deleteLocation(f[t]);return l},l.deleteLocation=function(t,n){if(!n||confirm("Delete this point?")){t.pointDiv.parentNode.removeChild(t.pointDiv);for(var r=0;f.length>r;r++)if(f[r]===t){f.splice(r,1);break}c.dispatchCallback("change",e(f))}},l},wax=wax||{},wax.mm=wax.mm||{},wax.mm.zoombox=function(){function t(t){var e=new MM.Point(t.clientX,t.clientY);e.x+=document.body.scrollLeft+document.documentElement.scrollLeft,e.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var n=o.parent;n;n=n.offsetParent)e.x-=n.offsetLeft,e.y-=n.offsetTop;return e}function e(n){if(a){a=!1;var i=t(n),l=o.pointLocation(i),c=o.pointLocation(s);o.setExtent([l,c]),u.style.display="none",MM.removeEvent(o.parent,"mousemove",r),MM.removeEvent(o.parent,"mouseup",e),o.parent.style.cursor="auto"}}function n(n){return n.shiftKey&&!this.drawing?(a=!0,s=t(n),u.style.left=s.x+"px",u.style.top=s.y+"px",MM.addEvent(o.parent,"mousemove",r),MM.addEvent(o.parent,"mouseup",e),o.parent.style.cursor="crosshair",MM.cancelEvent(n)):void 0}function r(e){if(a){var n=t(e);return u.style.display="block",u.style.left=n.x<s.x?n.x+"px":s.x+"px",u.style.width=Math.abs(n.x-s.x)+"px",u.style.top=n.y<s.y?n.y+"px":s.y+"px",u.style.height=Math.abs(n.y-s.y)+"px",MM.cancelEvent(e)}}var o,i={},a=!1,u=document.createElement("div"),s=null;return i.map=function(t){return arguments.length?(o=t,i):o},i.add=function(){return o?(u.id=o.parent.id+"-zoombox-box",u.className="zoombox-box",o.parent.appendChild(u),MM.addEvent(o.parent,"mousedown",n),this):!1},i.remove=function(){return o?(u.parentNode&&u.parentNode.removeChild(u),MM.removeEvent(o.parent,"mousedown",n),i):!1},i},wax=wax||{},wax.mm=wax.mm||{},wax.mm.zoomer=function(){function t(t){t.stop()}function e(t){t.stop(),a&&o.ease?o.ease.zoom(o.zoom()+1).run(50):o.zoomIn()}function n(t){t.stop(),a&&o.ease?o.ease.zoom(o.zoom()-1).run(50):o.zoomOut()}function r(t){t.coordinate.zoom===t.coordLimits[0].zoom?s.className="zoomer zoomout zoomdisabled":t.coordinate.zoom===t.coordLimits[1].zoom?u.className="zoomer zoomin zoomdisabled":(u.className="zoomer zoomin",s.className="zoomer zoomout")}var o,i={},a=!0,u=document.createElement("a"),s=document.createElement("a");return u.innerHTML="+",u.href="#",u.className="zoomer zoomin",s.innerHTML="-",s.href="#",s.className="zoomer zoomout",i.map=function(t){return arguments.length?(o=t,i):o},i.add=function(){return o?(o.addCallback("drawn",r),i.appendTo(o.parent),bean.add(u,"mousedown dblclick",t),bean.add(s,"mousedown dblclick",t),bean.add(s,"touchstart click",n),bean.add(u,"touchstart click",e),i):!1},i.remove=function(){return o?(o.removeCallback("drawn",r),u.parentNode&&u.parentNode.removeChild(u),s.parentNode&&s.parentNode.removeChild(s),bean.remove(u,"mousedown dblclick",t),bean.remove(s,"mousedown dblclick",t),bean.remove(s,"touchstart click",n),bean.remove(u,"touchstart click",e),i):!1},i.appendTo=function(t){return wax.u.$(t).appendChild(u),wax.u.$(t).appendChild(s),i},i.smooth=function(t){return arguments.length?(a=t,i):a},i};var wax=wax||{};wax.mm=wax.mm||{},wax.mm._provider=function(t){this.options={tiles:t.tiles,scheme:t.scheme||"xyz",minzoom:t.minzoom||0,maxzoom:t.maxzoom||22,bounds:t.bounds||[-180,-90,180,90]}},wax.mm._provider.prototype={outerLimits:function(){return[this.locationCoordinate(new MM.Location(this.options.bounds[0],this.options.bounds[1])).zoomTo(this.options.minzoom),this.locationCoordinate(new MM.Location(this.options.bounds[2],this.options.bounds[3])).zoomTo(this.options.maxzoom)]},getTile:function(t){var e;if(!(e=this.sourceCoordinate(t)))return null;if(e.zoom<this.options.minzoom||e.zoom>this.options.maxzoom)return null;e.row="tms"===this.options.scheme?Math.pow(2,e.zoom)-e.row-1:e.row;var n=this.options.tiles[parseInt(Math.pow(2,e.zoom)*e.row+e.column,10)%this.options.tiles.length].replace("{z}",e.zoom.toFixed(0)).replace("{x}",e.column.toFixed(0)).replace("{y}",e.row.toFixed(0));return wax._&&wax._.bw&&(n=n.replace(".png",wax._.bw_png).replace(".jpg",wax._.bw_jpg)),n}},MM&&MM.extend(wax.mm._provider,MM.MapProvider),wax.mm.connector=function(t){var e=new wax.mm._provider(t);return new MM.Layer(e)},function(t,e){var n=function(){function t(t,e,n){return 0===n?t:1===n?e:t+(e-t)*n}var n,r,o,i,a,u,s={},l=!1,c=!1,f={easeIn:function(t){return t*t},easeOut:function(t){return Math.sin(t*Math.PI/2)},easeInOut:function(t){return(1-Math.cos(Math.PI*t))/2},linear:function(t){return t},easeCubicInOut:function(t){return t>1?1:.5>t?2*t*t:-1+(4-2*t)*t}},h=f.easeOut;s.stop=function(t){c=!0,r=void 0,n=t},s.running=function(){return l},s.point=function(t){return o=i.pointCoordinate(t),s},s.zoom=function(t){return o||(o=i.coordinate.copy()),o=i.enforceZoomLimits(o.zoomTo(t)),s},s.location=function(t){return o=i.locationCoordinate(t),s},s.from=function(t){return arguments.length?(r=t.copy(),s):r?r.copy():r},s.to=function(t){return arguments.length?(o=i.enforceZoomLimits(t.copy()),s):o.copy()},s.path=function(t){return m=p[t],s},s.easing=function(t){return h=f[t],s},s.map=function(t){return arguments.length?(i=t,s):i};var p={},d=new e.Coordinate(0,0,0);p.screen=function(n,r,o,i){var a=t(n.zoom,r.zoom,o);return i?(i.row=t(n.row,r.row*Math.pow(2,n.zoom-r.zoom),o)*Math.pow(2,a-n.zoom),i.column=t(n.column,r.column*Math.pow(2,n.zoom-r.zoom),o)*Math.pow(2,a-n.zoom),i.zoom=a,void 0):new e.Coordinate(t(n.row,r.row*Math.pow(2,n.zoom-r.zoom),o)*Math.pow(2,a-n.zoom),t(n.column,r.column*Math.pow(2,n.zoom-r.zoom),o)*Math.pow(2,a-n.zoom),a)},p.about=function(n,r,o,a){var u=t(n.zoom,r.zoom,o),s=i.dimensions.x/2,l=i.dimensions.y/2,c=i.tileSize.x,f=i.tileSize.y,h=s+c*(r.column*Math.pow(2,n.zoom-r.zoom)-n.column),p=l+f*(r.row*Math.pow(2,n.zoom-r.zoom)-n.row),d=s+c*(r.column*Math.pow(2,u-r.zoom)-n.column*Math.pow(2,u-n.zoom)),m=l+f*(r.row*Math.pow(2,u-r.zoom)-n.row*Math.pow(2,u-n.zoom));return a?(a.column=n.column*Math.pow(2,u-n.zoom)-(h-d)/c,a.row=n.row*Math.pow(2,u-n.zoom)-(p-m)/f,a.zoom=u,void 0):new e.Coordinate(n.column*Math.pow(2,u-n.zoom)-(h-d)/c,n.row*Math.pow(2,u-n.zoom)-(p-m)/f,u)};var m=p.screen;s.t=function(t){return m(r,o,h(t),d),i.coordinate=d,i.draw(),s},s.getCoordinate=function(t){return m(r,o,h(t),d),d},s.future=function(t){for(var e=[],n=0;t>n;n++)e.push(m(r,o,n/(t-1)));return e.slice(0)};var g;return s.resetRun=function(){return g=+new Date,s},s.run=function(t,a){function u(){var s=+new Date-g;if(c)return c=l=!1,n(),n=void 0;if(s>t){if(o.zoom!=r.zoom&&i.dispatchCallback("zoomed",o.zoom-r.zoom),l=!1,m(r,o,1,d),i.coordinate=d,o=r=void 0,i.draw(),a)return a(i)}else m(r,o,h(s/t),d),i.coordinate=d,i.draw(),e.getFrame(u)}return l?s.stop(function(){s.run(t,a)}):(r||(r=i.coordinate.copy()),o||(o=i.coordinate.copy()),t=t||1e3,g=+new Date,l=!0,e.getFrame(u),void 0)},s.optimal=function(t,e,n){return l?s.stop(function(){s.optimal(t,e,n)}):(t=t||.9,e=e||1.42,s.setOptimalPath(t,e),s.run(1e3*(u/t),function(t){m=a,n&&n(t)}),void 0)},s.getOptimalTime=function(t){return t=t||.9,t&&u?1e3*(u/t):null},s.setOptimalPath=function(n,l){function c(t){return t*t}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function h(t){return(Math.exp(t)+Math.exp(-t))/2}function p(t){return f(t)/h(t)}function d(t){var e=c(b)-c(w)+(t?-1:1)*Math.pow(l,4)*c(C-E),n=2*(t?b:w)*c(l)*(C-E);return e/n}function g(t){return Math.log(-d(t)+Math.sqrt(c(d(t))+1))}n=n||.9,l=l||1.42,r?i.coordinate=r:r=i.coordinate.copy();var v=i.pointCoordinate(new e.Point(0,0)).zoomTo(0),y=i.pointCoordinate(i.dimensions).zoomTo(0),w=Math.max(y.column-v.column,y.row-v.row),b=w*Math.pow(2,r.zoom-o.zoom),x=r.zoomTo(0),M=o.zoomTo(0),_={x:x.column,y:x.row},T={x:M.column,y:M.row},E=0,C=Math.sqrt(c(T.x-_.x)+c(T.y-_.y)),z=g(0),S=g(1);u=(S-z)/l;var k=function(t){return w*h(z)/h(l*t+z)},L=function(t){return w/c(l)*h(z)*p(l*t+z)-w/c(l)*f(z)+E};if(1e-6>Math.abs(C)){if(1e-6>Math.abs(w-b))return s;var A=w>b?-1:1;u=Math.abs(Math.log(b/w))/l,L=function(){return E},k=function(t){return w*Math.exp(A*l*t)}}return a=m,m=function(n,r,i,a){if(1==i)return a&&(a.row=o.row,a.column=o.column,a.zoom=o.zoom),o;var s=i*u,l=L(s),c=n.zoom+Math.log(w/k(s))/Math.LN2,f=t(_.x,T.x,l/C||1),h=t(_.y,T.y,l/C||1),p=Math.pow(2,c);return a?(a.row=h*p,a.column=f*p,a.zoom=c,void 0):new e.Coordinate(h*p,f*p,c)},s},s};this.easey=n,this.mapbox===void 0&&(this.mapbox={}),this.mapbox.ease=n}(this,MM),function(){"use strict";window.cwm={init:function(){var t="http://clearwater.cartodb.com/api/v2/sql?format=geojson&q=",e={bingApiKey:"Ajt-JIuGs7jVKkk4yeC5HWByvuHQ4OEISvzK2-77yRcz_EOCAGfooD4eDeZ-aY4l",mapboxId:"gmaclennan.map-y7pgvo15",startBounds:[{lat:-55,lon:-90},{lat:14,lon:-33}],communityUrl:t+"SELECT ST_Simplify(the_geom, 0.0002) AS the_geom, c.cartodb_id, c.community, c.nationality, systems, users "+"FROM communities AS c LEFT JOIN (SELECT COUNT(*) AS systems, SUM(users) AS users, community "+"FROM clearwater_well_installations GROUP BY community) AS cwi ON c.community = cwi.community WHERE active",installationUrl:t+"SELECT *, to_char(date, 'YYYY-MM-DD') AS date FROM clearwater_well_installations WHERE photo IS NOT NULL",padding:580};cwm.map=cwm.Map("map",e),cwm.scrollHandler=cwm.handlers.ScrollHandler(cwm.map),cwm.Stories("stories").map(cwm.map)}},cwm.Map=function(t,e){function n(){f.bounds.communities&&c.bounds&&(r(),o(),i()),d3.select(h.parent).on("click",function(){var t=18;if(!d3.event.defaultPrevented&&c.markersShown){var e=h.pointLocation(new MM.Point(d3.event.x,d3.event.y)),n=c.closest(e),r=c.getBounds(function(t){return t.properties.community===n.properties.community}),o=new MM.Extent(r[1][1],r[0][0],r[0][1],r[1][0]),i=h.extentCoordinate(o,!0);i.zoom>t-2&&(i=i.zoomTo(t-2)),h.flightHandler.pause();var a=h.s.scrollTo(cwm.util.sanitize(n.properties.community)+"-overview",function(){h.flightHandler.resume()});if(a!==cwm.scrollHandler.currentScroll()||h.getZoom()>=t)h.ease.to(i).path("screen").setOptimalPath().run(1500,function(){h.flightHandler.setOverride()});else{var u=new MM.Point(d3.event.x,d3.event.y),s=h.pointCoordinate(u).zoomTo(t);h.ease.to(s).path("about").run(500,function(){h.flightHandler.setOverride()})}}})}function r(){var t=c.getLocations(function(t){return cwm.util.sanitize(t.properties.featured_url)},function(t){return t.properties.featured&&!0}),e=c.getOverviewLocations(function(t){return cwm.util.sanitize(t)+"-overview"},function(t){return t.properties.community});p=p.concat([{id:"project-overview",bounds:f.bounds.communities}]).concat(f.getLocations("community")).concat(e).concat(t)}function o(){d3.selectAll("#"+t+" a").on("click",function(){void 0!==a&&a.scrollTo(this.getAttribute("href").split("#")[1])}),d3.selectAll(".markers circle").on("click",function(t){function e(){var t=18,e=new MM.Point(d3.event.clientX,d3.event.clientY),n=h.pointCoordinate(e).zoomTo(t);h.ease.to(n).path("about").run(500,function(){h.flightHandler.setOverride()})}if(!d3.event.defaultPrevented){var n=cwm.util.sanitize(t.properties.featured_url);n?a.scrollTo(n):e()}})}function i(){h.paddingLeft=s,h.flightHandler.locations(p).enable()}var a,u=0,s=e.padding||0,l=cwm.render.LayerContainer("layers"),c=cwm.layers.MarkerLayer(l,"markers"),f=cwm.layers.FeatureLayer(l,"features"),h=new MM.Map(t,[cwm.layers.BingLayer({apiKey:e.bingApiKey}),c,f],null,[cwm.handlers.DragHandler()]).setExtent(e.startBounds,!1,s).setZoomRange(3,18);f.add(cwm.data.ecuador,{id:"ecuador",maxZoom:7,scrollTo:function(){return"project-overview"}}),f.load(e.communityUrl,{id:"communities",maxZoom:12.5,scrollTo:function(t){return cwm.util.sanitize(t.properties.community)}},n),c.load(e.installationUrl,{minZoom:12.5},n),h.ease=mapbox.ease().map(h),h.flightHandler=cwm.handlers.FlightHandler().map(h),h.stories=function(t){return a=t,h},window.onresize=function(){$("html,body").stop(!0),Date.now()-u>1e3/30&&i(),u=Date.now()};var p=[{id:"ecuador",bounds:cwm.util.d3Bounds(e.startBounds)}];return h},cwm.Stories=function(){function t(){d3.selectAll('a[href*="#"]').on("click",function(){n.scrollTo(this.getAttribute("href").split("#")[1])}),d3.selectAll("#stories h1, #stories h2").on("click",function(){n.scrollTo($x(this).parent("section")[0].getAttribute("id"))})}var e,n={};t(),n.map=function(t){return e=t.stories(n),e.s=n,n};var r=document.getElementsByTagName("h1")[0].offsetHeight;return document.getElementsByTagName("h2")[0].offsetHeight,cwm.handlers.StoryHandler("#stories").affixTop("#stories h1",function(){return $x(this).parent("article").next().offsetTop()-this.offsetHeight}).affixBottom("#stories h2, #stories h1",function(){return $x(this).parent("section").previousSiblingOrCousin().offsetBottom()-window.innerHeight+this.offsetHeight}).fadeIn(".image",function(){return $x(this).offsetTop()-window.innerHeight},function(){return $x(this).offsetTop()-window.innerHeight+this.offsetHeight}).fadeOut("#stories article > section:not(:first-child)",function(){return $x(this).offsetTop()+this.offsetHeight-window.innerHeight+r},function(){return window.innerHeight-this.offsetHeight>200?$x(this).offsetTop():$x(this).offsetTop()+this.offsetHeight-window.innerHeight+200}).enable(),d3.selectAll("#stories article > section").call(cwm.scrollHandler.spy),n.scrollTo=function(t,e){var n,r=document.getElementById(t),o=$x(r).nextSiblingOrCousin()[0]?$x(r).nextSiblingOrCousin()[0].children[1].children[0].offsetHeight:0;return r&&(n=r.offsetTop+r.offsetHeight+o,cwm.scrollHandler.scrollTo(n,e)),n},n},cwm.render={LayerContainer:function(t){var e=d3.select(document.body).append("div").style("position","absolute").style("width","100%").style("height","100%").attr("id",t);return e.append("svg").style("position","absolute"),e},Markers:function(t,e){return e.selectAll("circle").data(t).enter().append("circle").attr("r",0).style("cursor","pointer")},Label:function(t,e){var n=e.append("div").attr("class","marker-tooltip").style("width","100%").datum(t);return n.append("div").style("position","absolute").style("pointer-events","none").append("div").attr("class","feature-label").style("pointer-events","auto").text(t.properties.community||t.properties.description),n},Popup:function(t,e){var n=e.append("div").attr("class","marker-tooltip").style("width","100%").datum(t);return n.append("div").style("position","absolute").style("pointer-events","none").append("div").attr("class","marker-popup").style("pointer-events","auto").classed("featured",function(){return t.properties.featured===!0}),n},PopupSmall:function(t,e){return e.append("div").attr("class","image-wrapper").append("img").attr("src",t.properties.photo),e.append("p").text(t.properties.name.split(" and")[0]),e},PopupLarge:function(t,e){var n=d3.time.format("%b %e %Y");e.append("div").attr("class","image-wrapper").append("img").attr("src",t.properties.photo);var r=e.append("table"),o=r.append("tr");return o.append("th").text("Family:"),o.append("td").text(t.properties.name),o=r.append("tr"),o.append("th").text("Village:"),o.append("td").text(t.properties.community),o=r.append("tr"),o.append("th").text("Installed:"),o.append("td").text(n(new Date(t.properties.date))),o=r.append("tr"),o.append("th").text("Users:"),o.append("td").text(t.properties.users),t.properties.featured===!0&&(o=r.append("tr"),o.append("th").text("Story:"),o.append("td").append("a").attr("href",t.properties.featured_url).text("Read more on our blog...")),e}},cwm.util={sanitize:function(t){return t!==void 0&&null!==t?t.toLowerCase().replace("http://www.giveclearwater.org/","a-").replace("http://beta.giveclearwater.org/","b-").split(" ").join("-").split("/").join("-"):void 0},preloadImages:function(t,e){_.forEach(t.features,function(t){if(e===t.properties.community){var n=new Image;n.src=t.properties.photo}})},fillArray:function(t,e){for(var n,r=[],o=t instanceof Array,i=0;e>i;i++)n=o?t.slice(0):t,r.push(n);return r},d3Bounds:function(t){return[[t[0].lon,t[0].lat],[t[1].lon,t[1].lat]]},transformCSS:function(t,e){if(t=t.split(" "),e=e.split(" "),this.document){for(var n=document.documentElement.style,r=0;t.length>r;r++)if(t[r]in n)return e[r];return!1}}("transform WebkitTransform OTransform MozTransform msTransform","transform -webkit-transform -o-transform -moz-transform -ms-transform")},MM.getMousePoint=function(t){var e=new MM.Point(t.clientX,t.clientY);return e},MM.Map.prototype.centerFromBounds=function(t){var e=new MM.Extent(t[1][1],t[0][0],t[0][1],t[1][0]);return this.extentCoordinate(e,!0)},MM.Extent.prototype.coversBounds=function(t){return!(t[0][0]>this.east||t[0][1]>this.north||t[1][0]<this.west||t[1][1]<this.south)},MM.Extent.prototype.containsBounds=function(t){return t[0][0]>this.west&&t[0][1]>this.south&&t[1][0]<this.east&&t[1][1]<this.north},MM.Extent.prototype.containsCoordinates=function(t){return this.containsLocation(new MM.Location(t[1],t[0]))},MM.Map.prototype.extentCoordinate=function(t,e,n){var n=this.paddingLeft||n||0;t instanceof MM.Extent&&(t=t.toArray());for(var r,o,i=0;t.length>i;i++){var a=this.projection.locationCoordinate(t[i]);r?(r.row=Math.min(r.row,a.row),r.column=Math.min(r.column,a.column),r.zoom=Math.min(r.zoom,a.zoom),o.row=Math.max(o.row,a.row),o.column=Math.max(o.column,a.column),o.zoom=Math.max(o.zoom,a.zoom)):(r=a.copy(),o=a.copy())}var u=this.dimensions.x+1-n,s=this.dimensions.y+1,l=(o.column-r.column)/(u/this.tileSize.x),c=Math.log(l)/Math.log(2),f=r.zoom-(e?c+.1:Math.ceil(c)),h=(o.row-r.row)/(s/this.tileSize.y),p=Math.log(h)/Math.log(2),d=r.zoom-(e?p+.1:Math.ceil(p)),m=Math.min(f,d);m=Math.min(m,this.coordLimits[1].zoom),m=Math.max(m,this.coordLimits[0].zoom);var g=(r.row+o.row)/2,v=(r.column+o.column)/2,y=r.zoom;return new MM.Coordinate(g,v,y).zoomTo(m).left(n/this.tileSize.x/2)},MM.Map.prototype.setExtent=function(t,e,n){return this.coordinate=this.extentCoordinate(t,e,n),this.draw(),this.dispatchCallback("extentset",t),this},MM.Layer.prototype.positionTile=function(t){var e=this.map.coordinate.zoomTo(t.coord.zoom);t.style.cssText="position:absolute;-webkit-user-select:none;-webkit-user-drag:none;-moz-user-drag:none;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;width:"+this.map.tileSize.x+"px; height: "+this.map.tileSize.y+"px;";var n=Math.pow(2,this.map.coordinate.zoom-t.coord.zoom);MM.moveElement(t,{x:Math.round(this.map.dimensions.x/2+(t.coord.column-e.column)*this.map.tileSize.x*n),y:Math.round(this.map.dimensions.y/2+(t.coord.row-e.row)*this.map.tileSize.y*n),scale:n,width:this.map.tileSize.x,height:this.map.tileSize.y});var r=this.levels[t.coord.zoom];r.appendChild(t),t.className="map-tile-loaded",Math.round(this.map.coordinate.zoom)==t.coord.zoom&&(r.style.display="block"),this.requestRedraw()},function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}("$x",this,function(){function t(e){return e?e.offsetTop+t(e.offsetParent):0}function e(t,r){return"HTML"==t.tagName||t.tagName==r.toUpperCase()?n(t):e(t.parentNode,r)}var n=function(t){return this instanceof n?(this[0]=t,void 0):new n(t)};return n.prototype={get:function(){return this[0]||null},next:function(){return n(this[0].nextElementSibling)},offsetTop:function(){return t(this[0])},offsetBottom:function(){return this[0]&&this[0].offsetHeight+t(this[0])},parent:function(t){return e(this[0],t)},previousSiblingOrCousin:function(){var t=this[0].parentNode.previousElementSibling;return n(this[0].previousElementSibling||t&&t.lastElementChild)},nextSiblingOrCousin:function(){var t=this[0].parentNode.nextElementSibling;return n(this[0].nextElementSibling||t&&t.firstElementChild)}},n}),cwm.layers={},cwm.layers.BingLayer=function(t){return this instanceof cwm.layers.BingLayer?(this._subdomains=[0,1,2,3],this._key=t.apiKey,this._style=t.style||"Aerial",this._url="",this.meta="",this.parent=document.createElement("div"),this.parent.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0; z-index: 0",this.levels={},this.requestManager=new MM.RequestManager,this.requestManager.addCallback("requestcomplete",this.getTileComplete()),this.requestManager.addCallback("requesterror",this.getTileError()),this.setProvider(new wax.mm._provider({tiles:["data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]})),this.loadMetadata(),void 0):new cwm.layers.BingLayer(t)},cwm.layers.BingLayer.prototype=function(){var t=this;d3.timer(function(){return MM.Layer.prototype.draw.call(t),!0})},cwm.layers.BingLayer.prototype.initMetadata=function(){var t=this.meta.resourceSets[0].resources[0];this._subdomains=t.imageUrlSubdomains,this._url=t.imageUrl.replace("{subdomain}","{S}").replace("{quadkey}","{Q}").replace("http:",document.location.protocol).replace("{culture}",""),this.setProvider(new MM.Template(this._url,this._subdomains))},cwm.layers.BingLayer.prototype.loadMetadata=function(){var t=document.location.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this._style,e=this;$.ajax({url:t,data:{key:this._key},jsonp:"jsonp",dataType:"jsonp",success:function(t){e.meta=t,e.initMetadata()}})},MM.extend(cwm.layers.BingLayer,MM.Layer),cwm.layers.MapboxLayer=function(){return this instanceof cwm.layers.MapboxLayer?(this._tilejson={},this._url="",this._id="",this._composite=!0,this.name="",this.parent=document.createElement("div"),this.parent.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0; z-index: 0",this.levels={},this.requestManager=new MM.RequestManager,this.requestManager.addCallback("requestcomplete",this.getTileComplete()),this.requestManager.addCallback("requesterror",this.getTileError()),this.setProvider(new wax.mm._provider({tiles:["data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]})),void 0):new cwm.layers.MapboxLayer},cwm.layers.MapboxLayer.prototype.refresh=function(t){var e=this;return wax.tilejson(this._url,function(n){e.tilejson(n),t&&t(e)}),this},cwm.layers.MapboxLayer.prototype.url=function(t,e){return arguments.length?(this._mapboxhosting=0==t.indexOf(mapbox.MAPBOX_URL),this._url=t,this.refresh(e)):this._url},cwm.layers.MapboxLayer.prototype.id=function(t,e){return arguments.length?(this.named(t),this._id=t,this.url(mapbox.MAPBOX_URL+t+".jsonp",e)):this._id},cwm.layers.MapboxLayer.prototype.named=function(t){return arguments.length?(this.name=t,this):this.name},cwm.layers.MapboxLayer.prototype.tilejson=function(t){if(!arguments.length)return this._tilejson;if(this._composite&&this._mapboxhosting||this.setProvider(new wax.mm._provider(t)),this._tilejson=t,this.name=this.name||t.id,this._id=this._id||t.id,t.bounds){var e=new MM.MercatorProjection(0,MM.deriveTransformation(-Math.PI,Math.PI,0,0,Math.PI,Math.PI,1,0,-Math.PI,-Math.PI,0,1));this.provider.tileLimits=[e.locationCoordinate(new MM.Location(t.bounds[3],t.bounds[0])).zoomTo(t.minzoom?t.minzoom:0),e.locationCoordinate(new MM.Location(t.bounds[1],t.bounds[2])).zoomTo(t.maxzoom?t.maxzoom:18)]}return this},cwm.layers.MapboxLayer.prototype.draw=function(){if(this.enabled&&this.map){if(this._composite&&this._mapboxhosting){var t=0;for(t;this.map.layers.length>t&&this.map.layers[t]!=this;t++);for(var e=t-1;e>=0;e--)if(this.map.getLayerAt(e).enabled){if(this.map.getLayerAt(e)._composite)return this.parent.style.display="none",this.compositeLayer=!1,this;break}for(var n=[],r=t;this.map.layers.length>r;r++){var o=this.map.getLayerAt(r);if(o.enabled){if(!o._composite||!o._mapboxhosting)break;n.push(o.id())}}if(n=n.join(","),this.compositeLayer!==n){this.compositeLayer=n;var i=this;return wax.tilejson(mapbox.MAPBOX_URL+n+".jsonp",function(t){i.setProvider(new wax.mm._provider(t))}),this.parent.style.display="",this}}else this.parent.style.display="",this.compositeLayer&&(this.compositeLayer=!1,this.setProvider(new wax.mm._provider(this.tilejson())));var i=this;d3.timer(function(){return MM.Layer.prototype.draw.call(i),!0})}},cwm.layers.MapboxLayer.prototype.composite=function(t){return arguments.length?(this._composite=t?!0:!1,this):this._composite},cwm.layers.MapboxLayer.prototype.enable=function(t){return MM.Layer.prototype.enable.call(this,t),this.map&&this.map.draw(),this},cwm.layers.MapboxLayer.prototype.disable=function(t){return MM.Layer.prototype.disable.call(this,t),this.map&&this.map.draw(),this},MM.extend(cwm.layers.MapboxLayer,MM.Layer),cwm.layers.FeatureLayer=function(t,e){function n(){var e=this.__data__;a&&a.node().parentNode||(a=cwm.render.Label(e,t),a._feature=this,a.on("mouseover",function(){u=!0}).on("mouseout",function(){u=!1,a.remove()}).on("click",function(){d3.event.stopPropagation(),u=!1,a.remove(),d3.select(a._feature).on("click").call(a._feature,e)}),r())}function r(){if(a){var t=a.datum(),e=d.map.locationPoint(new MM.Location(t.properties._labelXY[1],t.properties._labelXY[0]));MM.moveElement(a.node(),e)}}function o(){window.setTimeout(function(){u||a.remove()},10)}var i,a,u,s=0,l=[],c=t.select("svg"),f=c.insert("g",":first-child"),h=d3.geo.transform({point:function(t,e){var n=d.map.locationPoint({lon:t,lat:e});this.stream.point(~~(.5+n.x),~~(.5+n.y))}}),p=d3.geo.path().projection(h),d={parent:t.node(),name:e,bounds:{},draw:function(){if(d.map&&i){var t=d.map.getZoom(),e=d.map.getExtent(),a=l.filter(function(t){return e.coversBounds(t.properties._bounds)});return i.data(a,function(t){return t.properties.cartodb_id}).attr("d",p).style("fill-opacity",function(e){return.6*Math.min(Math.max(e.properties._maxZoom+1-t,0),1)}).attr("display","").classed("outline",function(e){return t>e.properties._maxZoom}).on("mouseover",n).on("mouseout",o).exit().attr("display","none"),r(),d}},add:function(t,e,n){e=e||{};var r=e.maxZoom||999,o=e.id||s++;return t.features.forEach(function(t){t.properties._maxZoom=r,t.properties._id=o,t.properties._bounds=d3.geo.bounds(t),t.properties._labelXY=d3.geo.centroid(t),t.properties._scrollTo=e.scrollTo(t)}),l=l.concat(t.features),d.bounds[o]=d3.geo.bounds(t),i=f.selectAll("path").data(l),i.enter().append("path").attr("class",o).on("click",function(t){var e=d.map.s.scrollTo(t.properties._scrollTo);e===cwm.scrollHandler.currentScroll()&&d.map.s.scrollTo(t.properties._scrollTo+"-overview")}),n&&n(),d},load:function(t,e,n){return d3.json(t,function(r,o){if(r)throw r.response+": Could not load "+t;d.add(o,e,n)}),d},getLocations:function(t){var e=[];return i.each(function(n){e.push({id:cwm.util.sanitize(n.properties[t]),bounds:d3.geo.bounds(n)})}),e}};return d},cwm.layers.MarkerLayer=function(t,e){function n(t){var e=w.map.locationPoint({lon:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]});return[~~(.5+e.x),~~(.5+e.y)]}function r(t){var e=t||new MM.Location(0,0);return function(t,n){var r=t.geometry.coordinates,o=n.geometry.coordinates,i=Math.pow(r[0]-e.lon,2)+Math.pow(r[1]-e.lat,2),a=Math.pow(o[0]-e.lon,2)+Math.pow(o[1]-e.lat,2);return d3.ascending(i,a)}}function o(){return!0}function i(){v.selectAll("circle").sort(r(w.map.getCenter())).attr("r",0).transition().duration(1e3).delay(function(t,e){return 20*e}).ease("elastic",2).attr("r",c),v.selectAll("circle").sort(s)}function a(){d=v.selectAll("circle"),d.transition().attr("r",0).each("end",function(){d3.select(this).attr("display","none"),d=null})}function u(){var t=18,e=w.map,n=this.getAttribute("cx"),r=this.getAttribute("cy");if(!(d3.event.defaultPrevented||e.getZoom()>=t)){var o=new MM.Point(n,r),i=e.pointCoordinate(o).zoomTo(t);e.ease.to(i).path("about").run(1e3,function(){e.flightHandler.setOverride()})}}function s(t){return t.properties.featured===!0?1:0}function l(){var t=w.map.getExtent(),e=p.filter(function(e){return t.containsCoordinates(e.geometry.coordinates)}),r=v.selectAll("circle").data(e,function(t){return t.properties.cartodb_id});r.enter().append("circle").attr("r",c),r.call(y.add).on("click.zoom",u),r.exit().attr("display","none"),r.attr("cx",function(t){return n(t)[0]}).attr("cy",function(t){return n(t)[1]}).attr("display","")}function c(t,e,n){return n=n||1,t.properties._markerSize*n}var f,h,p,d,m=0,g=t.select("svg"),v=g.append("g").attr("class","markers"),y=cwm.handlers.MarkerInteraction(t),w={parent:t.node(),name:e,draw:function(){if(w.map&&p){var t=w.map.getZoom();return w.markersShown=t>=f,f>t&&m>=f?(a(),y.removePopup()):t>=f&&f>m?(l(),y.drawPopup(n),i()):t>=f&&m>=f?(l(),y.drawPopup(n)):f>t&&d&&d.attr("cx",function(t){return n(t)[0]}).attr("cy",function(t){return n(t)[1]}),m=t,w}},add:function(t,e,n){return e=e||{},h=e.markerSize||8,f=e.minZoom||0,t.features.forEach(function(t){t.properties._markerSize=h}),w.bounds=d3.geo.bounds(t),p=t.features,n&&n(),w},load:function(t,e,n){return d3.json(t,function(r,o){if(r)throw r.response+": Could not load "+t;w.add(o,e,n)}),w},getLocations:function(t,e){e=e||o;var n=[];return p.filter(e).forEach(function(e){var r=[[],[]];r[0][0]=r[1][0]=e.geometry.coordinates[0],r[0][1]=r[1][1]=e.geometry.coordinates[1],n.push({id:t(e),bounds:r})}),n},getOverviewLocations:function(t,e){var n=[],r=d3.nest().key(e).entries(p);return r.forEach(function(e){n.push({id:t(e.key),bounds:d3.geo.bounds({type:"FeatureCollection",features:e.values})})}),n},getBounds:function(t){t=t||o;var e=p.filter(t);return d3.geo.bounds({type:"FeatureCollection",features:e})},closest:function(t){return p.sort(r(t))[0]}};return w},cwm.handlers={},cwm.handlers.ScrollHandler=function(t){function e(){d3.event.preventDefault(),y-=d(),y=Math.max(0,y),n()
}function n(){a||(a=!0,window.requestAnimationFrame(r))}function r(){var t=~~(.5+y);t!==v&&(m.forEach(function(e){e(t)}),v=t),a=!1}function o(t){return.5*(1-Math.cos(Math.PI*t))}function i(){var t=Date.now();return t-u>=f?(y=l,n(),h&&(h(),h=null),!0):(y=Math.round(s+(l-s)*o((t-u)/f)),n(),void 0)}var a,u,s,l,c,f,h,p,d,m=[],g=[],v=-1,y=0;n(),"onwheel"in document?(p="wheel",d=function(){return-d3.event.deltaY*(d3.event.deltaMode?40:1)}):"onmousewheel"in document?(p="mousewheel",d=function(){return d3.event.wheelDelta}):(p="MozMousePixelScroll",d=function(){return-d3.event.detail}),d3.select(t.parent.parentNode).on(p,e);var w={add:function(t){m.push(t),v=-1,n()},scrollTo:function(e,n){s=Math.round(y),l=Math.round(e),c=Math.abs(s-l),u=Date.now(),h=n,t?(t.flightHandler.setOverride(null,null,Math.min(l,s),Math.max(l,s)),f=t.flightHandler.getOverrideTime()):f=c,5>c&&(f=100),d3.timer(i)},currentScroll:function(){return Math.round(y)},spy:function(t){t.each(function(){g.push({scrollPoint:$x(this).offsetTop()+this.offsetHeight-window.innerHeight,section:this.getAttribute("id"),nationality:this.parentNode.getAttribute("class")})}),g=_.sortBy(g,"scrollPoint").reverse()},currentSection:function(){return _.find(g,function(){return y>g.scrollPoint}).section},currentNationality:function(){return _.find(g,function(){return y>g.scrollPoint}).nationality}};return w},cwm.handlers.DragHandler=function(){function t(){e.parent.style.cursor="move",e.panBy(d3.event.dx,d3.event.dy)}var e,n={},r=d3.behavior.drag().on("drag",t).on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}).on("dragend",function(){e.parent.style.cursor="auto",e.flightHandler.setOverride()});return n.init=function(t){e=t,d3.select(e.parent).call(r)},n.remove=function(){d3.select(e.parent).on("mousedown.drag",null)},n},cwm.handlers.FlightHandler=function(){function t(){u=_.chain(u).map(function(t){var e=document.getElementById(t.id);if(e){var n=$x(e).nextSiblingOrCousin()[0]?$x(e).nextSiblingOrCousin()[0].children[1].children[0].offsetHeight:0;t.scrollPoint=Math.max(e.offsetTop+e.offsetHeight+n,0)}else t.scrollPoint=-1;return t}).reject(function(t){return 0>t.scrollPoint}).sortBy("scrollPoint").value()}function e(){var t,e,n,a,s;o=[],_.forEach(u,function(u){e=r.centerFromBounds(u.bounds),a&&(t=i.from(a).to(e).easing("linear").setOptimalPath(),n=_.tail(t.future(u.scrollPoint-s+1)),o=o.concat(n)),a=e,s=u.scrollPoint})}var n,r,o,i,a,u,s,l={},c=!1;if(!mapbox.ease)throw"Mapbox easey library not found";return l.map=function(t){return r=t,i=mapbox.ease().map(r),l},l.locations=function(n){return arguments.length?(u=n,t(),r&&e(),l):u},l.enable=function(){if(s=-1,c)return l;if(!u||!r)throw"Map and locations need to be set";return o||e(),c=!0,cwm.scrollHandler.add(l.easeTo),l},l.easeTo=function(t){return a?l:(t=Math.max(t,0),n?t>n.top&&n.bottom>t?r.coordinate=n.easings[t-n.top]:n=void 0:r.coordinate=o[t]||_.last(o),r.draw(),l)},l.getCoord=function(t){return t=Math.max(t,0),o[t]||_.last(o)},l.setOverride=function(t,e,a,u){t=t||r.coordinate.copy(),e=e||cwm.scrollHandler.currentScroll(),a=Math.max(a||e-200,0),u=u||e+200,l.clearOverride();var s,c,f,h;return n={top:a,bottom:u},f=o[Math.floor(a)]||_.last(o),h=o[Math.floor(u)]||_.last(o),s=i.from(f).to(t).setOptimalPath(),n.easings=s.future(e-a),n.time=s.getOptimalTime(),c=i.from(t).to(h).setOptimalPath(),n.easings=n.easings.concat(c.future(u-e)),n.time+=c.getOptimalTime(),l},l.pause=function(){return a=!0,l},l.resume=function(){return a=!1,l},l.clearOverride=function(){return n=void 0,l},l.getOverrideTime=function(){return Math.floor(n.time)},l},cwm.handlers.StoryHandler=function(t){function e(){var t=[];return t.push.apply(t,arguments),b(t,e.prototype),t}function n(){this.origStyles={},this.length=0,this.wrapped={}}function r(t,e){var n=t,r=e;return function(t){return"opacity:"+c(Math.max(r-t,0)/(r-n)).toFixed(2)+";"}}function o(t,e){var n=t,r=e;return function(t){return"opacity:"+l(Math.min(t-r,n-r)/(n-r)).toFixed(2)+";"}}function i(t,e,n){var i,a,s,l,c,f,h=w(t);for(i=0;h.length>i;i++)a=x.add(h[i]),s=u.call(h[i],e,n),l=s[0],c=s[1],c>l&&c>0?(f=r(l,c),d.push([[l,c],a,f])):l>c&&l>0&&(f=o(l,c),d.push([[c,l],a,f]))}function a(){var t,e,n,r,o,i,a,u,s,l,c,f;n=M.add(cwm.util.fillArray([""],x.length)),r=_.add(cwm.util.fillArray("",T.length));var v=p.length;for(t=v;v+500>t;t++){for(c=cwm.util.fillArray([""],x.length),f=cwm.util.fillArray("",T.length),e=!1,o=0;d.length>o;o++)i=d[o][0][0],a=d[o][0][1],u=d[o][1],s=d[o][2],t>=i&&a>t&&("function"==typeof s?c[u][1]=s:c[u][0]+=s,e=!0);for(e&&(n=M.add(c)),p[t]=n,e=!1,o=0;m.length>o;o++)i=m[o][0][0],a=m[o][0][1],u=m[o][1],l=m[o][2],t>=i&&a>t&&(f[u]+=" "+l,e=!0);e&&(r=_.add(f)),g[t]=r}return p.length>h}function u(t,e){return["function"==typeof t?t.call(this):t,"function"==typeof e?e.call(this):e]}function s(t){return t?t.offsetTop+s(t.offsetParent):0}function l(t){return t*t}function c(t){return 1-l(1-t)}var f=window.innerHeight,h=d3.select("#stories")[0][0].offsetHeight+f,p=[],d=[],m=[],g=[],v=!1,y=cwm.util.transformCSS,w=function(t){return document.querySelectorAll(t)};"function"==typeof Sizzle&&(w=function(t){return Sizzle(t)});var b={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};e.prototype=Object.create(Array.prototype),e.prototype.add=function(t){function e(t,n){if(!t||!n)return!1;if(t==n)return!0;if(t instanceof Array&&n instanceof Array){if(t.length!=n.length)return!1;for(var r=0;t.length>r;r++)if(t[r]instanceof Array&&n[r]instanceof Array){if(!e(t[r],n[r]))return!1}else if(t[r]!=n[r])return!1;return!0}return!1}for(var n=0;this.length>n;n++)if(e(this[n],t))return n;return this.push(t)-1},n.prototype.add=function(t){for(var e=0;this.length>e;e++)if(this[e]==t)return e;return this[e]=t,this.origStyles[e]=t.getAttribute("style"),this.length+=1,e};var x=new n,M=new e,_=new e,T=new n,E={addKlass:function(t,e,n,r){var o,i,a,s=w(t);for(o=0;s.length>o;o++)i=T.add(s[o]),a=u.call(s[o],n,r),a[1]>=0&&m.push([a,i,e]);return E},affixTop:function(t,e){var n,r,o=function(){return s(this)};return e&&(r=function(){return d3.functor(e).call(this)-s(this)},E.addTranslateY(t,r,n,999999)),E.addKlass(t,"fixedTop",o,n||999999),E.addTranslateY(t,function(){var t=s(this);return function(e){return y+": translate3d(0,"+(e-t)+"px, 0)"}},o,n||999999),E},affixBottom:function(t,e,n){n=n||0;var r,o,i=function(){return s(this)-f+this.offsetHeight+n};return e&&("function"==typeof e?(r=function(){return e.call(this)-n},o=function(){return e.call(this)-s(this)+f-this.offsetHeight}):(r=function(){return e-n},o=function(){return e-s(this)}),E.addTranslateY(t,o,0,r)),E.addKlass(t,"fixedBottom",r||0,i),E.addTranslateY(t,function(){var t=i.call(this);return function(e){return y+": translate3d(0,"+(e-t)+"px,0)"}},r||0,i),E},fadeIn:function(t,e,n){return i(t,n,e),E.addStyle(t,{opacity:0},0,e),E},fadeOut:function(t,e,n){return i(t,e,n),E.addStyle(t,{opacity:0},n,999999),E},addTranslateY:function(t,e,n,r){var o,i,a,s;return d3.selectAll(t).each(function(){o=x.add(this),i=u.call(this,n,r),a=e.call(this),s="function"==typeof a?a:y+": translate3d(0px,"+a+"px, 0px)",d.push([i,o,s])}),E},addStyle:function(t,e,n,r){var o,i,a,s,l,c,f=w(t);for(o=0;f.length>o;o++)if(i=x.add(f[o]),a=u.call(f[o],n,r),c="",a[1]>=0){for(s in e)l="function"==typeof e[s]?e[s].call(f[o]):e[s],l+="number"==typeof l&&s.match(/top|bottom/)?"px":"",c+=s+":"+l+";";d.push([a,i,c])}return E},enable:function(){return M.length=0,a(),d3.timer(a),v=!0,cwm.scrollHandler.add(E.updateStyles),E}};return E.updateStyles=function(e){d3.select(t).style(cwm.util.transformCSS,"translate3d(0px,-"+e+"px, 0px)");var n,r,o,i,a,u=p[Math.max(e,0)],s=g[Math.max(e,0)],l=M[u],c=_[s];for(n=0;l.length>n;n++){for(r=x[n],o=l[n][0],a=1;l[n].length>a;a++)o+=l[n][a].call(r,e);r.getAttribute("style")!==o&&r.setAttribute("style",o)}for(n=0;c.length>n;n++)r=T[n],i=c[n].trim(),r.getAttribute("class")!==i&&r.setAttribute("class",i)},E},cwm.handlers.MarkerInteraction=function(t){function e(){if(!d3.event.defaultPrevented){var t=this.__data__;t.properties.featured===!0&&window.clearTimeout(l),d3.select(this).transition().duration(500).ease("elastic",1.5).attr("r",function(t){return a(t,2)}),(!u||u&&this!==u._marker)&&r.call(this)}}function n(){d3.event.defaultPrevented||(u&&!s&&(u.remove(),u=null),u&&u._marker===this||d3.select(this).transition().attr("r",a))}function r(){if(!d3.event.defaultPrevented){var e=new MM.Point(this.getAttribute("cx"),this.getAttribute("cy")),o=this,i=this.__data__,l=cwm.map.dimensions;u&&(u._marker!==o&&d3.select(u._marker).transition().attr("r",a),u.remove(),u=null),u=cwm.render.Popup(i,t),u._marker=o;var c=u.select(".marker-popup");"click"===d3.event.type?(d3.event.stopPropagation(),s="large",cwm.render.PopupLarge(i,c.classed("large",!0)),u.on("click.popup",function(){d3.event.defaultPrevented||(d3.event.stopPropagation(),s=!1,n.call(o))}),t.on("click",function(){d3.event.defaultPrevented||(s=!1,n.call(o))})):(cwm.render.PopupSmall(i,c),u.on("click.popup",function(){d3.event.defaultPrevented||(r.call(o),d3.select(o).on("click.zoom").call(o),d3.select(o).on("click.scroll").call(o))}).on("mouseleave.popup",function(){d3.event.defaultPrevented||(s=!1,n.call(o))}).on("mouseenter.popup",function(){s=!0}));var f=c.node().offsetWidth,h=c.node().offsetHeight;c.style("left",function(){return f>l.x-e.x?"auto":0}).style("right",function(){return f>l.x-e.x?0:"auto"}).style("bottom",function(){return h>e.y?"auto":0}),MM.moveElement(u.node(),e)}}function o(t){l&&window.clearTimeout(l),t.transition().delay(2e3).duration(180).attr("r",function(t){return a(t,2)}).style("stroke-width",a).each("end",function(){d3.select(this).transition().duration(1800).ease("elastic",1,.2).attr("r",a).style("stroke-width",3)}),l=window.setTimeout(o,5e3,t)}function i(){var t=this.__data__;t.properties.featured===!0&&(cwm.map.flightHandler.pause(),cwm.map.s.scrollTo(cwm.util.sanitize(t.properties.featured_url),function(){cwm.map.flightHandler.resume()}))}function a(t,e){return e=e||1,t.properties._markerSize*e}var u,s,l;return{add:function(t){t[0][0]&&t.on("mouseout.popup",n).on("mouseover.popup",e).on("click.popup",r).on("click.scroll",i).filter(function(t){return t.properties.featured===!0}).attr("class","featured").call(o)},drawPopup:function(t){if(u){var e=u.datum(),n=new MM.Point(t(e)[0],t(e)[1]);MM.moveElement(u.node(),n)}},removePopup:function(){s=!1,u&&(u.remove(),u=null)}}},cwm.data={},cwm.data.ecuador={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"Ecuador"},geometry:{type:"Polygon",coordinates:[[[-78.80291,1.428007],[-78.731331,1.370628],[-78.693336,1.373506],[-78.647072,1.280454],[-78.559723,1.210047],[-78.431335,1.144838],[-78.373405,1.063676],[-78.314438,1.02976],[-78.197777,.992143],[-78.198547,.951752],[-78.12178,.937733],[-78.088173,.898703],[-78.022369,.87653],[-77.962822,.827145],[-77.864128,.796609],[-77.800056,.82439],[-77.70533,.8385],[-77.661453,.80659],[-77.701866,.744109],[-77.600121,.66735],[-77.523987,.647251],[-77.482231,.606659],[-77.492279,.542308],[-77.464546,.394909],[-77.394417,.35972],[-77.371323,.38657],[-77.272881,.354901],[-77.209908,.34965],[-77.128006,.37047],[-77.083412,.295785],[-76.905678,.248792],[-76.777969,.251208],[-76.730377,.284788],[-76.640106,.265787],[-76.595596,.23153],[-76.539284,.271036],[-76.504364,.249086],[-76.402435,.257127],[-76.395714,.391773],[-76.333206,.392402],[-76.302826,.445522],[-76.265556,.446463],[-76.215401,.390704],[-76.121201,.385877],[-76.087288,.33211],[-76.037033,.347321],[-75.997688,.317091],[-75.874626,.13115],[-75.84597,.136341],[-75.81218,.06598],[-75.76078,.05115],[-75.68119,.059601],[-75.598366,.035041],[-75.574623,-.007299],[-75.521782,-.009959],[-75.394737,-.078611],[-75.367332,-.07465],[-75.253532,-.111829],[-75.291222,-.149239],[-75.40966,-.16819],[-75.513329,-.11755],[-75.551743,-.123197],[-75.474861,-.245111],[-75.471489,-.29181],[-75.3881,-.43334],[-75.316811,-.49167],[-75.249527,-.51953],[-75.227921,-.617979],[-75.27523,-.66199],[-75.279419,-.7166],[-75.227242,-.863039],[-75.233612,-.93606],[-75.201126,-.9737],[-75.28508,-.98658],[-75.384979,-.940539],[-75.545242,-1.549339],[-75.567818,-1.53728],[-75.858643,-1.906222],[-76.055496,-2.136937],[-76.644562,-2.584064],[-77.834099,-2.992182],[-77.948532,-3.089973],[-78.057243,-3.228994],[-78.084396,-3.228419],[-78.109077,-3.289345],[-78.18972,-3.373662],[-78.155006,-3.420929],[-78.151329,-3.477937],[-78.224411,-3.514111],[-78.251358,-3.40314],[-78.343666,-3.391011],[-78.367455,-3.536217],[-78.386459,-3.564658],[-78.391418,-3.679175],[-78.414551,-3.69953],[-78.406563,-3.781707],[-78.458359,-3.841783],[-78.486305,-3.924082],[-78.521881,-3.933235],[-78.56395,-3.988807],[-78.540276,-4.073705],[-78.580116,-4.137621],[-78.576675,-4.197651],[-78.640511,-4.311606],[-78.619797,-4.434476],[-78.658264,-4.534704],[-78.662025,-4.58918],[-78.700859,-4.621726],[-78.839104,-4.652925],[-78.892281,-4.71618],[-78.88633,-4.803651],[-78.913033,-4.855184],[-78.894173,-4.88565],[-78.967598,-4.887013],[-79.011833,-5.014357],[-79.07444,-4.966317],[-79.181847,-4.954967],[-79.258011,-4.970463],[-79.307671,-4.891491],[-79.437088,-4.777666],[-79.42849,-4.735628],[-79.457191,-4.701247],[-79.495697,-4.581492],[-79.487183,-4.528632],[-79.541481,-4.528176],[-79.601189,-4.457758],[-79.641342,-4.435776],[-79.704887,-4.470763],[-79.815117,-4.488859],[-79.868172,-4.414117],[-79.919098,-4.385999],[-79.98912,-4.3822],[-80.061653,-4.310466],[-80.102394,-4.291839],[-80.180489,-4.307921],[-80.188362,-4.336269],[-80.294083,-4.437745],[-80.390839,-4.48537],[-80.446587,-4.44677],[-80.452454,-4.38885],[-80.411293,-4.318601],[-80.330742,-4.225389],[-80.370857,-4.197549],[-80.407806,-4.217127],[-80.448555,-4.198538],[-80.448647,-4.129679],[-80.48185,-4.05697],[-80.43441,-3.989487],[-80.397499,-3.980126],[-80.298286,-4.016385],[-80.12796,-3.896229],[-80.159004,-3.868496],[-80.161377,-3.803233],[-80.18969,-3.773848],[-80.179329,-3.725586],[-80.189201,-3.598421],[-80.240295,-3.461352],[-80.117363,-3.420972],[-80.064857,-3.41875],[-80.02903,-3.363194],[-80.003197,-3.238473],[-79.933197,-3.162917],[-79.909027,-3.162361],[-79.901527,-3.100416],[-79.845139,-3.012916],[-79.852081,-2.877916],[-79.804581,-2.788195],[-79.778473,-2.663472],[-79.990692,-2.651527],[-80.062637,-2.60875],[-80.016251,-2.50875],[-80.082916,-2.489861],[-80.173195,-2.596527],[-80.255692,-2.650695],[-80.256531,-2.74375],[-80.311806,-2.717084],[-80.392082,-2.637084],[-80.450417,-2.630696],[-80.502914,-2.564582],[-80.68708,-2.400416],[-80.802086,-2.379583],[-80.895142,-2.316528],[-80.942917,-2.218751],[-80.85125,-2.194861],[-80.754303,-2.117083],[-80.73542,-2.025973],[-80.763474,-1.975417],[-80.725975,-1.931805],[-80.778198,-1.739305],[-80.80542,-1.709861],[-80.848747,-1.604305],[-80.814026,-1.560972],[-80.816528,-1.509584],[-80.766251,-1.474027],[-80.759583,-1.388473],[-80.736809,-1.356529],[-80.850693,-1.20514],[-80.910141,-1.064027],[-80.830414,-.960139],[-80.76458,-.942916],[-80.630692,-.94736],[-80.547363,-.884306],[-80.505692,-.732916],[-80.469864,-.638749],[-80.429581,-.602361],[-80.461807,-.45264],[-80.491531,-.407638],[-80.476807,-.369305],[-80.404304,-.307361],[-80.380692,-.234027],[-80.32653,-.173473],[-80.287086,-.182361],[-80.155975,-.063195],[-80.064583,.055416],[-80.039024,.132084],[-80.030975,.21375],[-80.037636,.394584],[-80.014305,.404862],[-80.057083,.464026],[-80.019302,.509306],[-80.010696,.565694],[-80.028748,.627917],[-80.100693,.678751],[-80.100136,.752362],[-80.060692,.815139],[-79.950691,.827916],[-79.917358,.857362],[-79.80986,.894029],[-79.739304,.964584],[-79.651527,.99264],[-79.553192,.994028],[-79.392082,1.083751],[-79.346802,1.069584],[-79.258469,1.087639],[-79.244858,1.073194],[-79.159859,1.098472],[-79.119583,1.132916],[-79.046806,1.245417],[-79.000694,1.270973],[-78.966804,1.230694],[-78.901802,1.237084],[-78.879585,1.273195],[-78.876526,1.345694],[-78.832085,1.372916],[-78.80291,1.428007]]]}}]}}();